<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hanks&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="android,web,node,python">
<meta property="og:type" content="website">
<meta property="og:title" content="Hanks' Blog">
<meta property="og:url" content="http://hanks-zyh.github.io/page/4/index.html">
<meta property="og:site_name" content="Hanks' Blog">
<meta property="og:description" content="android,web,node,python">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hanks' Blog">
<meta name="twitter:description" content="android,web,node,python">
  
  
    <link rel="icon" href="/images/favicon.png">
  
  <!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'> -->
  <!-- <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <!-- <link href="//fonts.useso.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <!-- <link href='//fonts.useso.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'> -->
  <link rel="stylesheet" href="/css/style.css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <a href="/" class="logo"></a>
    <nav id="main-nav">
      <a id="main-nav-toggle" class="nav-icon"></a>
      
        <a class="main-nav-link" href="/archives">归档</a>
      
        <a class="main-nav-link" href="/daily">日报</a>
      
        <a class="main-nav-link" href="/eye-video">开眼</a>
      
        <a class="main-nav-link" href="/joke">joke</a>
      
        <a class="main-nav-link" href="/picture-fight">斗图</a>
      
        <a class="main-nav-link" href="/atom.xml">RSS</a>
      
    </nav>
  </div>
</header>
      <nav id="mobile-nav" class="off">
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/daily" class="mobile-nav-link">日报</a>
  
    <a href="/eye-video" class="mobile-nav-link">开眼</a>
  
    <a href="/joke" class="mobile-nav-link">joke</a>
  
    <a href="/picture-fight" class="mobile-nav-link">斗图</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
</nav>
      <div class="outer">
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <div class="info">
     <div class="content">
       <div>
         <a href="https://github.com/hanks-zyh"><img class="avatar" src="https://avatars2.githubusercontent.com/u/6268322?v=3&s=460" alt="" /></a>
       </div>
       <div class="name">
         <h2 >Hanks</h2>
       </div>
       <p>90后，奋青，Android ……</p>
       <div class="account">
         <div class="account-item">
           <a href="http://weibo.com/u/2359002991"><img src="http://ww1.sinaimg.cn/large/8c9b876fjw1f3ik9y4q7hj205k05kdfx.jpg" style="width:40px;height:40px;border-radius: 50%;"></a>
         </div>
         <div class="account-item">
              <a href="http://www.zhihu.com/people/yuhan-zhang-36"><img src="http://ww2.sinaimg.cn/large/8c9b876fjw1f3ik7sv63wj205k05k3yg.jpg" style="width:40px;height:40px;border-radius: 50%;"></a>
         </div>
         <div class="account-item">
           <a href="http://hanks.xyz/atom.xml"> <img src="http://ww3.sinaimg.cn/large/8c9b876fjw1f3ik9kk2ctj205k05kt8n.jpg" style="width:40px;height:40px;border-radius: 50%;"></a>
         </div>
       </div>
     </div>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">最新发布</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/03/26/node-image-recognition/">Node 识别图片中的文字</a>
          </li>
        
          <li>
            <a href="/2017/03/22/proxy-test/">请求代理</a>
          </li>
        
          <li>
            <a href="/2017/02/16/android-customview-inputmethod/">Android 自定义 view 连接输入法</a>
          </li>
        
          <li>
            <a href="/2017/01/10/android-lua/">Android 与 Lua</a>
          </li>
        
          <li>
            <a href="/2017/01/10/android-markdown-render/">Android 下 Markdown 渲染</a>
          </li>
        
          <li>
            <a href="/2017/01/09/android-webview-font/">Android 中 webview 自定义字体</a>
          </li>
        
          <li>
            <a href="/2016/09/25/slack-bot/">slack bot</a>
          </li>
        
          <li>
            <a href="/2016/09/19/webapp/">让网页更适配移动设备</a>
          </li>
        
          <li>
            <a href="/2016/09/05/weex-2333/">体验 weex —— 写一个表情包应用</a>
          </li>
        
          <li>
            <a href="/2016/08/31/nestedscrollchild/">WebView 实现 NestedScrollingChild</a>
          </li>
        
          <li>
            <a href="/2016/08/29/nestedchildparent/">NestedScrollingParent 实现复杂交互效果</a>
          </li>
        
          <li>
            <a href="/2016/08/04/telegram-bot/">写一个福利 Telegram 机器人</a>
          </li>
        
          <li>
            <a href="/2016/07/31/write-butterkinfe/">写一个 ButterKnife</a>
          </li>
        
          <li>
            <a href="/2016/07/24/edittext-cursor/">多行 EditText 的光标高度问题</a>
          </li>
        
          <li>
            <a href="/2016/07/22/textview-lineheight/">TextView 设置行高并垂直居中</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Activity/" style="font-size: 10px;">Activity</a> <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Atom/" style="font-size: 10px;">Atom</a> <a href="/tags/Dagger2/" style="font-size: 10px;">Dagger2</a> <a href="/tags/EditText/" style="font-size: 10px;">EditText</a> <a href="/tags/Express/" style="font-size: 11.67px;">Express</a> <a href="/tags/Fragment/" style="font-size: 10px;">Fragment</a> <a href="/tags/Framework/" style="font-size: 11.67px;">Framework</a> <a href="/tags/HTML-CSS/" style="font-size: 10px;">HTML/CSS</a> <a href="/tags/Jade/" style="font-size: 10px;">Jade</a> <a href="/tags/Java/" style="font-size: 13.33px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Kotlin/" style="font-size: 15px;">Kotlin</a> <a href="/tags/LAMP/" style="font-size: 10px;">LAMP</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Lua/" style="font-size: 10px;">Lua</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/NestedScrolling/" style="font-size: 13.33px;">NestedScrolling</a> <a href="/tags/Node-js/" style="font-size: 13.33px;">Node.js</a> <a href="/tags/OS-X/" style="font-size: 10px;">OS X</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/Python/" style="font-size: 11.67px;">Python</a> <a href="/tags/React-Native/" style="font-size: 18.33px;">React-Native</a> <a href="/tags/Refactoring/" style="font-size: 10px;">Refactoring</a> <a href="/tags/Rx/" style="font-size: 10px;">Rx</a> <a href="/tags/RxJava/" style="font-size: 13.33px;">RxJava</a> <a href="/tags/Rxandroid/" style="font-size: 10px;">Rxandroid</a> <a href="/tags/Rxjava/" style="font-size: 11.67px;">Rxjava</a> <a href="/tags/SQLite/" style="font-size: 10px;">SQLite</a> <a href="/tags/Scrapy/" style="font-size: 11.67px;">Scrapy</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/SwipeRefreshLayout/" style="font-size: 10px;">SwipeRefreshLayout</a> <a href="/tags/Telegram/" style="font-size: 10px;">Telegram</a> <a href="/tags/TextView/" style="font-size: 10px;">TextView</a> <a href="/tags/Ubuntu/" style="font-size: 16.67px;">Ubuntu</a> <a href="/tags/VPS/" style="font-size: 10px;">VPS</a> <a href="/tags/View/" style="font-size: 10px;">View</a> <a href="/tags/Vue-js/" style="font-size: 10px;">Vue.js</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/WebView/" style="font-size: 11.67px;">WebView</a> <a href="/tags/bot/" style="font-size: 10px;">bot</a> <a href="/tags/crontab/" style="font-size: 10px;">crontab</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/interpolator/" style="font-size: 10px;">interpolator</a> <a href="/tags/leancloud/" style="font-size: 10px;">leancloud</a> <a href="/tags/mac-os/" style="font-size: 10px;">mac os</a> <a href="/tags/slack/" style="font-size: 10px;">slack</a> <a href="/tags/virtualBox/" style="font-size: 10px;">virtualBox</a> <a href="/tags/weex/" style="font-size: 10px;">weex</a> <a href="/tags/代理/" style="font-size: 10px;">代理</a> <a href="/tags/依赖注入/" style="font-size: 10px;">依赖注入</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/学习/" style="font-size: 10px;">学习</a> <a href="/tags/必备知识/" style="font-size: 10px;">必备知识</a> <a href="/tags/性能优化/" style="font-size: 10px;">性能优化</a> <a href="/tags/总结/" style="font-size: 10px;">总结</a> <a href="/tags/热修复/" style="font-size: 11.67px;">热修复</a> <a href="/tags/爬虫/" style="font-size: 10px;">爬虫</a> <a href="/tags/自动化/" style="font-size: 10px;">自动化</a> <a href="/tags/设计/" style="font-size: 10px;">设计</a>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://github.com/hanks-zyh">hanks-zyh</a>
          </li>
        
          <li>
            <a href="http://kiya.space">Kiya‘s space</a>
          </li>
        
          <li>
            <a href="http://rocko.xyz/">Rocko&#39;s blog</a>
          </li>
        
          <li>
            <a href="http://hexo.io">Hexo</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <div class="wx">
      <h3 class="widget-title">微信公众号</h3>
      <img src='http://ww1.sinaimg.cn/large/8c9b876fly1fe0nnlvokpj20by0bywfi.jpg' height="100%" width="100%" >
      <p>搜索公众号: CodeProvider</p>
    </div>
  </div>


  
</aside>
        
        <section id="main" class="mdl-shadow--2dp">
  
    <article id="post-react-navigator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/24/react-navigator/">React-Native 的Navigator控制界面跳转</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>例子:<br><img src="http://file.bmob.cn/M02/17/17/oYYBAFZ70QWAYn4DABTb3uKu6GM103.gif" alt="界面跳转"></p>
<p>回顾一下,一个简单的界面包含一下几块<br>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-react-network" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/23/react-network/">React-Native 网络请求</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>大部分的app都需要进行网络连接,通过网络获取服务器的数据,然后更新app的界面展示内容,React-Native自然拥有网络的相关操作.<br><a href="https://facebook.github.io/react-native/docs/network.html#content">官方文档</a><br>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-react-components" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/22/react-components/">React-Native 组件练习-购物app侧滑菜单</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参照官方例子练习组件的使用,练习View Image Text 还有Android平台的DrawerLayoutAndroid<br>效果图:<br><img src="http://file.bmob.cn/M02/11/DF/oYYBAFZ5LF6AVgO5AIY4EJ1JHfk120.gif" alt="React-Native"></p>
<h2 id="React-Native-中的-width-height的-100"><a href="#React-Native-中的-width-height的-100" class="headerlink" title="React-Native  中的 width,height的 100%"></a>React-Native  中的 width,height的 100%</h2><p>在React-Native 中没有百分比这样的宽高,但是有替代的,具体见 <a href="https://github.com/facebook/css-layout/issues/57#ref-issue-86696744">issue</a><br><code>flex:1</code> 相当于 <code>height:100%</code><br><code>alignSelf:&#39;stretch&#39;</code> 相当于 <code>width:100%</code></p>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-react-flexbox" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/21/react-flexbox/">React-Native中的布局</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>React-Native 使用 FlexBox布局来放置元素</p>
<blockquote>
<p>Flex是Flexible Box的缩写，意为”弹性布局”，用来为盒状模型提供最大的灵活性。<br>任何一个容器都可以指定为Flex布局。</p>
</blockquote>
<p><a href="http://facebook.github.io/react-native/docs/flexbox.html#content">Flexbox</a></p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">alignItems <span class="class"><span class="keyword">enum</span>('<span class="title">flex</span>-<span class="title">start</span>', '<span class="title">flex</span>-<span class="title">end</span>', '<span class="title">center</span>', '<span class="title">stretch</span>')</span></div><div class="line"></div><div class="line">alignSelf <span class="class"><span class="keyword">enum</span>('<span class="title">auto</span>', '<span class="title">flex</span>-<span class="title">start</span>', '<span class="title">flex</span>-<span class="title">end</span>', '<span class="title">center</span>', '<span class="title">stretch</span>')</span></div><div class="line"></div><div class="line">flex number</div><div class="line"></div><div class="line">flexDirection <span class="class"><span class="keyword">enum</span>('<span class="title">row</span>', '<span class="title">column</span>')</span></div><div class="line"></div><div class="line">flexWrap <span class="class"><span class="keyword">enum</span>('<span class="title">wrap</span>', '<span class="title">nowrap</span>')</span></div><div class="line"></div><div class="line">justifyContent <span class="class"><span class="keyword">enum</span>('<span class="title">flex</span>-<span class="title">start</span>', '<span class="title">flex</span>-<span class="title">end</span>', '<span class="title">center</span>', '<span class="title">space</span>-<span class="title">between</span>', '<span class="title">space</span>-<span class="title">around</span>')</span></div></pre></td></tr></table></figure>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-atom-nuclide" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/18/atom-nuclide/">Atom安装Nuclide</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://nuclide.io/"><strong>Nuclide</strong></a> 是Facebook 基于Atom开发的IDE,本地环境Ubuntu 64位, 通过Atom的setting界面安装 nuclide 总出错, 出错后打开atom巨卡,然后通过手动安装成功. 包括安装 <a href="http://flowtype.org">flow</a>同样也是手动安装成功.</p>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-react-native-UIExplorer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/18/react-native-UIExplorer/">运行React-Native例子UIExplorer</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>运行 FaceBook 给出的例子UIExplorer, 由于网络问题折腾了半天, 在公司网络死活不行,到家一小会儿搞定. 原因是我使用 npm install 的时候 直接 <code>ctrl+c</code> 断掉了, 需要把目录下的<code>node_modules</code>文件夹删除再重新安装.</p>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-react-native-start-md" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/15/react-native-start-md/">Ubuntu进行 React-Native 的开发</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>尝试在　<code>Ubuntu 14.04</code>　上面进行 react-native 的开发, 安装<a href="https://facebook.github.io/react-native/docs/getting-started.html">官方文档</a>进行配置,记录配置流程</p>
<h2 id="安装-node-js"><a href="#安装-node-js" class="headerlink" title="安装 node.js"></a>安装 node.js</h2><p>在<a href="https://nodejs.org/en/">官网</a>下载源码安装即可, 安装后查看版本<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="keyword">node</span> <span class="title">-v</span></div></pre></td></tr></table></figure></p>
<h2 id="安装-watchman"><a href="#安装-watchman" class="headerlink" title="安装 watchman"></a>安装 watchman</h2><p><a href="https://facebook.github.io/watchman/docs/install.html">文档</a></p>
<p>安装依赖<br><figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-<span class="built_in">get</span> install autoconf  automake python-<span class="built_in">dev</span></div></pre></td></tr></table></figure></p>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-refactoring-plaid-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/08/refactoring-plaid-1/">重构 Plaid app - 响应式的MVP模式(一)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Nick Butcher 在 <a href="https://github.com/nickbutcher/plaid">github</a> 上开源了Plaid。这个app不仅很酷,还拥有极致的 UI / UX。如此炫酷的app的代码对开发者来说copy下来阅读一下可谓是最佳实践。于是我也copy下来,决定深入Plaid的代码。和往常一样，你会发现里面的一些代码可以用其他的方式实现。因此不只是谈论代码,我决定花一些时间来重构Plaid的部分源代码。我将写3篇文章来分享我关于如何重构Plaid的,这篇文章是第一部分。</p>
<p>前言: 开始我以为自己能重构整个app. 然而,事实是我太天真了,我低估了这个应用的复杂度和新特性的数量。在我花了几个小时阅读 Nick Butcher 的代码之后, 我发现有些功能仅仅通过使用应用程序很难发现。一句话: 我意识到我没有时间把所有的想法付诸行动。因此我的“重构”集中于应用程序的“主页”和“搜索屏幕”。本来想看看有没有更多模块可以重构，但是我没有太多空闲时间来做了。重构代码可以在<a href="https://github.com/sockeqwe/plaid">github上</a>找到</p>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-rx_thread" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/06/rx_thread/">Rx中的线程切换</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>初学者在使用<code>RxJava</code>的过程中，经常搞不清Observable的事件序列和每次操作应该怎样切换线程，切换哪个线程<br>首先需要搞懂在<code>RxJava</code> 中<code>.subscribeOn()</code> 和  <code>observeOn()</code> 之间的区别：</p>
<ul>
<li><code>.subscribeOn()</code> 用来指定<code>Observable</code>应该操作的调度器(<code>Scheduler</code>)</li>
<li><code>.observeOn()</code> 指定 <code>Observable</code>在一个指定的调度器(<code>Scheduler</code>)上给观察者发送通知</li>
<li>默认情况下， 事件序列操作的线程与调用<code>.subscribe()</code>的线程一致</li>
</ul>
<p>没理解？<br>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-mac_java_enviroment" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/04/mac_java_enviroment/">OS X中Java环境变量配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>类似Linux下Java环境的配置,流程就是 <code>下载</code> -&gt; <code>解压</code> -&gt; <code>配置环境变量文件</code></p>
<h3 id="下载-jdk"><a href="#下载-jdk" class="headerlink" title="下载 jdk"></a>下载 jdk</h3><p>到oracle官网下最新 jdk <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">下载链接</a>,  注意下载的是jdk(Java Development Kit ),不是jre(Java Runtime Environment)</p>
<h3 id="配置Java环境变量"><a href="#配置Java环境变量" class="headerlink" title="配置Java环境变量"></a>配置Java环境变量</h3><p>安装过jdk之后, 查看jdk的安装路径, 一般在 <code>/Library/Java/JavaVirtualMachines</code>目录下面<br>然后编辑环境变量, 打开文件 <code>/etc/profile</code></p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo <span class="keyword">vim</span> /etc/<span class="keyword">profile</span></div></pre></td></tr></table></figure>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-mac-os-in-Ubuntu" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/02/mac-os-in-Ubuntu/">Ubuntu 安装 OS X 10.11  虚拟机</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>看到<a href="http://bbs.feng.com/read-htm-tid-9908410.html">论坛</a>里有人在windows平台上面利用 <code>VirtualBox</code> 成功安装了 <code>OS X 10.11</code>,(我的是Ubuntu 14.04)于是尝试一下虚拟机装mac,既然 <code>VirtualBox</code> 有linux版, 于是尝试在Ubuntu下装mac os虚拟机.<br>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-ReactiveX" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/01/ReactiveX/">ReactiveX</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>An API for asynchronous programming with observable streams</p>
</blockquote>
<p><img src="http://file.bmob.cn/M02/CD/5C/oYYBAFZehqmAAvzxAAEPNTqMZeU527.gif" alt=""><br>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-rx_ux" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/29/rx_ux/">使用RxJava 提升用户体验</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>原文链接：<a href="https://medium.com/@diolor/improving-ux-with-rxjava-4440a13b157f#.qdhu122d1">https://medium.com/@diolor/improving-ux-with-rxjava-4440a13b157f#.qdhu122d1</a></br><br>翻译： <a href="https://github.com/hanks-zyh">hanks</a></p>
</blockquote>
<p>“网络永连接，服务器不出错，培根没肥肉”</p>
<p><img src="http://file.bmob.cn/M02/C6/EF/oYYBAFZbFyCADEAkAAV75iu06QU497.gif" alt="Search list animation by Daley P Maasz from Dribbble."></p>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-利器_--_抓包工具总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/26/利器_--_抓包工具总结/">利器 -- 抓包工具总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[github 地址] (<a href="https://github.com/hanks-zyh/capturedata" target="_blank" rel="external">https://github.com/hanks-zyh/capturedata</a>)</p>
<blockquote>
<p>抓包工具整理</p>
</blockquote>
<h1 id="抓包工具-–-Charles"><a href="#抓包工具-–-Charles" class="headerlink" title="抓包工具 – Charles"></a>抓包工具 – Charles</h1><p>基于Java 跨平台： Linux , Mac OS X, Windows<br><a href="https://www.charlesproxy.com/" target="_blank" rel="external">官网</a></p>
<blockquote>
<p>Charles is an HTTP proxy / HTTP monitor / Reverse Proxy that enables a developer to view all of the HTTP and SSL / HTTPS traffic between their machine and the Internet. This includes requests, responses and the HTTP headers (which contain the cookies and caching information).</p>
</blockquote>
<p><img src="https://www.charlesproxy.com/assets/img/sm/23/image/mac_screen_321.png?k=f28bf8eff3" alt=""></p>
<hr>
<p><strong>以下为Linux 平台</strong></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><a href="https://www.charlesproxy.com/latest-release/download.do" target="_blank" rel="external">下载 charles-proxy-3.11.2.tar.gz</a></p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># 解压</span></div><div class="line">tar zxvf charles-proxy<span class="number">-3.11</span><span class="number">.2</span>.tar.gz</div><div class="line"></div><div class="line"><span class="meta"># 启动 charles</span></div><div class="line">./charles/bin/charles</div></pre></td></tr></table></figure>
<h2 id="手机抓包"><a href="#手机抓包" class="headerlink" title="手机抓包"></a>手机抓包</h2><p><strong>前提：使手机和电脑在一个局域网内，不一定非要是一个ip段，只要是同一个路由下就可以了，比如电脑连接的有线网ip为192.168.16.12，然后手机链接的wifi ip为192.168.1.103，但是这个有线网和无线网的最终都是来自于一个外部ip，这样的话也是可以的。</strong></p>
<p>在安卓手机的 <code>设置 -&gt; wlan -&gt; 长按连接的wifi -&gt; 修改网络 -&gt;  高级选项 -&gt; 代理选手动</code> ， 填入电脑的 ip 和 charles 监听的 端口（默认为 8888）</p>
<blockquote>
<p>查看电脑端口 ： <code>ifconfig</code><br>查看/修改 charles 监听端口： charles的 <code>Proxy -&gt; Proxy Setting</code></p>
</blockquote>
<p>设置好之后Charles弹出确认框，点击Allow按钮即可</p>
<p> <img src="https://dn-coding-net-production-pp.qbox.me/ad193bbb-4d55-4feb-9e55-0634aa6dbfce.png" alt="图片"> </p>
<p> <img src="https://dn-coding-net-production-pp.qbox.me/c48ee820-f6ae-4814-b505-ff4870db1f5b.png" alt="图片"> </p>
<h2 id="抓取-https"><a href="#抓取-https" class="headerlink" title="抓取 https"></a>抓取 https</h2><p> <img src="https://dn-coding-net-production-pp.qbox.me/027d34d1-c783-4aca-8db3-e0066bf4ca1b.png" alt="图片"> </p>
<h3 id="安装证书"><a href="#安装证书" class="headerlink" title="安装证书"></a>安装证书</h3><p>charles的 Help -&gt; SSL Proxy -&gt; Install charles Root</p>
<h3 id="设置-ssl-enable"><a href="#设置-ssl-enable" class="headerlink" title="设置 ssl enable"></a>设置 ssl enable</h3><p>在需要抓取的 https 链接上 右键 <code>enable ssl proxy</code><br><img src="https://dn-coding-net-production-pp.qbox.me/4b91cf2a-e35b-4b9b-96ac-047eafe607e6.png" alt="图片"> </p>
<p>参考 <a href="http://drops.wooyun.org/tips/2423" target="_blank" rel="external">charles使用教程指南</a></p>
<h1 id="抓包工具-–-mitmproxy"><a href="#抓包工具-–-mitmproxy" class="headerlink" title="抓包工具 – mitmproxy"></a>抓包工具 – mitmproxy</h1><p>基于python 跨平台： linux, windows，    OSX (Mountain Lion and later)<br><a href="https://mitmproxy.org/" target="_blank" rel="external">官网</a></p>
<blockquote>
<p>Mitmproxy是一个基于python的中间人代理的框架。做过渗透测试的肯定很熟悉工具burpsuite或Fiddler，这些工具能够拦截并修改http或https的数据包，对于分析数据包交互的应用来说是非常有用的。但是这些工具都是整套给我们做好了。比如如果想自己定制一套这样的工具，添加一些自己需要的功能的话，那么我想，mitmproxy将是一个比较好的选择，因为它提供了一个可供用户调用的库libmproxy（注意该库目前只支持linux系统）。</p>
</blockquote>
<p><img src="https://dn-coding-net-production-pp.qbox.me/a2d09a30-ea72-42a1-818e-0982f7227784.png" alt="图片"></p>
<p><img src="https://dn-coding-net-production-pp.qbox.me/85e1f4e1-c914-4ac1-9984-4492aad7096f.png" alt="图片"></p>
<p><img src="https://dn-coding-net-production-pp.qbox.me/6992699a-cb21-44b7-9114-38d1b10f0272.png" alt="图片"></p>
<hr>
<p><strong>以下基于Linux台（Ubuntu14.04）</strong></p>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo pip <span class="keyword">install</span> mitmproxy</div></pre></td></tr></table></figure>
<p>如果下载速度慢可以下载<a href="https://mitmproxy.org/download/mitmproxy-0.14.0.tar.gz" target="_blank" rel="external">tar包</a></p>
<h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mitmproxy -b <span class="number">192.168</span><span class="number">.1</span><span class="number">.29</span> -p <span class="number">9999</span></div></pre></td></tr></table></figure>
<p>输入 <code>？</code> 查看帮助， <code>q</code>返回<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">A      accept all intercepted flows</div><div class="line">a      accept this intercepted flow</div><div class="line">b      save request/response body</div><div class="line">C      clear flow <span class="built_in">list</span> <span class="keyword">or</span> eventlog</div><div class="line">d      delete flow</div><div class="line">D      duplicate flow</div><div class="line">e      toggle eventlog</div><div class="line">F      toggle follow flow <span class="built_in">list</span></div><div class="line">l      <span class="keyword">set</span> limit filter pattern</div><div class="line">L      load saved flows</div><div class="line">m      toggle flow mark</div><div class="line">n      create a new request</div><div class="line">P      <span class="keyword">copy</span> flow <span class="keyword">to</span> clipboard</div><div class="line">r      replay request</div><div class="line">U      unmark all marked flows</div><div class="line">V      revert changes <span class="keyword">to</span> request</div><div class="line">w      save flows</div><div class="line">W      stream flows <span class="keyword">to</span> <span class="built_in">file</span></div><div class="line">X      kill <span class="keyword">and</span> delete flow, even <span class="keyword">if</span> <span class="keyword">it</span>'s mid-intercept</div><div class="line"><span class="literal">tab</span>    <span class="literal">tab</span> <span class="keyword">between</span> eventlog <span class="keyword">and</span> flow <span class="built_in">list</span></div><div class="line">enter  view flow</div><div class="line">|      <span class="built_in">run script</span> <span class="keyword">on</span> this flow</div></pre></td></tr></table></figure></p>
<p>手机设置好代理，界面上就可以看到请求了<br><img src="https://dn-coding-net-production-pp.qbox.me/c5446754-1d45-4d7d-ba48-44b6e26d3b4f.png" alt="图片"></p>
<h2 id="mitmproxy-查看http请求响应"><a href="#mitmproxy-查看http请求响应" class="headerlink" title="mitmproxy 查看http请求响应"></a>mitmproxy 查看http请求响应</h2><p><code>C (大写)</code> 清除抓包结果</p>
<p><code>j</code>  <code>k</code> 选择请求， 回车查看详细信息</p>
<p> <img src="https://dn-coding-net-production-pp.qbox.me/5cfa3fd1-879b-4db6-8f05-f8885d730964.png" alt="图片"></p>
<p><code>tab</code>   切换 <strong>Request</strong> 和 <strong>Response</strong></p>
<p><code>m</code> Display Mode 美化信息<br> <img src="https://dn-coding-net-production-pp.qbox.me/70e7c4ad-f7c0-4e7a-bea6-2c4cdd36d50b.png" alt="图片"><br> 上图输入 m，在输入 s，便可以以json形式展示</p>
<p><code>e</code> 编辑<br>Edit request (cookies,query,path,url,header,form,raw body,method)?<br>Edit response (cookies,code,message,header,raw body)?</p>
<h3 id="mitmproxy拦截-Intercept"><a href="#mitmproxy拦截-Intercept" class="headerlink" title="mitmproxy拦截 (Intercept)"></a>mitmproxy拦截 (Intercept)</h3><p>相当于在客户端和服务器做中间人，可以修改客户端请求，修改服务器返回</p>
<p>输入 <code>i</code>（代表Intercept filter）即可，此时界面便会让你输入想要拦截的条件：</p>
<p>mitmproxy的条件拦截在默认情况下是过滤抓包的URL的。也就是说当你直接输入要拦截的条件（比如输入“weibo”），那么接下来要出现抓包会将匹配的抓包整体变黄：</p>
<p>mitmproxy条件过滤效果<br>mitmproxy条件拦截效果<br>这些橘黄色的数据包都代表被拦截了，还未发送给服务器，这个时候你就可以对这些数据包进行修改，我们选择一个数据包enter进入：</p>
<p>mitmproxy 拦截 选择数据包<br>与之前的类似，输入“e”，进行request编辑模式，然后输入“h”代表要编辑request的头部:</p>
<p>mitmproxy 编辑拦截包的头部<br>输入enter便可对高亮的User-Agent的值进行修改，上图的weibo版本之前是5.0的，被我改成了6.0 。我们还可以对header进行添加属性，输入“a”即可，然后使用tab分别键入key和value。这里我添加了“test－test”键值对：</p>
<p>mitmproxy 拦截header添加键值对<br>至此，我对拦截的request header已经修改完毕，现在要做的就是我要认可接受这个修改，然后发给服务器。所以我们输入“a”（代表“accept”）即可，等到服务器响应后，注意，mitmproxy便又了拦截服务器发过来的response（注意那个“Response intercepted”）：</p>
<p>mitmproxy 拦截response<br>现在如果你想修改这个response也可以，方式同上面修改request一样。这个时候我再输入“a”，代表我接受了这个response，然后这个response便可发给客户端了:</p>
<p>mitmproxy 拦截response之后accept</p>
<p>更多类型的mitmproxy拦截</p>
<p>同时mitmproxy还支持不同类型的条件过滤，之前在拦截字符串前面加上特定的参数比如我要拦截所有的POST request怎么办？输入：~m POST 即可（m代表method）：</p>
<p>mitmproxy 拦截特定的request 方法</p>
<p>拦截所有的request： ~q</p>
<p>拦截特定的header： ~h</p>
<p>拦截特定的domain： ~d</p>
<p>拦截特定的响应代码（404之类的）： ~c</p>
<p>mitmproxy官方文档。</p>
<hr>
<h1 id="抓包工具-–-Fiddler"><a href="#抓包工具-–-Fiddler" class="headerlink" title="抓包工具 – Fiddler"></a>抓包工具 – Fiddler</h1><p>基于C#  windows, Linux看这里 <a href="http://fiddler.wikidot.com/mono" target="_blank" rel="external">Mono Fiddler</a></p>
<hr>
<h2 id="下载-1"><a href="#下载-1" class="headerlink" title="下载"></a>下载</h2><p>直接下载，安装即可</p>
<h2 id="手机抓包-1"><a href="#手机抓包-1" class="headerlink" title="手机抓包"></a>手机抓包</h2><p><img src="https://imququ.com/static/uploads/2013/09/Snip20130913_20.png.webp" alt=""></p>
<hr>
<h1 id="抓包工具-–-wireshark"><a href="#抓包工具-–-wireshark" class="headerlink" title="抓包工具 – wireshark"></a>抓包工具 – wireshark</h1><p>跨平台：Windows，OS X ，Linux</p>
<p><a href="https://www.wireshark.org/" target="_blank" rel="external">官网</a></p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-解析_dex_文件结构_-_DexHeader" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/18/解析_dex_文件结构_-_DexHeader/">解析 dex 文件结构 - DexHeader</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p><span style="font-size:18px">原文:&nbsp;<a target="_blank" href="http://kiya-z.github.io/2015/11/17/parse-dex-file-part-dex-header/">http://kiya-z.github.io/2015/11/17/parse-dex-file-part-dex-header/</a></span></p>
<p><br>
</p>
<p></p>
<h1 class="post-title" style="font-size:26px; margin:0px; padding:0px; line-height:1; text-align:center; word-break:break-word">
解析 dex 文件结构 - DexHeader</h1>
<div class="post-meta" style="margin:3px 0px 60px; color:rgb(153,153,153); font-size:12px; text-align:center">
<span class="post-time">发表于&nbsp;2015-11-17&nbsp;</span><span class="post-category">&nbsp; | &nbsp; 分类于&nbsp;<span><a target="_blank" href="http://kiya-z.github.io/categories/Android/" rel="index" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent"><span>Android</span>&nbsp;</a></span></span><span class="post-comments-count">&nbsp;
 | &nbsp;&nbsp;<a target="_blank" href="http://kiya-z.github.io/2015/11/17/parse-dex-file-part-dex-header/#comments" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent"><span class="post-comments-count ds-thread-count">暂无评论</span>&nbsp;</a></span><span id="busuanzi_container_page_pv" style="display:inline">&nbsp;
 | &nbsp;&nbsp;<span id="busuanzi_value_page_pv">6</span>&nbsp; Hits</span></div>
<div class="post-body" style="text-align:justify; color:rgb(85,85,85); font-family:Lato,'PingFang SC','Microsoft YaHei',sans-serif; font-size:16px; line-height:32px">
<span></span>
<h3 id="简介" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:18px">
简介</h3>
<p style="margin-top:0px; margin-bottom:25px">dex 文件是 dalvik 虚拟机的可执行文件。</p>
<a target="_blank" id="more" style="border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent"></a>
<hr style="height:3px; margin:40px 0px; border:none; background-color:rgb(221,221,221)">
<h3 id="dex_文件结构" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:18px">
dex 文件结构</h3>
<p style="margin-top:0px; margin-bottom:25px">该结构位于系统源码&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">dalvik\libdex\DexFile.h</code>&nbsp;中，描述的是
 dex 文件被映射到内存中的结构。</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
<span class="line" style="height:20px">3</span>
<span class="line" style="height:20px">4</span>
<span class="line" style="height:20px">5</span>
<span class="line" style="height:20px">6</span>
<span class="line" style="height:20px">7</span>
<span class="line" style="height:20px">8</span>
<span class="line" style="height:20px">9</span>
<span class="line" style="height:20px">10</span>
<span class="line" style="height:20px">11</span>
<span class="line" style="height:20px">12</span>
<span class="line" style="height:20px">13</span>
<span class="line" style="height:20px">14</span>
<span class="line" style="height:20px">15</span>
<span class="line" style="height:20px">16</span>
<span class="line" style="height:20px">17</span>
<span class="line" style="height:20px">18</span>
<span class="line" style="height:20px">19</span>
<span class="line" style="height:20px">20</span>
<span class="line" style="height:20px">21</span>
<span class="line" style="height:20px">22</span>
<span class="line" style="height:20px">23</span>
<span class="line" style="height:20px">24</span>
<span class="line" style="height:20px">25</span>
<span class="line" style="height:20px">26</span>
<span class="line" style="height:20px">27</span>
<span class="line" style="height:20px">28</span>
<span class="line" style="height:20px">29</span>
<span class="line" style="height:20px">30</span>
<span class="line" style="height:20px">31</span>
<span class="line" style="height:20px">32</span>
<span class="line" style="height:20px">33</span>
<span class="line" style="height:20px">34</span>
<span class="line" style="height:20px">35</span>
<span class="line" style="height:20px">36</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px">/<span class="keyword" style="color:rgb(178,148,187)">*</span></span>
<span class="line" style="height:20px"> <span class="keyword" style="color:rgb(178,148,187)">*</span> Structure representing a DEX file.</span>
<span class="line" style="height:20px"> <span class="keyword" style="color:rgb(178,148,187)">*</span></span>
<span class="line" style="height:20px"> <span class="keyword" style="color:rgb(178,148,187)">*</span> Code should regard DexFile as opaque, using the API calls provided here</span>
<span class="line" style="height:20px"> <span class="keyword" style="color:rgb(178,148,187)">*</span> to access specific structures.</span>
<span class="line" style="height:20px"> <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">struct DexFile {</span>
<span class="line" style="height:20px">    /<span class="keyword" style="color:rgb(178,148,187)">*</span> directly-mapped <span class="string" style="color:rgb(181,189,104)">&quot;opt&quot;</span> header <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    const DexOptHeader<span class="keyword" style="color:rgb(178,148,187)">*</span> pOptHeader;</span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px">    /<span class="keyword" style="color:rgb(178,148,187)">*</span> pointers to directly-mapped structs and arrays in base DEX <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    const DexHeader<span class="keyword" style="color:rgb(178,148,187)">*</span>    pHeader;</span>
<span class="line" style="height:20px">    const DexStringId<span class="keyword" style="color:rgb(178,148,187)">*</span>  pStringIds;</span>
<span class="line" style="height:20px">    const DexTypeId<span class="keyword" style="color:rgb(178,148,187)">*</span>    pTypeIds;</span>
<span class="line" style="height:20px">    const DexFieldId<span class="keyword" style="color:rgb(178,148,187)">*</span>   pFieldIds;</span>
<span class="line" style="height:20px">    const DexMethodId<span class="keyword" style="color:rgb(178,148,187)">*</span>  pMethodIds;</span>
<span class="line" style="height:20px">    const DexProtoId<span class="keyword" style="color:rgb(178,148,187)">*</span>   pProtoIds;</span>
<span class="line" style="height:20px">    const DexClassDef<span class="keyword" style="color:rgb(178,148,187)">*</span>  pClassDefs;</span>
<span class="line" style="height:20px">    const DexLink<span class="keyword" style="color:rgb(178,148,187)">*</span>      pLinkData;</span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px">    /<span class="keyword" style="color:rgb(178,148,187)">*</span></span>
<span class="line" style="height:20px">     <span class="keyword" style="color:rgb(178,148,187)">*</span> These are mapped out of the <span class="string" style="color:rgb(181,189,104)">&quot;auxillary&quot;</span> section, and may not be</span>
<span class="line" style="height:20px">     <span class="keyword" style="color:rgb(178,148,187)">*</span> included in the file.</span>
<span class="line" style="height:20px">     <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    const DexClassLookup<span class="keyword" style="color:rgb(178,148,187)">*</span> pClassLookup;</span>
<span class="line" style="height:20px">    const void<span class="keyword" style="color:rgb(178,148,187)">*</span>         pRegisterMapPool;       // RegisterMapClassPool</span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px">    /<span class="keyword" style="color:rgb(178,148,187)">*</span> points to start of DEX file data <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    const u1<span class="keyword" style="color:rgb(178,148,187)">*</span>           baseAddr;</span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px">    /<span class="keyword" style="color:rgb(178,148,187)">*</span> track memory overhead for auxillary structures <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    int                 overhead;</span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px">    /<span class="keyword" style="color:rgb(178,148,187)">*</span> additional app-specific data structures associated with the DEX <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    //void<span class="keyword" style="color:rgb(178,148,187)">*</span>               auxData;</span>
<span class="line" style="height:20px">};</span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px">基本的文件结构只需关注:<br>
</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
<span class="line" style="height:20px">3</span>
<span class="line" style="height:20px">4</span>
<span class="line" style="height:20px">5</span>
<span class="line" style="height:20px">6</span>
<span class="line" style="height:20px">7</span>
<span class="line" style="height:20px">8</span>
<span class="line" style="height:20px">9</span>
<span class="line" style="height:20px">10</span>
<span class="line" style="height:20px">11</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px">struct DexFile{</span>
<span class="line" style="height:20px">    DexHeader    Header<span class="comment" style="color:rgb(150,152,150)">;</span></span>
<span class="line" style="height:20px">    DexStringId  StringIds[stringIdsSize]<span class="comment" style="color:rgb(150,152,150)">;</span></span>
<span class="line" style="height:20px">    DexTypeId    TypeIds[typeIdsSize]<span class="comment" style="color:rgb(150,152,150)">;</span></span>
<span class="line" style="height:20px">    DexFieldId   FieldIds[fieldIdsSize]<span class="comment" style="color:rgb(150,152,150)">;</span></span>
<span class="line" style="height:20px">    DexMethodId  MethodIds[methodIdsSize]<span class="comment" style="color:rgb(150,152,150)">;</span></span>
<span class="line" style="height:20px">    DexProtoId   ProtoIds[protoIdsSize]<span class="comment" style="color:rgb(150,152,150)">;</span></span>
<span class="line" style="height:20px">    DexClassDef  ClassDefs[classDefsSize]<span class="comment" style="color:rgb(150,152,150)">;</span></span>
<span class="line" style="height:20px">    DexData      Data[]<span class="comment" style="color:rgb(150,152,150)">;</span></span>
<span class="line" style="height:20px">    DexLink      LinkData<span class="comment" style="color:rgb(150,152,150)">;</span></span>
<span class="line" style="height:20px">}<span class="comment" style="color:rgb(150,152,150)">;</span></span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px"></p>
<h4 id="大体结构图" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1">
大体结构图</h4>
<p style="margin-top:0px; margin-bottom:25px"><a target="_blank" href="http://7xo976.com1.z0.glb.clouddn.com/images/github-io/Android/dex-file-general-structure.png" class="fancybox" rel="group" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent"><img src="http://7xo976.com1.z0.glb.clouddn.com/images/github-io/Android/dex-file-general-structure.png" alt="dex-file-general-structure" style="border:1px solid rgb(221,221,221); display:block!important; margin:0px auto; max-width:100%; height:auto; padding:3px"></a></p>
<hr style="height:3px; margin:40px 0px; border:none; background-color:rgb(221,221,221)">
<h3 id="DexHeader_结构" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:18px">
DexHeader 结构</h3>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
<span class="line" style="height:20px">3</span>
<span class="line" style="height:20px">4</span>
<span class="line" style="height:20px">5</span>
<span class="line" style="height:20px">6</span>
<span class="line" style="height:20px">7</span>
<span class="line" style="height:20px">8</span>
<span class="line" style="height:20px">9</span>
<span class="line" style="height:20px">10</span>
<span class="line" style="height:20px">11</span>
<span class="line" style="height:20px">12</span>
<span class="line" style="height:20px">13</span>
<span class="line" style="height:20px">14</span>
<span class="line" style="height:20px">15</span>
<span class="line" style="height:20px">16</span>
<span class="line" style="height:20px">17</span>
<span class="line" style="height:20px">18</span>
<span class="line" style="height:20px">19</span>
<span class="line" style="height:20px">20</span>
<span class="line" style="height:20px">21</span>
<span class="line" style="height:20px">22</span>
<span class="line" style="height:20px">23</span>
<span class="line" style="height:20px">24</span>
<span class="line" style="height:20px">25</span>
<span class="line" style="height:20px">26</span>
<span class="line" style="height:20px">27</span>
<span class="line" style="height:20px">28</span>
<span class="line" style="height:20px">29</span>
<span class="line" style="height:20px">30</span>
<span class="line" style="height:20px">31</span>
<span class="line" style="height:20px">32</span>
<span class="line" style="height:20px">33</span>
<span class="line" style="height:20px">34</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px">/<span class="keyword" style="color:rgb(178,148,187)">*</span></span>
<span class="line" style="height:20px"> <span class="keyword" style="color:rgb(178,148,187)">*</span> 160-bit SHA-1 digest.</span>
<span class="line" style="height:20px"> <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">enum { kSHA1DigestLen = 20,</span>
<span class="line" style="height:20px">       kSHA1DigestOutputLen = kSHA1DigestLen<span class="keyword" style="color:rgb(178,148,187)">*</span>2 &#43;1 };</span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px">/<span class="keyword" style="color:rgb(178,148,187)">*</span></span>
<span class="line" style="height:20px"> <span class="keyword" style="color:rgb(178,148,187)">*</span> Direct-mapped <span class="string" style="color:rgb(181,189,104)">&quot;header_item&quot;</span> struct.</span>
<span class="line" style="height:20px"> <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">struct DexHeader {</span>
<span class="line" style="height:20px">    u1  magic[8];           /<span class="keyword" style="color:rgb(178,148,187)">*</span> 版本标识 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  checksum;           /<span class="keyword" style="color:rgb(178,148,187)">*</span> adler32 检验 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u1  signature[kSHA1DigestLen]; /<span class="keyword" style="color:rgb(178,148,187)">*</span> SHA-1 哈希&#20540; <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  fileSize;           /<span class="keyword" style="color:rgb(178,148,187)">*</span> 整个文件大小 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  headerSize;         /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexHeader 大小 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  endianTag;          /<span class="keyword" style="color:rgb(178,148,187)">*</span> 字节序标记 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  linkSize;           /<span class="keyword" style="color:rgb(178,148,187)">*</span> 链接段大小 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  linkOff;            /<span class="keyword" style="color:rgb(178,148,187)">*</span> 链接段偏移 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  mapOff;             /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexMapList 的文件偏移 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  stringIdsSize;      /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexStringId 的个数 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  stringIdsOff;       /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexStringId 的文件偏移 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  typeIdsSize;        /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexTypeId 的个数 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  typeIdsOff;         /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexTypeId 的文件偏移 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  protoIdsSize;       /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexProtoId 的个数 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  protoIdsOff;        /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexProtoId 的文件偏移 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  fieldIdsSize;       /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexFieldId 的个数 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  fieldIdsOff;        /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexFieldId 的文件偏移 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  methodIdsSize;      /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexMethodId 的个数 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  methodIdsOff;       /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexMethodId 的文件偏移 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  classDefsSize;      /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexClassDef 的个数 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  classDefsOff;       /<span class="keyword" style="color:rgb(178,148,187)">*</span> DexClassDef 的文件偏移 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  dataSize;           /<span class="keyword" style="color:rgb(178,148,187)">*</span> 数据段的大小 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">    u4  dataOff;            /<span class="keyword" style="color:rgb(178,148,187)">*</span> 数据段的文件偏移 <span class="keyword" style="color:rgb(178,148,187)">*</span>/</span>
<span class="line" style="height:20px">};</span>
</pre>
</td>
</tr>
</tbody>
</table>
<h4 id="其中：" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1">其中：</h4>
<p style="margin-top:0px; margin-bottom:25px"><strong>magic</strong>&nbsp;： dex文件标识，&#20540;必须为常量&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">DEX_FILE_MAGIC</code>；</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px">ubyte[<span class="number" style="color:rgb(222,147,95)">8</span>] DEX_FILE_MAGIC = { <span class="number" style="color:rgb(222,147,95)">0x64</span> <span class="number" style="color:rgb(222,147,95)">0x65</span> <span class="number" style="color:rgb(222,147,95)">0x78</span> <span class="number" style="color:rgb(222,147,95)">0x0a</span> <span class="number" style="color:rgb(222,147,95)">0x30</span> <span class="number" style="color:rgb(222,147,95)">0x33</span> <span class="number" style="color:rgb(222,147,95)">0x35</span> <span class="number" style="color:rgb(222,147,95)">0x00</span> }</span>
<span class="line" style="height:20px">                        = <span class="string" style="color:rgb(181,189,104)">&quot;dex\n035\0&quot;</span></span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px"><strong>checkSum</strong>&nbsp;： 对除 magic 和 checkSum 外的剩余文件计算 adler32 校验&#20540;，目的是检测文件是否损坏；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>signature</strong>：对除 magic、checkSum 和 signature 外的剩余文件计算 SHA-1 校验&#20540;，用来确定文件的唯一性</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>fileSize</strong>：以字节为单位，整个文件（包括头部）的大小；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>headerSize</strong>：头部大小，0x70 字节，已经考虑到兼容性；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>endianTag</strong>：两种字节序取&#20540;；</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px">uint ENDIAN_CONSTANT = <span class="number" style="color:rgb(222,147,95)">0x12345678</span><span class="comment" style="color:rgb(150,152,150)">;</span></span>
<span class="line" style="height:20px">uint REVERSE_ENDIAN_CONSTANT = <span class="number" style="color:rgb(222,147,95)">0x78563412</span><span class="comment" style="color:rgb(150,152,150)">;</span></span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px"><strong>linkSize</strong>：链接段的大小，如果没有使用静态链接，&#20540;为0；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>linkOff</strong>：链接段的文件偏移，指向链接数据段内，如果&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">linkSize</code>&nbsp;为
 0，则为 0；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>mapOff</strong>：map item 的文件偏移，指向数据段内，数据结构为&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">mapList</code>，如果没有
 map，&#20540;为 0；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>stringIdsSize</strong>：字符串 id 的个数；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>stringIdsOff</strong>：字符串 id 清单的文件偏移，指向&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">stringIds</code>&nbsp;的起始地址，如果
 stringIdsSize 为 0，&#20540;为0；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>typeIdsSize</strong>：类型标识符的个数；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>typeIdsOff</strong>：类型标识符清单的文件偏移，指向&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">typeIds</code>&nbsp;的起始地址，如果
 typeIdsSize 为 0，&#20540;为 0 (<em>这就很奇怪了哟</em>)；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>protoIdsSize</strong>：原型标识符的个数；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>protoIdsOff</strong>：原型标识符清单的文件偏移，指向&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">protoIds</code>&nbsp;的起始地址，如果
 protoIdsSize 为 0，&#20540;为 0 (<em>这就很奇怪了哟</em>)；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>fieldIdsSize</strong>：字段标识符的个数；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>fieldIdsOff</strong>：字段标识符清单的文件偏移，指向&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">fieldIds</code>&nbsp;的起始地址，如果
 fieldIdsSize 为 0，&#20540;为 0；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>methodIdsSize</strong>：方法标识符的个数；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>methodIdsOff</strong>：方法标识符清单的文件偏移，指向&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">methodIds</code>&nbsp;的起始地址，如果
 methodIdsSize 为 0，&#20540;为 0；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>classDefsSize</strong>：类的个数；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>classDefsOff</strong>：类清单的文件偏移，指向&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">classDefs</code>&nbsp;的起始地址，如果
 classDefsSize 为 0，&#20540;为 0 (<em>这就很奇怪了哟</em>)；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>dataSize</strong>：数据段的大小，以字节为单位，并且是 sizeof(uint) 的偶数倍；</p>
<p style="margin-top:0px; margin-bottom:25px"><strong>dataOff</strong>：数据段的文件偏移。</p>
<hr style="height:3px; margin:40px 0px; border:none; background-color:rgb(221,221,221)">
<h3 id="手工查找" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:18px">
手工查找</h3>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
<span class="line" style="height:20px">3</span>
<span class="line" style="height:20px">4</span>
<span class="line" style="height:20px">5</span>
<span class="line" style="height:20px">6</span>
<span class="line" style="height:20px">7</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px"><span class="number" style="color:rgb(222,147,95)">00000000</span>  <span class="number" style="color:rgb(222,147,95)">64</span> <span class="number" style="color:rgb(222,147,95)">65</span> <span class="number" style="color:rgb(222,147,95)">78</span> <span class="number" style="color:rgb(222,147,95)">0</span>a <span class="number" style="color:rgb(222,147,95)">30</span> <span class="number" style="color:rgb(222,147,95)">33</span> <span class="number" style="color:rgb(222,147,95)">35</span> <span class="number" style="color:rgb(222,147,95)">00</span>  <span class="number" style="color:rgb(222,147,95)">3</span>b ba fe c3 <span class="number" style="color:rgb(222,147,95)">83</span> <span class="number" style="color:rgb(222,147,95)">7</span>e aa be  |dex<span class="number" style="color:rgb(222,147,95)">.035</span>.;....~..|</span>
<span class="line" style="height:20px"><span class="number" style="color:rgb(222,147,95)">00000010</span>  <span class="number" style="color:rgb(222,147,95)">09</span> <span class="number" style="color:rgb(222,147,95)">97</span> <span class="number" style="color:rgb(222,147,95)">71</span> <span class="number" style="color:rgb(222,147,95)">1</span>e <span class="number" style="color:rgb(222,147,95)">17</span> <span class="number" style="color:rgb(222,147,95)">96</span> <span class="number" style="color:rgb(222,147,95)">9f</span> e9  <span class="number" style="color:rgb(222,147,95)">0</span>c bd <span class="number" style="color:rgb(222,147,95)">01</span> <span class="number" style="color:rgb(222,147,95)">60</span> b4 <span class="number" style="color:rgb(222,147,95)">2</span>a <span class="number" style="color:rgb(222,147,95)">1</span>a c9  |..q........`.*..|</span>
<span class="line" style="height:20px"><span class="number" style="color:rgb(222,147,95)">00000020</span>  c4 <span class="number" style="color:rgb(222,147,95)">10</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">70</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span>  <span class="number" style="color:rgb(222,147,95)">78</span> <span class="number" style="color:rgb(222,147,95)">56</span> <span class="number" style="color:rgb(222,147,95)">34</span> <span class="number" style="color:rgb(222,147,95)">12</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span>  |....p...xV4.....|</span>
<span class="line" style="height:20px"><span class="number" style="color:rgb(222,147,95)">00000030</span>  <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">10</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span>  <span class="number" style="color:rgb(222,147,95)">5</span>c <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">70</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span>  |........\...p...|</span>
<span class="line" style="height:20px"><span class="number" style="color:rgb(222,147,95)">00000040</span>  <span class="number" style="color:rgb(222,147,95)">19</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> e0 <span class="number" style="color:rgb(222,147,95)">01</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span>  <span class="number" style="color:rgb(222,147,95)">12</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">44</span> <span class="number" style="color:rgb(222,147,95)">02</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span>  |............D...|</span>
<span class="line" style="height:20px"><span class="number" style="color:rgb(222,147,95)">00000050</span>  <span class="number" style="color:rgb(222,147,95)">01</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">1</span>c <span class="number" style="color:rgb(222,147,95)">03</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span>  <span class="number" style="color:rgb(222,147,95)">2</span>b <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">24</span> <span class="number" style="color:rgb(222,147,95)">03</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span>  |........&#43;...$...|</span>
<span class="line" style="height:20px"><span class="number" style="color:rgb(222,147,95)">00000060</span>  <span class="number" style="color:rgb(222,147,95)">02</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">7</span>c <span class="number" style="color:rgb(222,147,95)">04</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span>  <span class="number" style="color:rgb(222,147,95)">08</span> <span class="number" style="color:rgb(222,147,95)">0</span>c <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span> bc <span class="number" style="color:rgb(222,147,95)">04</span> <span class="number" style="color:rgb(222,147,95)">00</span> <span class="number" style="color:rgb(222,147,95)">00</span>  |....|...........|</span>
</pre>
</td>
</tr>
</tbody>
</table>
<table style="border-collapse:collapse; border-spacing:0px; margin:20px 0px; width:899px; border:1px solid rgb(221,221,221); font-size:14px">
<thead>
<tr>
<th style="padding:8px 8px 10px; vertical-align:middle; border-bottom-width:3px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
binary</th>
<th style="padding:8px 8px 10px; vertical-align:middle; border-bottom-width:3px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
field</th>
</tr>
</thead>
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
64 65 78 0a 30 33 35 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
magic</td>
</tr>
<tr>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
3b ba fe c3</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
checksum</td>
</tr>
<tr style="background-color:rgb(249,249,249)">
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
83 7e aa be 09 97 71 1e 17 96 9f e9 0c bd 01 60 b4 2a 1a c9</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
signature</td>
</tr>
<tr>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
c4 10 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
fileSize</td>
</tr>
<tr style="background-color:rgb(249,249,249)">
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
70 00 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
headerSize</td>
</tr>
<tr>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
78 56 34 12</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
endianTag</td>
</tr>
<tr style="background-color:rgb(249,249,249)">
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
00 00 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
linkSize</td>
</tr>
<tr>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
00 00 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
linkOff</td>
</tr>
<tr style="background-color:rgb(249,249,249)">
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
00 10 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
mapOff</td>
</tr>
<tr>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
5c 00 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
stringIdsSize</td>
</tr>
<tr style="background-color:rgb(249,249,249)">
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
70 00 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
stringIdsOff</td>
</tr>
<tr>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
19 00 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
typeIdsSize</td>
</tr>
<tr style="background-color:rgb(249,249,249)">
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
e0 01 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
typeIdsOff</td>
</tr>
<tr>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
12 00 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
protoIdsSize</td>
</tr>
<tr style="background-color:rgb(249,249,249)">
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
44 02 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
protoIdsOff</td>
</tr>
<tr>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
01 00 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
fieldIdsSize</td>
</tr>
<tr style="background-color:rgb(249,249,249)">
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
1c 03 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
fieldIdsOff</td>
</tr>
<tr>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
2b 00 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
methodIdsSize</td>
</tr>
<tr style="background-color:rgb(249,249,249)">
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
24 03 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
methodIdsOff</td>
</tr>
<tr>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
02 00 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
classDefsSize</td>
</tr>
<tr style="background-color:rgb(249,249,249)">
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
7c 04 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
classDefsOff</td>
</tr>
<tr>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
08 0c 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
dataSize</td>
</tr>
<tr style="background-color:rgb(249,249,249)">
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
bc 04 00 00</td>
<td style="padding:8px; vertical-align:middle; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); border-right-width:1px; border-right-style:solid; border-right-color:rgb(238,238,238)">
dataOff</td>
</tr>
</tbody>
</table>
<hr style="height:3px; margin:40px 0px; border:none; background-color:rgb(221,221,221)">
<h3 id="写程序解析_DexHeader" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:18px">
写程序解析 DexHeader</h3>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
<span class="line" style="height:20px">3</span>
<span class="line" style="height:20px">4</span>
<span class="line" style="height:20px">5</span>
<span class="line" style="height:20px">6</span>
<span class="line" style="height:20px">7</span>
<span class="line" style="height:20px">8</span>
<span class="line" style="height:20px">9</span>
<span class="line" style="height:20px">10</span>
<span class="line" style="height:20px">11</span>
<span class="line" style="height:20px">12</span>
<span class="line" style="height:20px">13</span>
<span class="line" style="height:20px">14</span>
<span class="line" style="height:20px">15</span>
<span class="line" style="height:20px">16</span>
<span class="line" style="height:20px">17</span>
<span class="line" style="height:20px">18</span>
<span class="line" style="height:20px">19</span>
<span class="line" style="height:20px">20</span>
<span class="line" style="height:20px">21</span>
<span class="line" style="height:20px">22</span>
<span class="line" style="height:20px">23</span>
<span class="line" style="height:20px">24</span>
<span class="line" style="height:20px">25</span>
<span class="line" style="height:20px">26</span>
<span class="line" style="height:20px">27</span>
<span class="line" style="height:20px">28</span>
<span class="line" style="height:20px">29</span>
<span class="line" style="height:20px">30</span>
<span class="line" style="height:20px">31</span>
<span class="line" style="height:20px">32</span>
<span class="line" style="height:20px">33</span>
<span class="line" style="height:20px">34</span>
<span class="line" style="height:20px">35</span>
<span class="line" style="height:20px">36</span>
<span class="line" style="height:20px">37</span>
<span class="line" style="height:20px">38</span>
<span class="line" style="height:20px">39</span>
<span class="line" style="height:20px">40</span>
<span class="line" style="height:20px">41</span>
<span class="line" style="height:20px">42</span>
<span class="line" style="height:20px">43</span>
<span class="line" style="height:20px">44</span>
<span class="line" style="height:20px">45</span>
<span class="line" style="height:20px">46</span>
<span class="line" style="height:20px">47</span>
<span class="line" style="height:20px">48</span>
<span class="line" style="height:20px">49</span>
<span class="line" style="height:20px">50</span>
<span class="line" style="height:20px">51</span>
<span class="line" style="height:20px">52</span>
<span class="line" style="height:20px">53</span>
<span class="line" style="height:20px">54</span>
<span class="line" style="height:20px">55</span>
<span class="line" style="height:20px">56</span>
<span class="line" style="height:20px">57</span>
<span class="line" style="height:20px">58</span>
<span class="line" style="height:20px">59</span>
<span class="line" style="height:20px">60</span>
<span class="line" style="height:20px">61</span>
<span class="line" style="height:20px">62</span>
<span class="line" style="height:20px">63</span>
<span class="line" style="height:20px">64</span>
<span class="line" style="height:20px">65</span>
<span class="line" style="height:20px">66</span>
<span class="line" style="height:20px">67</span>
<span class="line" style="height:20px">68</span>
<span class="line" style="height:20px">69</span>
<span class="line" style="height:20px">70</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px"><span class="atom">import</span> <span class="atom">struct</span></span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px"><span class="atom">class</span> <span class="name">DexStruct</span>(<span class="atom">object</span>):</span>
<span class="line" style="height:20px">    <span class="name">DexHeader</span> = {</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;magic&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;checkSum&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">'signature'</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">'fileSize'</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;headerSize&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;endianTag&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;linkSize&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;linkOff&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;mapOff&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;stringIdsSize&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;stringIdsOff&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;typeIdsSize&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;typeIdsOff&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;protoIdsSize&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;protoIdsOff&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;fieldIdsSize&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;fieldIdsOff&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;methodIdsSize&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;methodIdsOff&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;classDefsSize&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;classDefsOff&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;dataSize&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,</span>
<span class="line" style="height:20px">          <span class="string" style="color:rgb(181,189,104)">&quot;dataOff&quot;</span>: <span class="number" style="color:rgb(222,147,95)">0</span>,   }</span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px"><span class="atom">def</span> <span class="atom">parseHeader</span>(<span class="atom">header_data</span>):</span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px">        <span class="atom">header_list</span> = [<span class="atom">header_data</span>[<span class="atom">i</span>:<span class="atom">i</span>&#43;<span class="number" style="color:rgb(222,147,95)">4</span>] <span class="atom">for</span> <span class="atom">i</span> <span class="atom">in</span> <span class="atom">range</span>(<span class="number" style="color:rgb(222,147,95)">32</span>,<span class="number" style="color:rgb(222,147,95)">112</span>,<span class="number" style="color:rgb(222,147,95)">4</span>)]</span>
<span class="line" style="height:20px">        <span class="atom">header_list</span>.<span class="atom">insert</span>(<span class="number" style="color:rgb(222,147,95)">0</span>,<span class="atom">header_data</span>[<span class="number" style="color:rgb(222,147,95)">12</span>:<span class="number" style="color:rgb(222,147,95)">32</span>])</span>
<span class="line" style="height:20px">        <span class="atom">header_list</span>.<span class="atom">insert</span>(<span class="number" style="color:rgb(222,147,95)">0</span>,<span class="atom">header_data</span>[<span class="number" style="color:rgb(222,147,95)">8</span>:<span class="number" style="color:rgb(222,147,95)">12</span>])</span>
<span class="line" style="height:20px">        <span class="atom">header_list</span>.<span class="atom">insert</span>(<span class="number" style="color:rgb(222,147,95)">0</span>,<span class="atom">header_data</span>[:<span class="number" style="color:rgb(222,147,95)">8</span>])</span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'magic'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'8s'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">0</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="atom">if</span> <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'magic'</span>] != <span class="string" style="color:rgb(181,189,104)">&quot;dex\n035\0&quot;</span>:</span>
<span class="line" style="height:20px">            <span class="atom">print</span> <span class="string" style="color:rgb(181,189,104)">'invalid dex file.'</span></span>
<span class="line" style="height:20px">            <span class="atom">exit</span>(-<span class="number" style="color:rgb(222,147,95)">1</span>)</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'checkSum'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">1</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'signature'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'20s'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">2</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'fileSize'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">3</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'headerSize'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">4</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'endianTag'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">5</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'linkSize'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">6</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'linkOff'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">7</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'mapOff'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">8</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'stringIdsSize'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">9</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'stringIdsOff'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">10</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'typeIdsSize'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">11</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'typeIdsOff'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">12</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'protoIdsSize'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">13</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'protoIdsOff'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">14</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'fieldIdsSize'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">15</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'fieldIdsOff'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">16</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'methodIdsSize'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">17</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'methodIdsOff'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">18</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'classDefsSize'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">19</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'classDefsOff'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">20</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'dataSize'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">21</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px">        <span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="string" style="color:rgb(181,189,104)">'dataOff'</span>] = <span class="atom">struct</span>.<span class="atom">unpack</span>(<span class="string" style="color:rgb(181,189,104)">'I'</span>,<span class="atom">header_list</span>[<span class="number" style="color:rgb(222,147,95)">22</span>])[<span class="number" style="color:rgb(222,147,95)">0</span>]</span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px"><span class="atom">if</span> <span class="name">__name__</span> == <span class="string" style="color:rgb(181,189,104)">'__main__'</span>:</span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px">    <span class="atom">with</span> <span class="atom">open</span>(<span class="string" style="color:rgb(181,189,104)">&quot;classes.dex&quot;</span>, <span class="string" style="color:rgb(181,189,104)">'rb'</span>) <span class="atom">as</span> <span class="atom">f</span>:</span>
<span class="line" style="height:20px">        <span class="atom">parseHeader</span>(<span class="atom">f</span>.<span class="atom">read</span>(<span class="number" style="color:rgb(222,147,95)">0x70</span>))</span>
<span class="line" style="height:20px">        <span class="atom">for</span> <span class="atom">x</span> <span class="atom">in</span> <span class="name">DexStruct</span>.<span class="name">DexHeader</span>:</span>
<span class="line" style="height:20px">            <span class="atom">print</span> <span class="atom">x</span>, <span class="atom">hex</span>(<span class="name">DexStruct</span>.<span class="name">DexHeader</span>[<span class="atom">x</span>])</span>
</pre>
</td>
</tr>
</tbody>
</table>
<hr style="height:3px; margin:40px 0px; border:none; background-color:rgb(221,221,221)">
<h3 id="Reference" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:18px">
Reference</h3>
<p style="margin-top:0px; margin-bottom:25px"><a target="_blank" href="http://www.ituring.com.cn/book/1131" rel="external" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent">《Android
 软件安全与逆向分析》</a></p>
<p style="margin-top:0px; margin-bottom:25px"><a target="_blank" href="http://www.blogfshare.com/dex-format.html" rel="external" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent">Android安全–Dex文件&#26684;式详解</a></p>
</div>
<div class="post-tags" style="margin-top:40px; text-align:center"><a target="_blank" href="http://kiya-z.github.io/tags/Android-%E5%AE%89%E5%85%A8/" rel="tag" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; display:inline-block; margin-right:10px; font-size:13px; background-color:transparent">#Android
 安全</a>&nbsp;<a target="_blank" href="http://kiya-z.github.io/tags/dex/" rel="tag" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; display:inline-block; margin-right:10px; font-size:13px; background-color:transparent">#dex</a></div>
<br>
<p></p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-如何运行_.smali_程序" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/17/如何运行_.smali_程序/">如何运行 .smali 程序</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<h1 class="post-title" style="margin:0px; padding:0px; line-height:1; text-align:center; word-break:break-word">
<span style="font-size:18px">原文:&nbsp;<a target="_blank" href="http://kiya-z.github.io/2015/11/16/how-to-run-file-ended-with-smali/">http://kiya-z.github.io/2015/11/16/how-to-run-file-ended-with-smali/</a></span></h1>
<h1 class="post-title" style="margin:0px; padding:0px; line-height:1; text-align:center; word-break:break-word">
<span style="font-size:18px"><br>
</span></h1>
<h1 class="post-title" style="font-size:26px; margin:0px; padding:0px; line-height:1; text-align:center; word-break:break-word">
<br>
</h1>
<h1 class="post-title" style="font-size:26px; margin:0px; padding:0px; line-height:1; text-align:center; word-break:break-word">
<br>
如何运行 .smali 程序</h1>
<div class="post-meta" style="font-size:12px; margin:3px 0px 60px; color:rgb(153,153,153); text-align:center">
<span class="post-time">发表于&nbsp;2015-11-16&nbsp;</span><span class="post-category">&nbsp; | &nbsp; 分类于&nbsp;<span><a target="_blank" href="http://kiya-z.github.io/categories/Android/" rel="index" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent"><span>Android</span>&nbsp;</a></span></span><span class="post-comments-count">&nbsp;
 | &nbsp;&nbsp;<a target="_blank" href="http://kiya-z.github.io/2015/11/16/how-to-run-file-ended-with-smali/#comments" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent"><span class="post-comments-count ds-thread-count">暂无评论</span>&nbsp;</a></span><span id="busuanzi_container_page_pv" style="display:inline">&nbsp;
 | &nbsp;&nbsp;<span id="busuanzi_value_page_pv">3</span>&nbsp; Hits</span></div>
<div class="post-body" style="text-align:justify; color:rgb(85,85,85); font-family:Lato,'PingFang SC','Microsoft YaHei',sans-serif; font-size:16px; line-height:32px">
<span></span>
<h2 id="准备_smali_程序" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:20px">
准备 smali 程序</h2>
<a target="_blank" id="more" style="border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent"></a>
<p style="margin-top:0px; margin-bottom:25px">从 《Android 软件安全与逆向》书中抠出一段，起名为&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">FirstSmali.smali</code>&nbsp;：<br>
</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
<span class="line" style="height:20px">3</span>
<span class="line" style="height:20px">4</span>
<span class="line" style="height:20px">5</span>
<span class="line" style="height:20px">6</span>
<span class="line" style="height:20px">7</span>
<span class="line" style="height:20px">8</span>
<span class="line" style="height:20px">9</span>
<span class="line" style="height:20px">10</span>
<span class="line" style="height:20px">11</span>
<span class="line" style="height:20px">12</span>
<span class="line" style="height:20px">13</span>
<span class="line" style="height:20px">14</span>
<span class="line" style="height:20px">15</span>
<span class="line" style="height:20px">16</span>
<span class="line" style="height:20px">17</span>
<span class="line" style="height:20px">18</span>
<span class="line" style="height:20px">19</span>
<span class="line" style="height:20px">20</span>
<span class="line" style="height:20px">21</span>
<span class="line" style="height:20px">22</span>
<span class="line" style="height:20px">23</span>
<span class="line" style="height:20px">24</span>
<span class="line" style="height:20px">25</span>
<span class="line" style="height:20px">26</span>
<span class="line" style="height:20px">27</span>
<span class="line" style="height:20px">28</span>
<span class="line" style="height:20px">29</span>
<span class="line" style="height:20px">30</span>
<span class="line" style="height:20px">31</span>
<span class="line" style="height:20px">32</span>
<span class="line" style="height:20px">33</span>
<span class="line" style="height:20px">34</span>
<span class="line" style="height:20px">35</span>
<span class="line" style="height:20px">36</span>
<span class="line" style="height:20px">37</span>
<span class="line" style="height:20px">38</span>
<span class="line" style="height:20px">39</span>
<span class="line" style="height:20px">40</span>
<span class="line" style="height:20px">41</span>
<span class="line" style="height:20px">42</span>
<span class="line" style="height:20px">43</span>
<span class="line" style="height:20px">44</span>
<span class="line" style="height:20px">45</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px"><span class="keyword" style="color:rgb(178,148,187)">.class</span><span class="keyword" style="color:rgb(178,148,187)"> public</span> <span class="class">LFirstSmali;</span>  <span class="comment" style="color:rgb(150,152,150)"># 定义类名</span></span>
<span class="line" style="height:20px"><span class="keyword" style="color:rgb(178,148,187)">.super</span> <span class="class">Ljava/lang/Object;</span>   <span class="comment" style="color:rgb(150,152,150)"># 定义父类</span></span>
<span class="line" style="height:20px"><span class="keyword" style="color:rgb(178,148,187)">.method</span><span class="keyword" style="color:rgb(178,148,187)"> public</span><span class="keyword" style="color:rgb(178,148,187)"> static</span><span class="function" style="color:rgb(129,162,190)"> main(</span><span class="keyword" style="color:rgb(178,148,187)">[</span><span class="class">Ljava/lang/String;</span><span class="function" style="color:rgb(129,162,190)">)</span>V     <span class="comment" style="color:rgb(150,152,150)"># 声明静态方法</span></span>
<span class="line" style="height:20px"><span class="keyword" style="color:rgb(178,148,187)">    .registers</span> 4     <span class="comment" style="color:rgb(150,152,150)"># 寄存器</span></span>
<span class="line" style="height:20px">    <span class="comment" style="color:rgb(150,152,150)">#.parameter      # 参数</span></span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px"><span class="keyword" style="color:rgb(178,148,187)">    .prologue</span>      <span class="comment" style="color:rgb(150,152,150)"># 代码起始</span></span>
<span class="line" style="height:20px">   <span class="instruction"> nop</span>
<span class="line" style="height:20px"></span>   <span class="instruction"> nop</span>
<span class="line" style="height:20px"></span>   <span class="instruction"> nop</span>
<span class="line" style="height:20px"></span>   <span class="instruction"> nop</span>
<span class="line" style="height:20px"></span>    <span class="comment" style="color:rgb(150,152,150)">#数据定义</span></span>
<span class="line" style="height:20px">   <span class="instruction"> const/16 </span><span class="variable" style="color:rgb(204,102,102)">v0</span>,0x8</span>
<span class="line" style="height:20px">   <span class="instruction"> const/4 </span><span class="variable" style="color:rgb(204,102,102)">v1</span>,0x5</span>
<span class="line" style="height:20px">   <span class="instruction"> const/4 </span><span class="variable" style="color:rgb(204,102,102)">v2</span>,0x3</span>
<span class="line" style="height:20px">    <span class="comment" style="color:rgb(150,152,150)">#数据操作</span></span>
<span class="line" style="height:20px">   <span class="instruction"> move </span><span class="variable" style="color:rgb(204,102,102)">v1</span>,<span class="variable" style="color:rgb(204,102,102)">v2</span></span>
<span class="line" style="height:20px">    <span class="comment" style="color:rgb(150,152,150)">#数组操作</span></span>
<span class="line" style="height:20px">   <span class="instruction"> new-array </span><span class="variable" style="color:rgb(204,102,102)">v0</span>,<span class="variable" style="color:rgb(204,102,102)">v0</span>,<span class="keyword" style="color:rgb(178,148,187)">[</span>I</span>
<span class="line" style="height:20px">   <span class="instruction"> array-length </span><span class="variable" style="color:rgb(204,102,102)">v1</span>,<span class="variable" style="color:rgb(204,102,102)">v0</span></span>
<span class="line" style="height:20px">    <span class="comment" style="color:rgb(150,152,150)">#实例操作</span></span>
<span class="line" style="height:20px">   <span class="instruction"> new-instance </span><span class="variable" style="color:rgb(204,102,102)">v1</span>,<span class="class">Ljava/lang/StringBuilder;</span></span>
<span class="line" style="height:20px">    <span class="comment" style="color:rgb(150,152,150)">#方法调用</span></span>
<span class="line" style="height:20px">   <span class="instruction"> invoke-direct </span>{<span class="variable" style="color:rgb(204,102,102)">v1</span>},<span class="class">Ljava/lang/StringBuilder;</span><span class="function" style="color:rgb(129,162,190)">-&gt;&lt;init&gt;(</span><span class="function" style="color:rgb(129,162,190)">)</span>V</span>
<span class="line" style="height:20px">    <span class="comment" style="color:rgb(150,152,150)">#跳转</span></span>
<span class="line" style="height:20px">   <span class="instruction"> if-nez </span><span class="variable" style="color:rgb(204,102,102)">v0</span>,<span class="keyword" style="color:rgb(178,148,187)"> :cond_0</span></span>
<span class="line" style="height:20px">   <span class="instruction"> goto </span>:goto_0</span>
<span class="line" style="height:20px">   <span class="keyword" style="color:rgb(178,148,187)"> :cond_0</span></span>
<span class="line" style="height:20px">    <span class="comment" style="color:rgb(150,152,150)">#数据转换</span></span>
<span class="line" style="height:20px">   <span class="instruction"> int-to-float </span><span class="variable" style="color:rgb(204,102,102)">v2</span>,<span class="variable" style="color:rgb(204,102,102)">v2</span></span>
<span class="line" style="height:20px">    <span class="comment" style="color:rgb(150,152,150)">#运算</span></span>
<span class="line" style="height:20px">   <span class="instruction"> add-float </span><span class="variable" style="color:rgb(204,102,102)">v2</span>,<span class="variable" style="color:rgb(204,102,102)">v2</span>,<span class="variable" style="color:rgb(204,102,102)">v2</span></span>
<span class="line" style="height:20px">    <span class="comment" style="color:rgb(150,152,150)">#比较</span></span>
<span class="line" style="height:20px">   <span class="instruction"> cmpl-float </span><span class="variable" style="color:rgb(204,102,102)">v0</span>,<span class="variable" style="color:rgb(204,102,102)">v2</span>,<span class="variable" style="color:rgb(204,102,102)">v2</span></span>
<span class="line" style="height:20px">    <span class="comment" style="color:rgb(150,152,150)">#字段操作</span></span>
<span class="line" style="height:20px">   <span class="instruction"> sget-object </span><span class="variable" style="color:rgb(204,102,102)">v0</span>,<span class="class">Ljava/lang/System;</span>-&gt;out:<span class="class">Ljava/io/PrintStream;</span></span>
<span class="line" style="height:20px">   <span class="instruction"> const-string </span><span class="variable" style="color:rgb(204,102,102)">v1</span>,<span class="string" style="color:rgb(181,189,104)">&quot;Hello Smali&quot;</span></span>
<span class="line" style="height:20px">    <span class="comment" style="color:rgb(150,152,150)">#调用</span></span>
<span class="line" style="height:20px">   <span class="instruction"> invoke-virtual </span>{<span class="variable" style="color:rgb(204,102,102)">v0</span>,<span class="variable" style="color:rgb(204,102,102)">v1</span>}, <span class="class">Ljava/io/PrintStream;</span><span class="function" style="color:rgb(129,162,190)">-&gt;println(</span><span class="class">Ljava/lang/String;</span><span class="function" style="color:rgb(129,162,190)">)</span>V</span>
<span class="line" style="height:20px">    <span class="comment" style="color:rgb(150,152,150)">#返回</span></span>
<span class="line" style="height:20px">   <span class="keyword" style="color:rgb(178,148,187)"> :goto_0</span></span>
<span class="line" style="height:20px">   <span class="instruction"> return-void</span>
<span class="line" style="height:20px"></span>   <span class="instruction"> return-void </span>    <span class="comment" style="color:rgb(150,152,150)"># 返回空</span><span class="keyword" style="color:rgb(178,148,187)"></span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px">.end method</span></span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px"></p>
<hr style="height:3px; margin:40px 0px; border:none; background-color:rgb(221,221,221)">
<h2 id="编译_smali_程序" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:20px">
编译 smali 程序</h2>
<p style="margin-top:0px; margin-bottom:25px">将&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">.smali</code>&nbsp;文件编译为&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">.dex</code>&nbsp;文件
 :<br>
<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">java -jar smali.jar -o FirstSmali.dex FirstSmali.smali</code></p>
<hr style="height:3px; margin:40px 0px; border:none; background-color:rgb(221,221,221)">
<h2 id="执行_smali_程序" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:20px">
执行 smali 程序</h2>
<p style="margin-top:0px; margin-bottom:25px">打开&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">adb</code>&nbsp;环境，连上手机，在命令行下<br>
执行&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">adb devices</code>&nbsp;查看手机是否连接成功；<br>
执行&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">adb push FirstSmali.dex /sdcard/</code>&nbsp;将 dex 文件推到手机上；<br>
执行如下命令就 OK 了。<br>
</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px">adb shell dalvikvm -cp /sdcard/FirstSmali<span class="class">.dex</span> FirstSmali</span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px"></p>
<h3 id="备注" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:18px">
备注</h3>
<p style="margin-top:0px; margin-bottom:25px"><code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">-cp</code>&nbsp;是&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">classpath</code>&nbsp;的意思，<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">dalvikvm</code>&nbsp;命令第一个参数指定类路径，第二个指定类名。</p>
<p style="margin-top:0px; margin-bottom:25px">另外，如果想要 push 到如&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">data/local</code>&nbsp;之类的目录下是没有权限的，可以先
 push 到 sdcard，进入&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">adb shell</code>&nbsp;执行&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">su</code>&nbsp;获得
 root 权限之后，就可以复制到&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">data</code>&nbsp;目录了。</p>
<p style="margin-top:0px; margin-bottom:25px">本文程序只有一个 dex 文件，多个的话需要打包为&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">zip</code>&nbsp;，将此 zip
 文件作为&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">dalvikvm</code>&nbsp;的第一个参数便可。</p>
</div>
<div class="post-tags" style="margin-top:40px; text-align:center"><a target="_blank" href="http://kiya-z.github.io/tags/Android-%E5%AE%89%E5%85%A8/" rel="tag" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; display:inline-block; margin-right:10px; font-size:13px; background-color:transparent">#Android
 安全</a>&nbsp;<a target="_blank" href="http://kiya-z.github.io/tags/smali/" rel="tag" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; display:inline-block; margin-right:10px; font-size:13px; background-color:transparent">#smali</a>&nbsp;<a target="_blank" href="http://kiya-z.github.io/tags/%E5%8F%8D%E7%BC%96%E8%AF%91/" rel="tag" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; display:inline-block; margin-right:10px; font-size:13px; background-color:transparent">#反编译</a></div>
<div class="post-nav" style="overflow:hidden; margin-top:60px; padding:10px; white-space:nowrap; border-top-width:1px; border-top-style:solid; border-top-color:rgb(238,238,238)">
<h1 class="post-title" style="color:rgb(85,85,85); font-family:Lato,'PingFang SC','Microsoft YaHei',sans-serif; margin:0px; padding:0px; line-height:1; text-align:center; word-break:break-word">
<span style="font-size:18px">原文:&nbsp;<a target="_blank" href="http://kiya-z.github.io/2015/11/16/how-to-run-file-ended-with-smali/">http://kiya-z.github.io/2015/11/16/how-to-run-file-ended-with-smali/</a></span></h1>
<div><br>
</div>
<div><br>
</div>
<div><br>
</div>
<div class="post-nav-next post-nav-item" style="display:inline-block; width:440px; white-space:normal">
<a target="_blank" href="http://kiya-z.github.io/2015/11/12/check-signature-for-avoiding-fake-app-java-level-check/" rel="next" title="校验数字签名防止 apk 被二次打包 - Java层校验（大众点评为例）" style="color:rgb(85,85,85); text-decoration:none; border-bottom-style:none; word-wrap:break-word; position:relative; display:inline-block; line-height:25px; font-size:14px; background-color:transparent"><span class="fa fa-chevron-left" style=""></span></a></div>
</div>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-校验数字签名防止_apk_被二次打包_-_Java层校验（大众点评为例）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/17/校验数字签名防止_apk_被二次打包_-_Java层校验（大众点评为例）/">校验数字签名防止 apk 被二次打包 - Java层校验（大众点评为例）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<div class="post-body" style="text-align:justify; color:rgb(85,85,85); font-family:Lato,'PingFang SC','Microsoft YaHei',sans-serif; font-size:16px; line-height:32px">
<span></span>
<blockquote style="margin:0px; padding:0px 15px; color:rgb(102,102,102); border-left-width:4px; border-left-style:solid; border-left-color:rgb(221,221,221)">
<p style="margin-top:0px; margin-bottom:25px">原文链接: &nbsp;http://kiya-z.github.io/2015/11/12/check-signature-for-avoiding-fake-app-java-level-check/<br>
测试环境<br>
Ubuntu 14.04<br>
Lenovo Android 5.1<br>
Lenovo Android 4.2.2<br>
Android Studio</p>
</blockquote>
<a target="_blank" id="more" style="border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent"></a>
<h2 id="普及签名包名知识" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:20px">
普及签名包名知识</h2>
<p style="margin-top:0px; margin-bottom:25px">包名 (Package Name) 相当于「应用的身份证」，是系统用来<strong>区分不同应用</strong>的字段，重复的包名会被认为是同一款应用。<br>
签名文件相当于「开发者的身份证」，目的是为了<strong>检验应用是否被人更改过</strong>（应用必须签名过才能正常安装）。</p>
<p style="margin-top:0px; margin-bottom:25px">包名相同签名相同时，会发生 替换安装 / 应用升级；<br>
包名相同签名不同时，安装失败；<br>
包名不同签名相同时，相当于同一开发者的两个应用，互相不冲突。</p>
<blockquote style="margin:0px; padding:0px 15px; color:rgb(102,102,102); border-left-width:4px; border-left-style:solid; border-left-color:rgb(221,221,221)">
<p style="margin-top:0px; margin-bottom:25px">签名的注意事项<br>
所有的Android应用都必须有数字签名，没有不存在数字签名的应用，包括模拟器上运行的。Android系统不会安装没有数字证书的应用。<br>
签名的数字证书不需要权威机构来认证，是开发者自己产生的数字证书，即所谓的自签名。<br>
正式发布一个Android应用时，必须使用一个合适的私钥生成的数字证书来给程序签名，不能使用ADT插件或者ANT工具生成的调试证书来发布。<br>
Android将数字证书用来标识应用程序的作者和在应用程序之间建立信任关系，而不是用来决定最终用户可以安装哪些应用程序。</p>
</blockquote>
<hr style="height:3px; margin:40px 0px; border:none; background-color:rgb(221,221,221)">
<h2 id="为大众点评换签名" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:20px">
为大众点评换签名</h2>
<p style="margin-top:0px; margin-bottom:25px">按照常规步骤使用&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">apktool</code>&nbsp;&#43;&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">signapk</code>&nbsp;反编译、编译、签名并安装到手机上（没有修改任何代码），打开
 app 选择城市后界面如下图并很快退出：</p>
<p style="margin-top:0px; margin-bottom:25px"><a target="_blank" href="http://7xo976.com1.z0.glb.clouddn.com/images/github-io/Android/dianping-crash.jpeg-style1" class="fancybox" rel="group" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent"><img src="http://7xo976.com1.z0.glb.clouddn.com/images/github-io/Android/dianping-crash.jpeg-style1" alt="dianping-crash" style="border:1px solid rgb(221,221,221); display:block!important; margin:0px auto; max-width:100%; height:auto; padding:3px"></a></p>
<p style="margin-top:0px; margin-bottom:25px">说明点评对签名进行了校验 。</p>
<hr style="height:3px; margin:40px 0px; border:none; background-color:rgb(221,221,221)">
<h2 id="分析校验方法" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:20px">
分析校验方法</h2>
<h3 id="怎么退出的？" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:18px">
怎么退出的？</h3>
<p style="margin-top:0px; margin-bottom:25px">打开 apktool 反编译得到的文件夹下的&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">AndroidManifest.xml</code>&nbsp;，得到程序包名：<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">com.dianping.v1</code>&nbsp;。<br>
清除大众点评的数据，打开 as，连上手机，log 的过滤条件设为 com.dianping ，在选择城市之前清一下 log ，在 log 里搜索 “die”，比较明显的是有四处：</p>
<p style="margin-top:0px; margin-bottom:25px">进程死亡：<br>
</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
<span class="line" style="height:20px">3</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px">Process com<span class="class">.dianping</span><span class="class">.v1</span> (pid <span class="number" style="color:rgb(222,147,95)">19182</span>) has died</span>
<span class="line" style="height:20px">Process com<span class="class">.dianping</span><span class="class">.v1</span> (pid <span class="number" style="color:rgb(222,147,95)">19586</span>) has died</span>
<span class="line" style="height:20px">Process com<span class="class">.dianping</span><span class="class">.v1</span> (pid <span class="number" style="color:rgb(222,147,95)">19650</span>) has died</span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px"></p>
<p style="margin-top:0px; margin-bottom:25px">app 死亡：<br>
</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px">Force removing ActivityRecord{<span class="number" style="color:rgb(222,147,95)">266</span>e5efd u0 com.dianping.v1/.NovaMainActivity t14010}: app died, no saved <span class="keyword" style="color:rgb(178,148,187)">state</span></span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px"></p>
<p style="margin-top:0px; margin-bottom:25px">其中前两个进程死亡之后都有开启进程的操作，说明第一次校验失败后重试了两次：<br>
</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px"><span class="string" style="color:rgb(181,189,104)">startProcess:</span> name=com.dianping.v1 app=<span class="literal" style="color:rgb(222,147,95)">null</span> knownToBeDead=<span class="literal" style="color:rgb(222,147,95)">true</span> thread=<span class="literal" style="color:rgb(222,147,95)">null</span> pid=-<span class="number" style="color:rgb(222,147,95)">1</span></span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px"></p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px"><span class="string" style="color:rgb(181,189,104)">startProcess:</span> name=com.dianping.v1 app=<span class="literal" style="color:rgb(222,147,95)">null</span> knownToBeDead=<span class="literal" style="color:rgb(222,147,95)">true</span> thread=<span class="literal" style="color:rgb(222,147,95)">null</span> pid=-<span class="number" style="color:rgb(222,147,95)">1</span></span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px">最后一个直接杀死了 app，没有再继续创建进程。</p>
<p style="margin-top:0px; margin-bottom:25px">在进程结束之前，发生错误的调用记录：<br>
</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
<span class="line" style="height:20px">3</span>
<span class="line" style="height:20px">4</span>
<span class="line" style="height:20px">5</span>
<span class="line" style="height:20px">6</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px"><span class="number" style="color:rgb(222,147,95)">9586</span>-<span class="number" style="color:rgb(222,147,95)">19586</span>/? D/AccessibilityManager:     at com.dianping.base.app.NovaActivity.setContentView(NovaActivity.java:<span class="number" style="color:rgb(222,147,95)">722</span>)</span>
<span class="line" style="height:20px"> <span class="number" style="color:rgb(222,147,95)">9586</span>-<span class="number" style="color:rgb(222,147,95)">19586</span>/? D/AccessibilityManager:     at com.dianping.main.guide.MainActivity.setOnContentView(MainActivity.java:<span class="number" style="color:rgb(222,147,95)">339</span>)</span>
<span class="line" style="height:20px"> <span class="number" style="color:rgb(222,147,95)">9586</span>-<span class="number" style="color:rgb(222,147,95)">19586</span>/? D/AccessibilityManager:     at com.dianping.base.basic.FragmentTabActivity.onCreate(FragmentTabActivity.java:<span class="number" style="color:rgb(222,147,95)">51</span>)</span>
<span class="line" style="height:20px"> <span class="number" style="color:rgb(222,147,95)">9586</span>-<span class="number" style="color:rgb(222,147,95)">19586</span>/? D/AccessibilityManager:     at com.dianping.base.widget.NovaFragmentTabActivity.onCreate(NovaFragmentTabActivity.java:<span class="number" style="color:rgb(222,147,95)">26</span>)</span>
<span class="line" style="height:20px"> <span class="number" style="color:rgb(222,147,95)">9586</span>-<span class="number" style="color:rgb(222,147,95)">19586</span>/? D/AccessibilityManager:     at com.dianping.main.guide.MainActivity.onCreate(MainActivity.java:<span class="number" style="color:rgb(222,147,95)">169</span>)</span>
<span class="line" style="height:20px"> <span class="number" style="color:rgb(222,147,95)">9586</span>-<span class="number" style="color:rgb(222,147,95)">19586</span>/? D/AccessibilityManager:     at com.dianping.v1.NovaMainActivity.onCreate(NovaMainActivity.java:<span class="number" style="color:rgb(222,147,95)">15</span>)</span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px"></p>
<h3 id="代码探索" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:18px">
代码探索</h3>
<p style="margin-top:0px; margin-bottom:25px">解压 apk 文件，发现有 3 个 dex 文件，先拿第一个下手，JD-GUI 打开发现代码没有混淆！</p>
<p style="margin-top:0px; margin-bottom:25px">调用记录中的文件从上往下过一遍，发现在&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">com.dianping.main.guide.MainActivity.onCreate()</code>&nbsp;方法中有校验签名的函数：<br>
</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
<span class="line" style="height:20px">3</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px"><span class="keyword" style="color:rgb(178,148,187)">if</span> <span class="comment" style="color:rgb(150,152,150)">(!checkSignature()</span>) {    </span>
<span class="line" style="height:20px">      Process.killProcess<span class="comment" style="color:rgb(150,152,150)">(Process.myPid()</span>);</span>
<span class="line" style="height:20px">    }</span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px"></p>
<p style="margin-top:0px; margin-bottom:25px"><code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">checkSignature</code>&nbsp;函数：<br>
</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
<span class="line" style="height:20px">3</span>
<span class="line" style="height:20px">4</span>
<span class="line" style="height:20px">5</span>
<span class="line" style="height:20px">6</span>
<span class="line" style="height:20px">7</span>
<span class="line" style="height:20px">8</span>
<span class="line" style="height:20px">9</span>
<span class="line" style="height:20px">10</span>
<span class="line" style="height:20px">11</span>
<span class="line" style="height:20px">12</span>
<span class="line" style="height:20px">13</span>
<span class="line" style="height:20px">14</span>
<span class="line" style="height:20px">15</span>
<span class="line" style="height:20px">16</span>
<span class="line" style="height:20px">17</span>
<span class="line" style="height:20px">18</span>
<span class="line" style="height:20px">19</span>
<span class="line" style="height:20px">20</span>
<span class="line" style="height:20px">21</span>
<span class="line" style="height:20px">22</span>
<span class="line" style="height:20px">23</span>
<span class="line" style="height:20px">24</span>
<span class="line" style="height:20px">25</span>
<span class="line" style="height:20px">26</span>
<span class="line" style="height:20px">27</span>
<span class="line" style="height:20px">28</span>
<span class="line" style="height:20px">29</span>
<span class="line" style="height:20px">30</span>
<span class="line" style="height:20px">31</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px"><span class="function" style="color:rgb(129,162,190)"><span class="keyword" style="color:rgb(178,148,187)">private</span> boolean <span class="title" style="color:rgb(138,190,183)">checkSignature</span><span class="params" style="color:rgb(222,147,95)">()</span></span>
<span class="line" style="height:20px"></span>{</span>
<span class="line" style="height:20px"> <span class="keyword" style="color:rgb(178,148,187)">try</span></span>
<span class="line" style="height:20px"> {</span>
<span class="line" style="height:20px">   Signature[] arrayOfSignature = getPackageManager().getPackageInfo(getPackageName(), <span class="number" style="color:rgb(222,147,95)">64</span>).signatures;     <span class="comment" style="color:rgb(150,152,150)">//获得签名数组</span></span>
<span class="line" style="height:20px">   <span class="keyword" style="color:rgb(178,148,187)">if</span> (arrayOfSignature != null)</span>
<span class="line" style="height:20px">   {</span>
<span class="line" style="height:20px">     <span class="keyword" style="color:rgb(178,148,187)">if</span> (arrayOfSignature.length == <span class="number" style="color:rgb(222,147,95)">0</span>) {</span>
<span class="line" style="height:20px">       <span class="keyword" style="color:rgb(178,148,187)">return</span> <span class="literal" style="color:rgb(222,147,95)">false</span>;</span>
<span class="line" style="height:20px">     }</span>
<span class="line" style="height:20px">     <span class="keyword" style="color:rgb(178,148,187)">int</span> j = arrayOfSignature.length;</span>
<span class="line" style="height:20px">     <span class="keyword" style="color:rgb(178,148,187)">int</span> i = <span class="number" style="color:rgb(222,147,95)">0</span>;</span>
<span class="line" style="height:20px">     <span class="keyword" style="color:rgb(178,148,187)">while</span> (i &lt; j)   <span class="comment" style="color:rgb(150,152,150)">//如果数组中的某个元素&#20540;与 'ac6fc3fe' 相等，返回校验成功；如果直到结束也没有相等的元素，返回失败</span></span>
<span class="line" style="height:20px">     {               <span class="comment" style="color:rgb(150,152,150)">//只比较一个特定的元素，可能也是为了不把整个签名泄露出来，同时也做到了一定程度的校验</span></span>
<span class="line" style="height:20px">       String str = Integer.toHexString(arrayOfSignature[i].toCharsString().hashCode());</span>
<span class="line" style="height:20px">       <span class="keyword" style="color:rgb(178,148,187)">if</span> (!<span class="string" style="color:rgb(181,189,104)">&quot;ac6fc3fe&quot;</span>.equalsIgnoreCase(str))   </span>
<span class="line" style="height:20px">       {</span>
<span class="line" style="height:20px">         boolean <span class="keyword" style="color:rgb(178,148,187)">bool</span> = <span class="string" style="color:rgb(181,189,104)">&quot;600cf559&quot;</span>.equalsIgnoreCase(str);       <span class="comment" style="color:rgb(150,152,150)">//这个比较好像没用</span></span>
<span class="line" style="height:20px">         <span class="keyword" style="color:rgb(178,148,187)">if</span> (!<span class="keyword" style="color:rgb(178,148,187)">bool</span>) {}</span>
<span class="line" style="height:20px">       }</span>
<span class="line" style="height:20px">       <span class="keyword" style="color:rgb(178,148,187)">else</span></span>
<span class="line" style="height:20px">       {</span>
<span class="line" style="height:20px">         <span class="keyword" style="color:rgb(178,148,187)">return</span> <span class="literal" style="color:rgb(222,147,95)">true</span>;</span>
<span class="line" style="height:20px">       }</span>
<span class="line" style="height:20px">       i &#43;= <span class="number" style="color:rgb(222,147,95)">1</span>;</span>
<span class="line" style="height:20px">     }</span>
<span class="line" style="height:20px">   }</span>
<span class="line" style="height:20px">   <span class="keyword" style="color:rgb(178,148,187)">return</span> <span class="literal" style="color:rgb(222,147,95)">false</span>;</span>
<span class="line" style="height:20px"> }</span>
<span class="line" style="height:20px"> <span class="keyword" style="color:rgb(178,148,187)">catch</span> (Exception localException) {}</span>
<span class="line" style="height:20px">}</span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px"></p>
<p style="margin-top:0px; margin-bottom:25px">相关 API：</p>
<p style="margin-top:0px; margin-bottom:25px"><code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">public Signature[] signatures</code><br>
Array of all signatures read from the package file. This is only filled in if the flag GET_SIGNATURES was set.</p>
<p style="margin-top:0px; margin-bottom:25px"><code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">public static final int GET_SIGNATURES</code><br>
PackageInfo flag: return information about the signatures included in the package.<br>
Constant Value: 64 (0x00000040)</p>
<p style="margin-top:0px; margin-bottom:25px"><code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">public boolean equalsIgnoreCase (String string)</code><br>
Compares the given string to this string ignoring case.<br>
The strings are compared one char at a time.</p>
<h3 id="流程修改" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:18px">
流程修改</h3>
<p style="margin-top:0px; margin-bottom:25px">在&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">smali/com/dianping/main/guide/MainActivity.smali</code>&nbsp;中搜索&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">ac6fc3fe</code>&nbsp;:<br>
</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
<span class="line" style="height:20px">3</span>
<span class="line" style="height:20px">4</span>
<span class="line" style="height:20px">5</span>
<span class="line" style="height:20px">6</span>
<span class="line" style="height:20px">7</span>
<span class="line" style="height:20px">8</span>
<span class="line" style="height:20px">9</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px"><span class="keyword" style="color:rgb(178,148,187)">.line</span> 358</span>
<span class="line" style="height:20px"><span class="keyword" style="color:rgb(178,148,187)">    .local</span> <span class="variable" style="color:rgb(204,102,102)">v4</span>, <span class="string" style="color:rgb(181,189,104)">&quot;myHash&quot;</span>:<span class="class">Ljava/lang/String;</span></span>
<span class="line" style="height:20px">   <span class="instruction"> const-string </span><span class="variable" style="color:rgb(204,102,102)">v9</span>, <span class="string" style="color:rgb(181,189,104)">&quot;ac6fc3fe&quot;</span></span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px">   <span class="instruction"> invoke-virtual </span>{<span class="variable" style="color:rgb(204,102,102)">v9</span>, <span class="variable" style="color:rgb(204,102,102)">v4</span>}, <span class="class">Ljava/lang/String;</span><span class="function" style="color:rgb(129,162,190)">-&gt;equalsIgnoreCase(</span><span class="class">Ljava/lang/String;</span><span class="function" style="color:rgb(129,162,190)">)</span>Z</span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px">   <span class="instruction"> move-result </span><span class="variable" style="color:rgb(204,102,102)">v9</span></span>
<span class="line" style="height:20px"></span>
<span class="line" style="height:20px">   <span class="instruction"> if-nez </span><span class="variable" style="color:rgb(204,102,102)">v9</span>,<span class="keyword" style="color:rgb(178,148,187)"> :cond_2</span>     <span class="function" style="color:rgb(129,162,190)"> //if(</span>!equal(..<span class="function" style="color:rgb(129,162,190)">)</span><span class="function" style="color:rgb(129,162,190)">)</span><span class="instruction"> return </span>1</span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px"></p>
<p style="margin-top:0px; margin-bottom:25px">找到&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">con_2</code>&nbsp;的定义:<br>
</p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
<span class="line" style="height:20px">3</span>
<span class="line" style="height:20px">4</span>
<span class="line" style="height:20px">5</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px"><span class="keyword" style="color:rgb(178,148,187)">.line</span> 359<span class="keyword" style="color:rgb(178,148,187)"></span>
<span class="line" style="height:20px">:cond_2</span><span class="instruction"></span>
<span class="line" style="height:20px">const/4 </span><span class="variable" style="color:rgb(204,102,102)">v8</span>, 0x1</span>
<span class="line" style="height:20px"><span class="instruction"></span>
<span class="line" style="height:20px">goto </span>:goto_0</span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px"></p>
<table style="border-collapse:collapse; border-spacing:0px; margin:0px; width:auto; border:none; font-size:14px">
<tbody>
<tr style="background-color:rgb(249,249,249)">
<td class="gutter" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px 20px 1px 1px; color:rgb(102,102,102); line-height:1.6; border:none; text-align:right; background:rgb(29,31,33)"><span class="line" style="height:20px">1</span>
<span class="line" style="height:20px">2</span>
</pre>
</td>
<td class="code" style="padding:0px; vertical-align:middle; border:none">
<pre style="overflow:auto; font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:13px; margin-top:0px; margin-bottom:0px; padding:1px; color:rgb(197,200,198); line-height:1.6; border:none; background:rgb(29,31,33)"><span class="line" style="height:20px"><span class="symbol">:goto_0</span></span>
<span class="line" style="height:20px">    <span class="keyword" style="color:rgb(178,148,187)">return</span> v8</span>
</pre>
</td>
</tr>
</tbody>
</table>
<p style="margin-top:0px; margin-bottom:25px">所以把&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">if-nez v9, :cond_2</code>&nbsp;改成&nbsp;<code style="font-family:'Input Mono','PT Mono',Consolas,Monaco,Menlo,monospace; font-size:1em; word-break:break-all; padding:0px 0.3em; background:rgb(238,238,238)">if-eqz
 v9, :cond_2</code>&nbsp;就可以了，当然，修改方法还有很多。</p>
<h3 id="打包签名" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:18px">
打包签名</h3>
<p style="margin-top:0px; margin-bottom:25px">点评可以正常打开，正常登录，正常使用了。</p>
<hr style="height:3px; margin:40px 0px; border:none; background-color:rgb(221,221,221)">
<blockquote style="margin:0px; padding:0px 15px; color:rgb(102,102,102); border-left-width:4px; border-left-style:solid; border-left-color:rgb(221,221,221)">
<p style="margin-top:0px; margin-bottom:25px">番外：<br>
而另一台手机 (Lenovo Android 4.2.2) 测试进程会不断重新创建。<br>
应用 crash 之后 App 对应的 Process 都被杀死，然后安排重启 Service，重新启动 Task 栈顶的 Activity 。</p>
</blockquote>
<hr style="height:3px; margin:40px 0px; border:none; background-color:rgb(221,221,221)">
<h2 id="Reference" style="margin:60px 0px 15px; padding:10px 0px 0px; line-height:1; font-size:20px">
Reference</h2>
<p style="margin-top:0px; margin-bottom:25px"><a target="_blank" href="http://www.ituring.com.cn/book/1131" rel="external" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent">Android软件安全与逆向分析</a><br>
<a target="_blank" href="http://www.wandoujia.com/blog/xibaibai-diary-3" rel="external" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent">洗白白手记：绕开
 Android 应用开发的那些「坑」</a><br>
<a target="_blank" href="http://www.oschina.net/question/163910_27292#tags_nav" rel="external" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; background-color:transparent">给
 Android 应用程序签名</a></p>
</div>
<div class="post-tags" style="margin-top:40px; text-align:center"><a target="_blank" href="http://kiya-z.github.io/tags/Android-%E5%AE%89%E5%85%A8/" rel="tag" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; display:inline-block; margin-right:10px; font-size:13px; background-color:transparent">#Android
 安全</a>&nbsp;<a target="_blank" href="http://kiya-z.github.io/tags/%E5%8F%8D%E7%BC%96%E8%AF%91/" rel="tag" style="color:rgb(85,85,85); text-decoration:none; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(153,153,153); word-wrap:break-word; display:inline-block; margin-right:10px; font-size:13px; background-color:transparent">#反编译</a></div>
<div class="post-tags" style="margin-top:40px; text-align:center"><span style="color:rgb(102,102,102); font-family:Lato,'PingFang SC','Microsoft YaHei',sans-serif; font-size:16px; line-height:32px; text-align:justify">原文链接:
<a target="_blank" href="http://kiya-z.github.io/2015/11/12/check-signature-for-avoiding-fake-app-java-level-check/">
&nbsp;</a></span><span style="color:rgb(102,102,102); font-family:Lato,'PingFang SC','Microsoft YaHei',sans-serif; font-size:16px; line-height:32px; text-align:justify"><a target="_blank" href="http://kiya-z.github.io/2015/11/12/check-signature-for-avoiding-fake-app-java-level-check/">http://kiya-z.github.io/2015/11/12/check-signature-for-avoiding-fake-app-java-level-check/</a></span><br>
</div>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-capture" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/02/capture/">抓包工具整理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://github.com/hanks-zyh/capturedata">github 地址</a></p>
<blockquote>
<p>抓包工具整理</p>
</blockquote>
<h1 id="抓包工具-–-Charles"><a href="#抓包工具-–-Charles" class="headerlink" title="抓包工具 – Charles"></a>抓包工具 – Charles</h1><p>基于Java 跨平台： Linux , Mac OS X, Windows<br><a href="https://www.charlesproxy.com/">官网</a></p>
<blockquote>
<p>Charles is an HTTP proxy / HTTP monitor / Reverse Proxy that enables a developer to view all of the HTTP and SSL / HTTPS traffic between their machine and the Internet. This includes requests, responses and the HTTP headers (which contain the cookies and caching information).</p>
</blockquote>
<p><img src="https://www.charlesproxy.com/assets/img/sm/23/image/mac_screen_321.png?k=f28bf8eff3" alt=""></p>
<hr>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-adb-wifi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/01/adb-wifi/">利用ADB 来进行无线调试</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>通过wifi连接进行 adb 调试, 也是插件 <strong><a href="https://github.com/pedrovgs/AndroidWiFiADB">AndroidWiFiADB</a></strong> 的原理</p>
<p>前提: 电脑和手机在同一局域网下</p>
</blockquote>
<h3 id="adb-connect-命令"><a href="#adb-connect-命令" class="headerlink" title="adb connect 命令"></a>adb connect 命令</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">adb connect &lt;host&gt;[<span class="symbol">:&lt;port&gt;</span>]</div></pre></td></tr></table></figure>
<ol>
<li><p>通过USB线连接电脑</p>
</li>
<li><p>查看 <code>adb</code> 连接的设备列表</p>
</li>
</ol>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ adb devices -l</div><div class="line"></div><div class="line">List of devices attached</div><div class="line"><span class="number">005</span>deabe1919a90b       device <span class="string">usb:</span><span class="number">1</span><span class="number">-2</span> <span class="string">product:</span>occam <span class="string">model:</span>Nexus_4 <span class="string">device:</span>mako</div></pre></td></tr></table></figure>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-上传自己的库到jcenter" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/31/上传自己的库到jcenter/">上传自己的库到jcenter</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h1><p><a href="https://bintray.com/" target="_blank" rel="external">https://bintray.com/</a><br>注册一个账号。</p>
<p>获取API Key<br><a href="https://bintray.com/profile/edit" target="_blank" rel="external">https://bintray.com/profile/edit</a></p>
<h1 id="创建与配置项目"><a href="#创建与配置项目" class="headerlink" title="创建与配置项目"></a>创建与配置项目</h1><ol>
<li>修改项目目录下的 <code>build.gradle</code>,添加依赖</li>
</ol>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Top-level build file where you can add configuration options common to all sub-projects/modules.</span></div><div class="line"></div><div class="line"><span class="keyword">buildscript</span> &#123;</div><div class="line">    <span class="keyword">repositories</span> &#123;</div><div class="line">        jcenter()</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">dependencies</span> &#123;</div><div class="line">        <span class="keyword">classpath</span> <span class="string">'com.android.tools.build:gradle:1.3.0'</span></div><div class="line">        <span class="keyword">classpath</span> <span class="string">'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.0'</span></div><div class="line">        <span class="keyword">classpath</span> <span class="string">'com.github.dcendents:android-maven-gradle-plugin:1.3'</span></div><div class="line">        <span class="comment">// <span class="doctag">NOTE:</span> Do not place your application dependencies here; they belong</span></div><div class="line">        <span class="comment">// in the individual module build.gradle files</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">allprojects</span> &#123;</div><div class="line">    <span class="keyword">repositories</span> &#123;</div><div class="line">        jcenter()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li>修改要打包成aar的moudle下的<code>build.gradle</code></li>
</ol>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.library'</span></div><div class="line">apply plugin: <span class="string">'com.github.dcendents.android-maven'</span></div><div class="line">apply plugin: <span class="string">'com.jfrog.bintray'</span></div><div class="line"></div><div class="line">version = <span class="string">"0.6.6"</span>                                                              <span class="comment">// #CONFIG# // project version</span></div><div class="line"></div><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">21</span></div><div class="line">    buildToolsVersion <span class="string">"21.1.2"</span></div><div class="line">    defaultConfig &#123;</div><div class="line">        minSdkVersion <span class="number">8</span></div><div class="line">        targetSdkVersion <span class="number">21</span></div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line">    &#125;</div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            minifyEnabled <span class="keyword">false</span></div><div class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>])</div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:support-v4:22.2.1'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:recyclerview-v7:22.2.1'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">def</span> siteUrl = <span class="string">'https://github.com/hanks-zyh/AnimateCheckBox'</span>                    <span class="comment">// #CONFIG# // project homepage</span></div><div class="line"><span class="keyword">def</span> gitUrl = <span class="string">'https://github.com/hanks-zyh/AnimateCheckBox.git'</span>                <span class="comment">// #CONFIG# // project git</span></div><div class="line"><span class="keyword">group</span> = <span class="string">"com.hanks"</span>                                                           <span class="comment">// #CONFIG# // Maven Group ID for the artifact (pageckage name is ok)</span></div><div class="line"></div><div class="line">install &#123;</div><div class="line">    <span class="keyword">repositories</span>.mavenInstaller &#123;</div><div class="line">        <span class="comment">// This generates POM.xml with proper parameters</span></div><div class="line">        pom &#123;</div><div class="line">            <span class="keyword">project</span> &#123;</div><div class="line">                packaging <span class="string">'aar'</span></div><div class="line">                name <span class="string">'Less Code For Android'</span>                                   <span class="comment">// #CONFIG# // project title</span></div><div class="line">                url siteUrl</div><div class="line">                <span class="comment">// Set your license</span></div><div class="line">                licenses &#123;</div><div class="line">                    license &#123;</div><div class="line">                        name <span class="string">'The Apache Software License, Version 2.0'</span></div><div class="line">                        url <span class="string">'http://www.apache.org/licenses/LICENSE-2.0.txt'</span></div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                developers &#123;</div><div class="line">                    developer &#123;</div><div class="line">                        id <span class="string">'hanks'</span>                                           <span class="comment">// #CONFIG# // your user id (you can write your nickname)</span></div><div class="line">                        name <span class="string">'hanks'</span>                                       <span class="comment">// #CONFIG# // your user name</span></div><div class="line">                        email <span class="string">'zhangyuhan2014@gmail.com'</span>                               <span class="comment">// #CONFIG# // your email</span></div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                scm &#123;</div><div class="line">                    connection gitUrl</div><div class="line">                    developerConnection gitUrl</div><div class="line">                    url siteUrl</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">task</span> sourcesJar(type: Jar) &#123;</div><div class="line">    <span class="keyword">from</span> android.<span class="keyword">sourceSets</span>.main.java.srcDirs</div><div class="line">    classifier = <span class="string">'sources'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">task</span> javadoc(type: Javadoc) &#123;</div><div class="line">    <span class="keyword">source</span> = android.<span class="keyword">sourceSets</span>.main.java.srcDirs</div><div class="line">    <span class="keyword">classpath</span> += <span class="keyword">project</span>.files(android.getBootClasspath().<span class="keyword">join</span>(<span class="keyword">File</span>.pathSeparator))</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">task</span> javadocJar(type: Jar, dependsOn: javadoc) &#123;</div><div class="line">    classifier = <span class="string">'javadoc'</span></div><div class="line">    <span class="keyword">from</span> javadoc.<span class="keyword">destinationDir</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">artifacts</span> &#123;</div><div class="line">    archives javadocJar</div><div class="line">    archives sourcesJar</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//在local.properties添加bintray.user和bintray.apikey</span></div><div class="line">Properties properties = <span class="keyword">new</span> Properties()</div><div class="line">properties.load(<span class="keyword">project</span>.rootProject.<span class="keyword">file</span>(<span class="string">'local.properties'</span>).newDataInputStream())</div><div class="line">bintray &#123;</div><div class="line">    user = properties.getProperty(<span class="string">"bintray.user"</span>)</div><div class="line">    key = properties.getProperty(<span class="string">"bintray.apikey"</span>)</div><div class="line">    <span class="keyword">configurations</span> = [<span class="string">'archives'</span>]</div><div class="line">    pkg &#123;</div><div class="line">        repo = <span class="string">"maven"</span></div><div class="line">        name = <span class="string">"AnimateCheckBox"</span>     <span class="comment">// #CONFIG# project name in jcenter</span></div><div class="line">        websiteUrl = siteUrl</div><div class="line">        vcsUrl = gitUrl</div><div class="line">        licenses = [<span class="string">"Apache-2.0"</span>]</div><div class="line">        publish = <span class="keyword">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="执行创建的-install-任务-Gradle"><a href="#执行创建的-install-任务-Gradle" class="headerlink" title="执行创建的 install 任务(Gradle)"></a>执行创建的 install 任务(Gradle)</h1><p>用于生产 jar 和 jardoc</p>
<h1 id="执行-bintrayUpload"><a href="#执行-bintrayUpload" class="headerlink" title="执行 bintrayUpload"></a>执行 bintrayUpload</h1><p><img src="https://dn-coding-net-production-pp.qbox.me/3d7fb771-5d4a-48ac-8f2b-1d9cce14dcc8.png" alt="图片"><br>当bintrayUpload成功之后，</p>
<p>到 <a href="https://bintray.com/" target="_blank" rel="external">https://bintray.com/</a> 查看刚上传的项目<br>找到 <strong>Maven Central</strong> 标签，提示体积jcenter审核</p>
<h1 id="上传到-jcenter"><a href="#上传到-jcenter" class="headerlink" title="上传到 jcenter"></a>上传到 jcenter</h1><p>等邮件通知，审核通过之后可以查看</p>
<p>到<a href="http://jcenter.bintray.com/" target="_blank" rel="external">http://jcenter.bintray.com/</a> 按照路径查看是否存在<br>如 <strong>otto</strong> 的 <a href="http://jcenter.bintray.com/com/squareup/otto/1.3.7/" target="_blank" rel="external">http://jcenter.bintray.com/com/squareup/otto/1.3.7/</a><br>然后别人就可以添加引用，从远程下载了</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  

  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
    </nav>
  


</section>
      </div>
      <footer id="footer">
  <div class="outer footer_center">
    <div id="footer-info" class="inner">
      &copy; 2017 <a href="https://github.com/hanks-zyh"> Hanks</a>
	  </div>
  </div>
 <div id="share">
  <a id="totop" title="" style="display: block;">返回顶部</a>
 </div>
</footer>

    </div>
    

<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollLoading.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>
