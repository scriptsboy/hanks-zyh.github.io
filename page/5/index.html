<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hanks&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="android,web,node,python">
<meta property="og:type" content="website">
<meta property="og:title" content="Hanks' Blog">
<meta property="og:url" content="http://hanks.pub/page/5/index.html">
<meta property="og:site_name" content="Hanks' Blog">
<meta property="og:description" content="android,web,node,python">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hanks' Blog">
<meta name="twitter:description" content="android,web,node,python">
  
  
    <link rel="icon" href="/images/favicon.png">
  
  <!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'> -->
  <!-- <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <!-- <link href="//fonts.useso.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <!-- <link href='//fonts.useso.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'> -->
  <link rel="stylesheet" href="/css/style.css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <a href="/" class="logo"></a>
    <nav id="main-nav">
      <a id="main-nav-toggle" class="nav-icon"></a>
      
        <a class="main-nav-link" href="/archives">归档</a>
      
        <a class="main-nav-link" href="/daily">日报</a>
      
        <a class="main-nav-link" href="/eye-video">开眼</a>
      
        <a class="main-nav-link" href="/joke">joke</a>
      
        <a class="main-nav-link" href="/picture-fight">斗图</a>
      
        <a class="main-nav-link" href="/atom.xml">RSS</a>
      
    </nav>
  </div>
</header>
      <nav id="mobile-nav" class="off">
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/daily" class="mobile-nav-link">日报</a>
  
    <a href="/eye-video" class="mobile-nav-link">开眼</a>
  
    <a href="/joke" class="mobile-nav-link">joke</a>
  
    <a href="/picture-fight" class="mobile-nav-link">斗图</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
</nav>
      <div class="outer">
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <div class="info">
     <div class="content">
       <div>
         <a href="https://github.com/hanks-zyh"><img class="avatar" src="https://avatars2.githubusercontent.com/u/6268322?v=3&s=460" alt="" /></a>
       </div>
       <div class="name">
         <h2 >Hanks</h2>
       </div>
       <p>‭100100011101‬</p>
       <div class="account">
         <div class="account-item">
           <a href="http://weibo.com/u/2359002991"><img src="http://ww1.sinaimg.cn/large/8c9b876fjw1f3ik9y4q7hj205k05kdfx.jpg" style="width:40px;height:40px;border-radius: 50%;"></a>
         </div>
         <div class="account-item">
              <a href="http://www.zhihu.com/people/yuhan-zhang-36"><img src="http://ww2.sinaimg.cn/large/8c9b876fjw1f3ik7sv63wj205k05k3yg.jpg" style="width:40px;height:40px;border-radius: 50%;"></a>
         </div>
         <div class="account-item">
           <a href="https://github.com/hanks-zyh"> <img src="http://ww1.sinaimg.cn/large/8c9b876fly1fe196fbtiqj205k05ka9u.jpg" style="width:40px;height:40px;border-radius: 50%;"></a>
         </div>
       </div>
     </div>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">最新发布</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/10/11/android-night-mode/">Android 夜间模式</a>
          </li>
        
          <li>
            <a href="/2017/09/28/lua-into-android/">Lua 嵌入 Android 原理</a>
          </li>
        
          <li>
            <a href="/2017/04/28/lua-in-android/">探究 lua 在 Android 中的应用</a>
          </li>
        
          <li>
            <a href="/2017/03/26/node-image-recognition/">Node 识别图片中的文字</a>
          </li>
        
          <li>
            <a href="/2017/03/22/proxy-test/">请求代理</a>
          </li>
        
          <li>
            <a href="/2017/02/16/android-customview-inputmethod/">Android 自定义 view 连接输入法</a>
          </li>
        
          <li>
            <a href="/2017/01/10/android-lua/">Android 与 Lua</a>
          </li>
        
          <li>
            <a href="/2017/01/10/android-markdown-render/">Android 下 Markdown 渲染</a>
          </li>
        
          <li>
            <a href="/2017/01/09/android-webview-font/">Android 中 webview 自定义字体</a>
          </li>
        
          <li>
            <a href="/2016/09/25/slack-bot/">slack bot</a>
          </li>
        
          <li>
            <a href="/2016/09/19/webapp/">让网页更适配移动设备</a>
          </li>
        
          <li>
            <a href="/2016/09/05/weex-2333/">体验 weex —— 写一个表情包应用</a>
          </li>
        
          <li>
            <a href="/2016/08/31/nestedscrollchild/">WebView 实现 NestedScrollingChild</a>
          </li>
        
          <li>
            <a href="/2016/08/29/nestedchildparent/">NestedScrollingParent 实现复杂交互效果</a>
          </li>
        
          <li>
            <a href="/2016/08/04/telegram-bot/">写一个福利 Telegram 机器人</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Activity/" style="font-size: 10px;">Activity</a> <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Atom/" style="font-size: 10px;">Atom</a> <a href="/tags/Dagger2/" style="font-size: 10px;">Dagger2</a> <a href="/tags/EditText/" style="font-size: 10px;">EditText</a> <a href="/tags/Express/" style="font-size: 11.67px;">Express</a> <a href="/tags/Fragment/" style="font-size: 10px;">Fragment</a> <a href="/tags/Framework/" style="font-size: 11.67px;">Framework</a> <a href="/tags/HTML-CSS/" style="font-size: 10px;">HTML/CSS</a> <a href="/tags/Jade/" style="font-size: 10px;">Jade</a> <a href="/tags/Java/" style="font-size: 13.33px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Kotlin/" style="font-size: 15px;">Kotlin</a> <a href="/tags/LAMP/" style="font-size: 10px;">LAMP</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Lua/" style="font-size: 13.33px;">Lua</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/NestedScrolling/" style="font-size: 13.33px;">NestedScrolling</a> <a href="/tags/Node-js/" style="font-size: 13.33px;">Node.js</a> <a href="/tags/OS-X/" style="font-size: 10px;">OS X</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/Python/" style="font-size: 11.67px;">Python</a> <a href="/tags/React-Native/" style="font-size: 18.33px;">React-Native</a> <a href="/tags/Refactoring/" style="font-size: 10px;">Refactoring</a> <a href="/tags/Rx/" style="font-size: 10px;">Rx</a> <a href="/tags/RxJava/" style="font-size: 13.33px;">RxJava</a> <a href="/tags/Rxandroid/" style="font-size: 10px;">Rxandroid</a> <a href="/tags/Rxjava/" style="font-size: 11.67px;">Rxjava</a> <a href="/tags/SQLite/" style="font-size: 10px;">SQLite</a> <a href="/tags/Scrapy/" style="font-size: 11.67px;">Scrapy</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/SwipeRefreshLayout/" style="font-size: 10px;">SwipeRefreshLayout</a> <a href="/tags/Telegram/" style="font-size: 10px;">Telegram</a> <a href="/tags/TextView/" style="font-size: 10px;">TextView</a> <a href="/tags/Ubuntu/" style="font-size: 16.67px;">Ubuntu</a> <a href="/tags/VPS/" style="font-size: 10px;">VPS</a> <a href="/tags/View/" style="font-size: 10px;">View</a> <a href="/tags/Vue-js/" style="font-size: 10px;">Vue.js</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/WebView/" style="font-size: 11.67px;">WebView</a> <a href="/tags/bot/" style="font-size: 10px;">bot</a> <a href="/tags/crontab/" style="font-size: 10px;">crontab</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/interpolator/" style="font-size: 10px;">interpolator</a> <a href="/tags/leancloud/" style="font-size: 10px;">leancloud</a> <a href="/tags/mac-os/" style="font-size: 10px;">mac os</a> <a href="/tags/slack/" style="font-size: 10px;">slack</a> <a href="/tags/virtualBox/" style="font-size: 10px;">virtualBox</a> <a href="/tags/weex/" style="font-size: 10px;">weex</a> <a href="/tags/代理/" style="font-size: 10px;">代理</a> <a href="/tags/依赖注入/" style="font-size: 10px;">依赖注入</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/学习/" style="font-size: 10px;">学习</a> <a href="/tags/必备知识/" style="font-size: 10px;">必备知识</a> <a href="/tags/性能优化/" style="font-size: 10px;">性能优化</a> <a href="/tags/总结/" style="font-size: 10px;">总结</a> <a href="/tags/热修复/" style="font-size: 11.67px;">热修复</a> <a href="/tags/爬虫/" style="font-size: 10px;">爬虫</a> <a href="/tags/自动化/" style="font-size: 10px;">自动化</a> <a href="/tags/设计/" style="font-size: 10px;">设计</a>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://github.com/hanks-zyh">hanks-zyh</a>
          </li>
        
          <li>
            <a href="http://kiya.space">Kiya‘s space</a>
          </li>
        
          <li>
            <a href="http://rocko.xyz/">Rocko&#39;s blog</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <div class="wx">
      <h3 class="widget-title">微信公众号</h3>
      <img src='http://ww1.sinaimg.cn/large/8c9b876fly1fe0nnlvokpj20by0bywfi.jpg' height="100%" width="100%" >
      <p>搜索公众号: CodeProvider</p>
    </div>
  </div>


  
</aside>
        
        <section id="main" class="mdl-shadow--2dp">
  
    <article id="post-capture" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/02/capture/">抓包工具整理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://github.com/hanks-zyh/capturedata">github 地址</a></p>
<blockquote>
<p>抓包工具整理</p>
</blockquote>
<h1 id="抓包工具-–-Charles"><a href="#抓包工具-–-Charles" class="headerlink" title="抓包工具 – Charles"></a>抓包工具 – Charles</h1><p>基于Java 跨平台： Linux , Mac OS X, Windows<br><a href="https://www.charlesproxy.com/">官网</a></p>
<blockquote>
<p>Charles is an HTTP proxy / HTTP monitor / Reverse Proxy that enables a developer to view all of the HTTP and SSL / HTTPS traffic between their machine and the Internet. This includes requests, responses and the HTTP headers (which contain the cookies and caching information).</p>
</blockquote>
<p><img src="https://www.charlesproxy.com/assets/img/sm/23/image/mac_screen_321.png?k=f28bf8eff3" alt=""></p>
<hr>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-adb-wifi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/01/adb-wifi/">利用ADB 来进行无线调试</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>通过wifi连接进行 adb 调试, 也是插件 <strong><a href="https://github.com/pedrovgs/AndroidWiFiADB">AndroidWiFiADB</a></strong> 的原理</p>
<p>前提: 电脑和手机在同一局域网下</p>
</blockquote>
<h3 id="adb-connect-命令"><a href="#adb-connect-命令" class="headerlink" title="adb connect 命令"></a>adb connect 命令</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">adb connect &lt;host&gt;[<span class="symbol">:&lt;port&gt;</span>]</div></pre></td></tr></table></figure>
<ol>
<li><p>通过USB线连接电脑</p>
</li>
<li><p>查看 <code>adb</code> 连接的设备列表</p>
</li>
</ol>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ adb devices -l</div><div class="line"></div><div class="line">List of devices attached</div><div class="line"><span class="number">005</span>deabe1919a90b       device <span class="string">usb:</span><span class="number">1</span><span class="number">-2</span> <span class="string">product:</span>occam <span class="string">model:</span>Nexus_4 <span class="string">device:</span>mako</div></pre></td></tr></table></figure>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-上传自己的库到jcenter" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/31/上传自己的库到jcenter/">上传自己的库到jcenter</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h1><p><a href="https://bintray.com/" target="_blank" rel="external">https://bintray.com/</a><br>注册一个账号。</p>
<p>获取API Key<br><a href="https://bintray.com/profile/edit" target="_blank" rel="external">https://bintray.com/profile/edit</a></p>
<h1 id="创建与配置项目"><a href="#创建与配置项目" class="headerlink" title="创建与配置项目"></a>创建与配置项目</h1><ol>
<li>修改项目目录下的 <code>build.gradle</code>,添加依赖</li>
</ol>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Top-level build file where you can add configuration options common to all sub-projects/modules.</span></div><div class="line"></div><div class="line"><span class="keyword">buildscript</span> &#123;</div><div class="line">    <span class="keyword">repositories</span> &#123;</div><div class="line">        jcenter()</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">dependencies</span> &#123;</div><div class="line">        <span class="keyword">classpath</span> <span class="string">'com.android.tools.build:gradle:1.3.0'</span></div><div class="line">        <span class="keyword">classpath</span> <span class="string">'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.0'</span></div><div class="line">        <span class="keyword">classpath</span> <span class="string">'com.github.dcendents:android-maven-gradle-plugin:1.3'</span></div><div class="line">        <span class="comment">// <span class="doctag">NOTE:</span> Do not place your application dependencies here; they belong</span></div><div class="line">        <span class="comment">// in the individual module build.gradle files</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">allprojects</span> &#123;</div><div class="line">    <span class="keyword">repositories</span> &#123;</div><div class="line">        jcenter()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li>修改要打包成aar的moudle下的<code>build.gradle</code></li>
</ol>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.library'</span></div><div class="line">apply plugin: <span class="string">'com.github.dcendents.android-maven'</span></div><div class="line">apply plugin: <span class="string">'com.jfrog.bintray'</span></div><div class="line"></div><div class="line">version = <span class="string">"0.6.6"</span>                                                              <span class="comment">// #CONFIG# // project version</span></div><div class="line"></div><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">21</span></div><div class="line">    buildToolsVersion <span class="string">"21.1.2"</span></div><div class="line">    defaultConfig &#123;</div><div class="line">        minSdkVersion <span class="number">8</span></div><div class="line">        targetSdkVersion <span class="number">21</span></div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line">    &#125;</div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            minifyEnabled <span class="keyword">false</span></div><div class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>])</div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:support-v4:22.2.1'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:recyclerview-v7:22.2.1'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">def</span> siteUrl = <span class="string">'https://github.com/hanks-zyh/AnimateCheckBox'</span>                    <span class="comment">// #CONFIG# // project homepage</span></div><div class="line"><span class="keyword">def</span> gitUrl = <span class="string">'https://github.com/hanks-zyh/AnimateCheckBox.git'</span>                <span class="comment">// #CONFIG# // project git</span></div><div class="line"><span class="keyword">group</span> = <span class="string">"com.hanks"</span>                                                           <span class="comment">// #CONFIG# // Maven Group ID for the artifact (pageckage name is ok)</span></div><div class="line"></div><div class="line">install &#123;</div><div class="line">    <span class="keyword">repositories</span>.mavenInstaller &#123;</div><div class="line">        <span class="comment">// This generates POM.xml with proper parameters</span></div><div class="line">        pom &#123;</div><div class="line">            <span class="keyword">project</span> &#123;</div><div class="line">                packaging <span class="string">'aar'</span></div><div class="line">                name <span class="string">'Less Code For Android'</span>                                   <span class="comment">// #CONFIG# // project title</span></div><div class="line">                url siteUrl</div><div class="line">                <span class="comment">// Set your license</span></div><div class="line">                licenses &#123;</div><div class="line">                    license &#123;</div><div class="line">                        name <span class="string">'The Apache Software License, Version 2.0'</span></div><div class="line">                        url <span class="string">'http://www.apache.org/licenses/LICENSE-2.0.txt'</span></div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                developers &#123;</div><div class="line">                    developer &#123;</div><div class="line">                        id <span class="string">'hanks'</span>                                           <span class="comment">// #CONFIG# // your user id (you can write your nickname)</span></div><div class="line">                        name <span class="string">'hanks'</span>                                       <span class="comment">// #CONFIG# // your user name</span></div><div class="line">                        email <span class="string">'zhangyuhan2014@gmail.com'</span>                               <span class="comment">// #CONFIG# // your email</span></div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                scm &#123;</div><div class="line">                    connection gitUrl</div><div class="line">                    developerConnection gitUrl</div><div class="line">                    url siteUrl</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">task</span> sourcesJar(type: Jar) &#123;</div><div class="line">    <span class="keyword">from</span> android.<span class="keyword">sourceSets</span>.main.java.srcDirs</div><div class="line">    classifier = <span class="string">'sources'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">task</span> javadoc(type: Javadoc) &#123;</div><div class="line">    <span class="keyword">source</span> = android.<span class="keyword">sourceSets</span>.main.java.srcDirs</div><div class="line">    <span class="keyword">classpath</span> += <span class="keyword">project</span>.files(android.getBootClasspath().<span class="keyword">join</span>(<span class="keyword">File</span>.pathSeparator))</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">task</span> javadocJar(type: Jar, dependsOn: javadoc) &#123;</div><div class="line">    classifier = <span class="string">'javadoc'</span></div><div class="line">    <span class="keyword">from</span> javadoc.<span class="keyword">destinationDir</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">artifacts</span> &#123;</div><div class="line">    archives javadocJar</div><div class="line">    archives sourcesJar</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//在local.properties添加bintray.user和bintray.apikey</span></div><div class="line">Properties properties = <span class="keyword">new</span> Properties()</div><div class="line">properties.load(<span class="keyword">project</span>.rootProject.<span class="keyword">file</span>(<span class="string">'local.properties'</span>).newDataInputStream())</div><div class="line">bintray &#123;</div><div class="line">    user = properties.getProperty(<span class="string">"bintray.user"</span>)</div><div class="line">    key = properties.getProperty(<span class="string">"bintray.apikey"</span>)</div><div class="line">    <span class="keyword">configurations</span> = [<span class="string">'archives'</span>]</div><div class="line">    pkg &#123;</div><div class="line">        repo = <span class="string">"maven"</span></div><div class="line">        name = <span class="string">"AnimateCheckBox"</span>     <span class="comment">// #CONFIG# project name in jcenter</span></div><div class="line">        websiteUrl = siteUrl</div><div class="line">        vcsUrl = gitUrl</div><div class="line">        licenses = [<span class="string">"Apache-2.0"</span>]</div><div class="line">        publish = <span class="keyword">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="执行创建的-install-任务-Gradle"><a href="#执行创建的-install-任务-Gradle" class="headerlink" title="执行创建的 install 任务(Gradle)"></a>执行创建的 install 任务(Gradle)</h1><p>用于生产 jar 和 jardoc</p>
<h1 id="执行-bintrayUpload"><a href="#执行-bintrayUpload" class="headerlink" title="执行 bintrayUpload"></a>执行 bintrayUpload</h1><p><img src="https://dn-coding-net-production-pp.qbox.me/3d7fb771-5d4a-48ac-8f2b-1d9cce14dcc8.png" alt="图片"><br>当bintrayUpload成功之后，</p>
<p>到 <a href="https://bintray.com/" target="_blank" rel="external">https://bintray.com/</a> 查看刚上传的项目<br>找到 <strong>Maven Central</strong> 标签，提示体积jcenter审核</p>
<h1 id="上传到-jcenter"><a href="#上传到-jcenter" class="headerlink" title="上传到 jcenter"></a>上传到 jcenter</h1><p>等邮件通知，审核通过之后可以查看</p>
<p>到<a href="http://jcenter.bintray.com/" target="_blank" rel="external">http://jcenter.bintray.com/</a> 按照路径查看是否存在<br>如 <strong>otto</strong> 的 <a href="http://jcenter.bintray.com/com/squareup/otto/1.3.7/" target="_blank" rel="external">http://jcenter.bintray.com/com/squareup/otto/1.3.7/</a><br>然后别人就可以添加引用，从远程下载了</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-Ubuntu下Java环境配置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/25/Ubuntu下Java环境配置/">Ubuntu下Java环境配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Java环境配置</p>
<ol>
<li>下载 <code>jdk-8u60-linux-x64.tar.gz</code></li>
<li>解压文件</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 进入到下载目录</span></div><div class="line"><span class="built_in">cd</span> ~/Downloads</div><div class="line"><span class="comment"># 在 /usr/lib/ 下创建jvm目录，如果有可以跳过</span></div><div class="line">sudo mkdir /usr/lib/jvm</div><div class="line"><span class="comment"># 解压</span></div><div class="line">sudo tar zxvf jdk-8u60-linux-x64.tar.gz -C /usr/lib/jvm</div><div class="line"><span class="comment"># 进入到解压过后的文件</span></div><div class="line"><span class="built_in">cd</span> /usr/lib/jvm/</div><div class="line"><span class="comment"># 重命名目录</span></div><div class="line">mv jdk1.8.0_60/ java-8u60-sun</div></pre></td></tr></table></figure>
<ol>
<li>修改环境变量</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 编辑.bashrc文件</span></div><div class="line">vim ~/.bashrc</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 在文件底部添加：</span></div><div class="line"><span class="built_in">export</span> JAVA_HOME=/usr/lib/jvm/java-8u60-sun  </div><div class="line"><span class="built_in">export</span> JRE_HOME=<span class="variable">$&#123;JAVA_HOME&#125;</span>/jre  </div><div class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib  </div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$PATH</span></div></pre></td></tr></table></figure>
<p>保存退出</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 使更改生效</span></div><div class="line"><span class="built_in">source</span> ~/.bashrc</div></pre></td></tr></table></figure>
<ol>
<li>测试</li>
</ol>
<p><img src="http://file.bmob.cn/M02/44/E5/oYYBAFYs6cGAUXgGAAQQhkbBVNA434.png" alt=""></p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-Anko_for_Android" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/Anko_for_Android/">Anko for Android</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Anko-for-Android"><a href="#Anko-for-Android" class="headerlink" title="Anko for Android"></a>Anko for Android</h1><blockquote>
<p><a href="https://github.com/JetBrains/anko" target="_blank" rel="external">Anko</a> 是一个使开发Android应用更简单更快捷的库,Anko使你的代码简洁易懂, 使开发者不用再在意Android SDK对Java版本的限制(目前还不支持Java8  =。= ).</p>
</blockquote>
<p> Anko版本的 <code>hello world</code> :<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">verticalLayout &#123;</div><div class="line">    <span class="keyword">val</span> name = editText()</div><div class="line">    button(<span class="string">"Say Hello"</span>) &#123;</div><div class="line">        onClick &#123; toast(<span class="string">"Hello, <span class="subst">$&#123;name.text&#125;</span>!"</span>) &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>上面的代码创建了一个Button,放在 <code>LinearLayout</code> 内, 并为其设置了一个点击监听器<code>OnClickListener</code> .</p>
<p><img src="http://file.bmob.cn/M02/32/C1/oYYBAFYnZ7GAHENVAATT_iv8nqY107.gif" alt=""></p>
<p>上面是一个DSL(Domain Specific Language),使用的是 <a href="http://kotlinlang.org" target="_blank" rel="external">Kotlin</a>语言.</p>
<blockquote>
<p>DSL，即 Domain Specific Language，领域相关语言。什么是 DSL，说白了它就是某个行业中的行话。</p>
</blockquote>
<p>[TOC]</p>
<h2 id="Why-Anko"><a href="#Why-Anko" class="headerlink" title="Why Anko?"></a>Why Anko?</h2><h3 id="为啥-DSL"><a href="#为啥-DSL" class="headerlink" title="为啥 DSL?"></a>为啥 DSL?</h3><p>平时开发android, UI写在xml中,这就导致了下面的几个问题 :</p>
<ul>
<li>It is not typesafe</li>
<li>It is not null-safe</li>
<li>It forces you to write almost <em>the same code</em> for every layout you make</li>
<li>XML is parsed on the device wasting CPU time and battery 渲染xml为对象过程耗时耗电</li>
<li>Most of all, it allows no code reuse. 大部分不能重用</li>
</ul>
<p>但是全部只在代码中写UI,这很难,不仅代码丑,而且冗余难维护,下面是 <strong>Ktolin</strong>版本的(Java甚至更长):</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> act = <span class="keyword">this</span></div><div class="line"><span class="keyword">val</span> layout = LinearLayout(act)</div><div class="line">layout.setOrientation(LinearLayout.VERTICAL)</div><div class="line"><span class="keyword">val</span> name = EditText(act)</div><div class="line"><span class="keyword">val</span> button = Button(act)</div><div class="line">button.setText(<span class="string">"Say Hello"</span>)</div><div class="line">button.setOnClickListener &#123;</div><div class="line">    Toast.makeText(act, <span class="string">"Hello, <span class="subst">$&#123;name.getText()&#125;</span>!"</span>, Toast.LENGTH_SHORT).show()  </div><div class="line">&#125;</div><div class="line">layout.addView(name)</div><div class="line">layout.addView(button)</div></pre></td></tr></table></figure>
<p>DSL 就不一样类,相同的逻辑,但简洁易懂, 易于编写而且没有运行开销(runtime overhead)看下面的代码:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">verticalLayout &#123;</div><div class="line">    <span class="keyword">val</span> name = editText()</div><div class="line">    button(<span class="string">"Say Hello"</span>) &#123;</div><div class="line">        onClick &#123; toast(<span class="string">"Hello, <span class="subst">$&#123;name.text&#125;</span>!"</span>) &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="为啥不用-Scaloid"><a href="#为啥不用-Scaloid" class="headerlink" title="为啥不用 Scaloid?"></a>为啥不用 Scaloid?</h3><p><a href="https://github.com/pocorall/scaloid" target="_blank" rel="external">Scaloid</a> 是一个类似与 Scala 的库, 有很多非常酷的特性可供 Scala 开发者使用. Anko主要是针对 Java 和 Kotlin developers.</p>
<h3 id="兼容已有的代码"><a href="#兼容已有的代码" class="headerlink" title="兼容已有的代码"></a>兼容已有的代码</h3><p>不需要用Anko重写所有的UI, 你可以保留原有的Java代码. 此外, 如果你想写一个 <strong>Kotlin</strong>的activity类并且由于某些需求需要使用 inflate来渲染xml, 你完全可以按照原来的写法:<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Same as findViewById(), simpler to use</span></div><div class="line"><span class="keyword">val</span> name = find&lt;TextView&gt;(R.id.name)</div><div class="line">name.hint = <span class="string">"Enter your name"</span></div><div class="line">name.onClick &#123; <span class="comment">/*do something*/</span> &#125;</div></pre></td></tr></table></figure></p>
<h3 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h3><p>There is no :tophat:. Anko 由一些 <strong>Kotlin</strong>的 <a href="http://kotlinlang.org/docs/reference/extensions.html" target="_blank" rel="external">扩展函数和属性</a>,被设置成<strong>类型安全</strong>(<em>type-safe builders</em>)的, <a href="http://kotlinlang.org/docs/reference/type-safe-builders.html" target="_blank" rel="external">under Type Safe Builders</a>.</p>
<p>他们繁琐的手工编写所有这些扩展, 使用Android SDK的源码中的 <em>android.jar</em> 文件自动生成</p>
<h3 id="可扩展吗"><a href="#可扩展吗" class="headerlink" title="可扩展吗?"></a>可扩展吗?</h3><p>答案是: <strong>yes</strong>.<br>例如. 你可能想使用 <code>MapView</code> 在DSL中.你可以编写下面的代码(kotlin文件中),然后就可已到处使用了<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> ViewManager.<span class="title">mapView</span><span class="params">()</span></span> = mapView &#123;&#125;</div><div class="line"><span class="keyword">public</span> <span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> ViewManager.<span class="title">mapView</span><span class="params">(init: <span class="type">MapView</span>.()</span></span> -&gt; <span class="built_in">Unit</span>): MapView &#123;</div><div class="line">    <span class="keyword">return</span> ankoView(&#123; MapView(it) &#125;, init)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>{ MapView(it) }</code> 是你自定义View的一个工厂方法<code>View</code>. 接受一个 <code>Context</code> .</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">frameLayout &#123;</div><div class="line">    <span class="keyword">val</span> mapView = mapView().lparams(width = matchParent)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果你想创建一个 顶级的 DSL,看<a href="https://github.com/JetBrains/anko/blob/master/doc/ADVANCED.md#extending-anko" target="_blank" rel="external">这里Extending Anko</a>.</p>
<h3 id="使用-Gradle"><a href="#使用-Gradle" class="headerlink" title="使用 Gradle"></a>使用 Gradle</h3><p>这里有个例子 <a href="https://github.com/yanex/anko-template-project" target="_blank" rel="external">template project</a> 展示类如果在Android中Gradle配置.</p>
<p>基本上,你只需要配置  <code>repository</code> 和一个 <code>compile dependency</code>:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    <span class="keyword">compile</span> <span class="string">'org.jetbrains.anko:anko-sdk15:0.7.1'</span> <span class="comment">// sdk19, sdk21, sdk23 are also available</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'org.jetbrains.anko:anko-support-v4:0.7.1'</span> <span class="comment">// In case you need support.v4 bindings</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="当作-Jar-library使用"><a href="#当作-Jar-library使用" class="headerlink" title="当作 Jar library使用"></a>当作 Jar library使用</h3><p>加入你的项目不是基于Gradl, 不需要配置 Maven. 只要添加<a href="https://github.com/JetBrains/anko/releases" target="_blank" rel="external">这里</a> 的jar包即可.</p>
<h3 id="编译-Anko"><a href="#编译-Anko" class="headerlink" title="编译 Anko"></a>编译 Anko</h3><p>如何编译看<a href="https://github.com/JetBrains/anko/blob/master/doc/BUILDING.md" target="_blank" rel="external">under Building</a>.</p>
<h2 id="理解-Anko"><a href="#理解-Anko" class="headerlink" title="理解 Anko"></a>理解 Anko</h2><p>Anko 是使用 <strong>Kotlin</strong>语言编写的.<br>如果不熟悉<strong>Kotlin</strong>看 <a href="http://kotlinlang.org/docs/reference/" target="_blank" rel="external">kotlinlang.org</a>.<br><strong>Kotlin</strong>与Java很类似,所以很容易学.</p>
<h3 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h3><p>Anko中, 你不需要继承其他奇怪的类,只要标准的<code>Activity</code>, <code>Fragment</code>, <code>FragmentActivity</code> 或者其他任意的类</p>
<p>首先, 在使用Anko的DSL的类中导入 <code>org.jetbrains.anko.*</code> .</p>
<p>DSL 可以在 <code>onCreate()</code>中使用:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</div><div class="line">    <span class="keyword">super</span>&lt;Activity&gt;.onCreate(savedInstanceState)</div><div class="line"></div><div class="line">    verticalLayout &#123;</div><div class="line">        padding = dip(<span class="number">30</span>)</div><div class="line">        editText &#123;</div><div class="line">            hint = <span class="string">"Name"</span></div><div class="line">            textSize = <span class="number">24</span>f</div><div class="line">        &#125;</div><div class="line">        editText &#123;</div><div class="line">            hint = <span class="string">"Password"</span></div><div class="line">            textSize = <span class="number">24</span>f</div><div class="line">        &#125;</div><div class="line">        button(<span class="string">"Login"</span>) &#123;</div><div class="line">            textSize = <span class="number">26</span>f</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不需要显示的调用 <code>setContentView(R.layout.something)</code>,  Anko 自动为Activity（只会对Activity）进行 set content view</p>
<p><code>padding</code>, <code>hint</code> 和 <code>textSize</code> 是 <a href="http://kotlinlang.org/docs/reference/extensions.html#extension-properties" target="_blank" rel="external">扩展属性</a>. 大多数 <code>View</code> 具有这些属性，允许使用<code>text = &quot;Some text&quot;</code> 代替 <code>setText(&quot;Some text&quot;)</code>.</p>
<p><code>verticalLayout</code> (一个竖直方向的 <code>LinearLayout</code>), <code>editText</code> 和 <code>button</code> are<br><a href="http://kotlinlang.org/docs/reference/extensions.html" target="_blank" rel="external">扩展函数</a>. 这些函数存在与ANdroid 框架中的大部View中,  <code>Activities</code>, <code>Fragments</code> ( <code>android.support</code> 包中的) 甚至 <code>Context</code>同样适用.</p>
<p>如果有一个 <code>Context</code> 实例, 可以写出下面的DSL结构:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> name = with(myContext) &#123;</div><div class="line">    editText &#123;</div><div class="line">        hint = <span class="string">"Name"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>变量 <code>name</code> 成为了 <code>EditText</code>类型.</p>
<h3 id="Helper-方法"><a href="#Helper-方法" class="headerlink" title="Helper 方法"></a>Helper 方法</h3><p>你可能注意到了，前面章节中  <code>button</code> 方法接了一个字符串参数，这样的Helper方法同样使用与 <code>TextView</code>, <code>EditText</code>, <code>Button</code> ， <code>ImageView</code>.</p>
<p>如果你不需要 <code>View</code> 其他的属性，你可以省略 <code>{}</code> 直接写 <code>button(&quot;Ok&quot;)</code> 或只有 <code>button()</code>:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">verticalLayout &#123;</div><div class="line">    button(<span class="string">"Ok"</span>)</div><div class="line">    button(<span class="string">"Cancel"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Layouts-和-LayoutParams"><a href="#Layouts-和-LayoutParams" class="headerlink" title="Layouts 和 LayoutParams"></a>Layouts 和 LayoutParams</h3><p>在父布局中布局控件可能需要使用 <code>LayoutParams</code>. xml中长这样:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android_layout_marginLeft</span>=<span class="string">"5dip"</span></div><div class="line">    <span class="attr">android_layout_marginTop</span>=<span class="string">"10dip"</span></div><div class="line">    <span class="attr">android:src</span>=<span class="string">"@drawable/something"</span> /&gt;</div></pre></td></tr></table></figure>
<p>Anko中, 在<code>View</code>的后面使用 <code>lparams</code>来实现类似与xml的 <code>LayoutParams</code>。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">linearLayout &#123;</div><div class="line">    button(<span class="string">"Login"</span>) &#123;</div><div class="line">        textSize = <span class="number">26</span>f</div><div class="line">    &#125;.lparams(width = wrapContent) &#123;</div><div class="line">        horizontalMargin = dip(<span class="number">5</span>)</div><div class="line">        topMargin = dip(<span class="number">10</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果指定了 <code>lparams</code>,但是没有指定 <code>width</code> 或者 <code>height</code>, 默认是 <code>WRAP_CONTENT</code>.但是你可以自己通过使用<a href="http://kotlinlang.org/docs/reference/functions.html#named-arguments" target="_blank" rel="external">named arguments</a>指定.</p>
<p>注意下面一些方便的属性:</p>
<ul>
<li><code>horizontalMargin</code> 同时设置 left 和 right margins,</li>
<li><code>verticalMargin</code> 同时设置   top 和 bottom  </li>
<li><code>margin</code> 同时设置4个方向的 margins.</li>
</ul>
<p><strong>注意</strong>  <code>lparams</code> 的使用在不同的布局中是不同的, 例如在 <code>RelativeLayout</code>中:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> ID_OK = <span class="number">1</span></div><div class="line"></div><div class="line">relativeLayout &#123;</div><div class="line">    button(<span class="string">"Ok"</span>) &#123;</div><div class="line">        id = ID_OK</div><div class="line">    &#125;.lparams &#123; alignParentTop() &#125;</div><div class="line"></div><div class="line">    button(<span class="string">"Cancel"</span>).lparams &#123; below(ID_OK) &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Listeners"><a href="#Listeners" class="headerlink" title="Listeners"></a>Listeners</h3><p>设置listeners:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">button(<span class="string">"Login"</span>) &#123;</div><div class="line">    onClick &#123;</div><div class="line">        login(name, password)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下面的效果一样:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">button.setOnClickListener(<span class="keyword">object</span> : OnClickListener &#123;</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onClick</span><span class="params">(v: <span class="type">View</span>)</span></span> &#123;</div><div class="line">        login(name, password)</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>当一个Listener有多个方法时，Anko就显得很方便类. 看下面的代码（没有使用Anko）:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">seekBar.setOnSeekBarChangeListener(<span class="keyword">object</span>: OnSeekBarChangeListener &#123;</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onProgressChanged</span><span class="params">(seekBar: <span class="type">SeekBar</span>, progress: <span class="type">Int</span>, fromUser: <span class="type">Boolean</span>)</span></span> &#123;</div><div class="line">        <span class="comment">// Something</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onStartTrackingTouch</span><span class="params">(seekBar: <span class="type">SeekBar</span>?)</span></span> &#123;</div><div class="line">        <span class="comment">// Just an empty method</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onStopTrackingTouch</span><span class="params">(seekBar: <span class="type">SeekBar</span>)</span></span> &#123;</div><div class="line">        <span class="comment">// Another empty method</span></div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>使用了Anko:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">seekBar &#123;</div><div class="line">    onSeekBarChangeListener &#123;</div><div class="line">        onProgressChanged &#123; seekBar, progress, fromUser -&gt;</div><div class="line">            <span class="comment">// Something</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果你同时设置了<code>onProgressChanged</code> 和 <code>onStartTrackingTouch</code>  , 两个方法将被合并. 对于多个相同的方法，最后的一个有效.</p>
<h3 id="Resources-Colors-和-Dimensions"><a href="#Resources-Colors-和-Dimensions" class="headerlink" title="Resources, Colors 和 Dimensions"></a>Resources, Colors 和 Dimensions</h3><h4 id="Using-resource-identifiers"><a href="#Using-resource-identifiers" class="headerlink" title="Using resource identifiers"></a>Using resource identifiers</h4><p>前面的所有例子直接使用的 Java的字符串，但是大多数时候字符串都是放在  <code>res/values/</code> 目录下，并且是运行时调用的，例如 <code>getString(R.string.login)</code>.</p>
<p>幸运的是，Anko中可以使用以下两个 helper方法 (<code>button(R.string.login)</code>) 和 (<code>button { textResource = R.string.login }</code>).</p>
<p><strong>注意</strong>，这些属性不是 <code>text</code>, <code>hint</code>, <code>image</code>, 而是 <code>textResource</code>, <code>hintResource</code> and <code>imageResource</code>.</p>
<blockquote>
<p>Resource properties always throw <code>AnkoException</code> when read.</p>
</blockquote>
<h4 id="Colors"><a href="#Colors" class="headerlink" title="Colors"></a>Colors</h4><p>两个简单的扩展函数使代码更加易懂。</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0xff0000.opaque</code></td>
<td><span style="color:#ff0000">non-transparent red</span></td>
</tr>
<tr>
<td><code>0x99.gray.opaque</code></td>
<td><span style="color:#999">non-transparent #999999 gray</span></td>
</tr>
</tbody>
</table>
<h4 id="Dimensions"><a href="#Dimensions" class="headerlink" title="Dimensions"></a>Dimensions</h4><p>你可以指定 dimension 的 <strong>dip</strong> (density-independent pixels) 或  <strong>sp</strong> (scale-independent pixels)值: <code>dip(dipValue)</code> 或 <code>sp(spValue)</code>. <strong>注意</strong> <code>textSize</code>属性默认接受<strong>sp</strong> (<code>textSize = 16f</code>). 使用 <code>px2dip</code> 和 <code>px2sp</code> 相互转换.</p>
<h3 id="Instance-shorthands"><a href="#Instance-shorthands" class="headerlink" title="Instance shorthands"></a>Instance shorthands</h3><p>在Activity中，有时你需要传一个 <code>Context</code>实例给一个 Android SDK中的方法，通常你会写 <code>this</code>, 如果在内部类呢?你可能写<code>SomeActivity.this</code> ，如果你使用 <strong>Kotlin</strong>，你只需写 <code>this@SomeActivity</code> ，<br>使用 Anko，你可以只写  <code>ctx</code>. <code>ctx</code>是<code>Activity</code> 和 <code>Service</code> 或者 <code>Fragment</code> (使用的 <code>getActivity()</code> )内部的一个属性. 你也可以使用<code>act</code>扩展属性获取 <code>Activity</code>实例.</p>
<h3 id="UI-wrapper"><a href="#UI-wrapper" class="headerlink" title="UI wrapper"></a>UI wrapper</h3><p>开始使用Anko 之前，将 <code>UI</code> tag 作为 DSL 顶级元素:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">UI &#123;</div><div class="line">    editText &#123;</div><div class="line">        hint = <span class="string">"Name"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这将更易于扩展 DSL ，因为你必须声明一个函数 <code>ViewManager.customView</code>.<br>看这里 <a href="https://github.com/JetBrains/anko/blob/master/doc/ADVANCED.md#extending-anko" target="_blank" rel="external">Extending Anko</a> 获取更多信息.</p>
<h3 id="Include-tag"><a href="#Include-tag" class="headerlink" title="Include tag"></a>Include tag</h3><p>使用 <code>include</code> tag 很容易向 DSL 插入 一个 XML layout ：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">include&lt;View&gt;(R.layout.something) &#123;</div><div class="line">    backgroundColor = Color.RED</div><div class="line">&#125;.lparams(width = matchParent) &#123; margin = dip(<span class="number">12</span>) &#125;</div></pre></td></tr></table></figure>
<p>通常可以使用 <code>lparams</code> ， 如果类型不是 <code>View</code>,仍然可以用 <code>{}</code>:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">include&lt;TextView&gt;(R.layout.textfield) &#123;</div><div class="line">    text = <span class="string">"Hello, world!"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Styles"><a href="#Styles" class="headerlink" title="Styles"></a>Styles</h3><p>Anko 支持 styling: <code>style</code> 是一个简单的函数，接受一个<code>View</code>, 效果作用于这个 <code>View</code> , 并且当这个<code>View</code> 是一个<code>ViewGroup</code> 时，可以可以递归的作用与 这个View的 child View:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">verticalLayout &#123;</div><div class="line">    editText &#123;</div><div class="line">        hint = <span class="string">"Name"</span></div><div class="line">    &#125;</div><div class="line">    editText &#123;</div><div class="line">        hint = <span class="string">"Password"</span></div><div class="line">    &#125;</div><div class="line">&#125;.style &#123; view -&gt; <span class="keyword">when</span>(view) &#123;</div><div class="line">    <span class="keyword">is</span> EditText -&gt; view.textSize = <span class="number">20</span>f</div><div class="line">&#125;&#125;</div></pre></td></tr></table></figure>
<hr>
<p><a href="http://kotlinlang.org" target="_blank" rel="external"><img src="http://file.bmob.cn/M02/32/C5/oYYBAFYnaXGAU36mAAA-AHHYR0Y038.png" alt=""></a></p>
<hr>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-Ubuntu下开发Android配置流程" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/15/Ubuntu下开发Android配置流程/">Ubuntu下开发Android配置流程</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="安装Ubuntu-12-04"><a href="#安装Ubuntu-12-04" class="headerlink" title="安装Ubuntu 12.04"></a>安装Ubuntu 12.04</h1><ol>
<li>使用USBwriterU盘写入镜像，安装</li>
<li>安装时分区/：20G swap：8G /home：20G</li>
<li>安装完成后首先本地拨号 DSL，用户名，密码</li>
<li>软件与更新 -&gt; 选择软件源163的, 附加驱动，使用博通bcm的无线驱动，显卡驱动选择Video…-fglrx-update(专有)</li>
<li><p><a href="https://github.com/shadowsocks/shadowsocks/wiki">shadowsocks</a>的<a href="www.8dlive.com/post/168.html">下载与配置</a><br>注意可在 &gt;= 14.04 安装 qt5<br>(sudo pip install shadowsocks)</p>
      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-FTI们在使用的开源库" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/27/FTI们在使用的开源库/">FTI们在使用的开源库</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>转载请注明出处 <a href="http://blog.csdn.net/hpu_zyh/article/details/48769703" target="_blank" rel="external">http://blog.csdn.net/hpu_zyh/article/details/48769703</a></p>
</blockquote>
<h2 id="Instagram"><a href="#Instagram" class="headerlink" title="Instagram"></a>Instagram</h2><p><a href="https://github.com/ACRA/acra" target="_blank" rel="external">ACRA</a></p>
<p><a href="https://github.com/loopj/android-async-http" target="_blank" rel="external">android-async-http</a></p>
<p><a href="https://github.com/JakeWharton/DiskLruCache" target="_blank" rel="external">DiskLruCache</a></p>
<p><a href="">Foursquared</a></p>
<p><a href="https://github.com/FasterXML/jackson-annotations" target="_blank" rel="external">jackson-annotations</a></p>
<p><a href="https://github.com/FasterXML/jackson-core" target="_blank" rel="external">jackson-core</a></p>
<p><a href="https://github.com/FasterXML/jackson-databind" target="_blank" rel="external">jackson-databind</a></p>
<p><a href="https://github.com/facebook/rebound" target="_blank" rel="external">rebound</a></p>
<p><a href="https://github.com/mttkay/signpost" target="_blank" rel="external">signpost</a></p>
<p><a href="https://github.com/code4craft/webmagic" target="_blank" rel="external">webm</a></p>
<p><a href="">XML Pull Parser</a></p>
<p><a href="https://github.com/sannies/mp4parser" target="_blank" rel="external">mp4parser</a></p>
<h2 id="Twitter"><a href="#Twitter" class="headerlink" title="Twitter"></a>Twitter</h2><p>Apache Software</p>
<p>FoundationApache</p>
<p>ThriftAndroid Open Source Project</p>
<p>Bouncy Castle Crypto (via Spongy Castle)</p>
<p>Chris Banes</p>
<p><a href="https://github.com/google/ExoPlayer" target="_blank" rel="external">ExoPlayer</a></p>
<p><a href="https://github.com/google/gcm" target="_blank" rel="external">Google Cloud Messaging</a></p>
<p><a href="https://github.com/googlei18n/libphonenumber" target="_blank" rel="external">Google libphonenumber</a></p>
<p><a href="https://github.com/FasterXML/jackson" target="_blank" rel="external">Jackson</a> Java JSON-processor Core</p>
<p><a href="https://github.com/bluelinelabs/LoganSquare" target="_blank" rel="external">LoganSquare</a></p>
<p><a href="https://github.com/square/okhttp" target="_blank" rel="external">OkHttp</a></p>
<p><a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="external">RxJava</a></p>
<p><a href="https://github.com/ReactiveX/RxAndroid" target="_blank" rel="external">RxAndroid</a></p>
<p><a href="https://github.com/qos-ch/slf4j" target="_blank" rel="external">SLF4J</a></p>
<p>Vandal Software, LLC</p>
<p><a href="https://github.com/etsy/AndroidStaggeredGrid" target="_blank" rel="external">AndroidStaggeredGridView</a></p>
<p><a href="https://github.com/JakeWharton/ViewPagerIndicator" target="_blank" rel="external">ViewPagerIndicator</a></p>
<h2 id="facebook"><a href="#facebook" class="headerlink" title="facebook"></a>facebook</h2><p>ACE</p>
<p>achartengine</p>
<p>ACRA</p>
<p>actionbar-pulltorefresh</p>
<p>ActionBarSherloc</p>
<p>AES block cipher</p>
<p>android-async-http</p>
<p>android-circlebutton</p>
<p>android-gif-drawable</p>
<p>android-support-v4-perferencefragment</p>
<p>Android Open Source Project</p>
<p>android websockets</p>
<p>antlr<br>Apache Commons Codec</p>
<p>Apache Commons Exec</p>
<p>Apache Commons Lang</p>
<p>Apache Commons Logging</p>
<p>Apache Commons Math</p>
<p>Apache Harmony</p>
<p>Apache httpminme</p>
<p>Apache JAMES Mime4J</p>
<p>Apache Lucene</p>
<p>Apache Thrift</p>
<p>Apache HttpComments Client</p>
<p>Apache HttpComments Core</p>
<p>appirater</p>
<p>apps-for-android</p>
<p>ASM</p>
<p>assertj</p>
<p>atinject</p>
<p>base64coer</p>
<p>bitvect</p>
<p>Boost</p>
<p>bsdiff</p>
<p>c-ares</p>
<p>Code Generation Library(cglib)</p>
<p>chromecast-java-api</p>
<p>chrometophone</p>
<p>chromimum</p>
<p>commons-cli</p>
<p>custommenu</p>
<p>cwac-camera</p>
<p>cwac-touchlist</p>
<p>dagger</p>
<p>dependency-shot</p>
<p>dex-method-counts</p>
<p>DisLruCache</p>
<p>djinni</p>
<p>dnsjava</p>
<p>double-conversion</p>
<p>DynamicGrid<br>ejs</p>
<p>encode</p>
<p>ExoPlayer</p>
<p>expat</p>
<p>ffmpeg</p>
<p>FFT by mark Oleson</p>
<p>FFT by Takuya Ooura</p>
<p>flatbuffers<br>getRoundedCornerBitmap</p>
<p>giflib<br>Google Breakpad</p>
<p>google-gson</p>
<p>google-guice<br>JetBrains Grammar-Kit</p>
<p>guava-libraries</p>
<p>gyp<br>Hamcrest</p>
<p>horizontal-listview</p>
<p>http-parser<br>icu4j</p>
<p>ieeehalfprecision</p>
<p>ImageViewZoom<br>intellij-community</p>
<p>Jackson Core<br>Jackson Annotations</p>
<p>Jackson Databind</p>
<p>JacksonForSmile</p>
<p>JacksonDatatypeGuava</p>
<p>java-diff-utils</p>
<p>java-websocket</p>
<p>javawriter</p>
<p>jcodec</p>
<p>joda-time</p>
<p>json-simple</p>
<p>JSON-java</p>
<p>JSONPath<br>jsr-305</p>
<p>libevent</p>
<p>libjingle</p>
<p>libjpeg-turbo</p>
<p>libjpeg</p>
<p>libphonenumber</p>
<p>libpng</p>
<p>libsrtp</p>
<p>libuuid<br>…</p>
<h2 id="Slack"><a href="#Slack" class="headerlink" title="Slack"></a>Slack</h2><p><a href="https://github.com/tongcpp/PullToRefresh-PinnedSection-ListView" target="_blank" rel="external">PinnedSectionListView</a></p>
<p>HybiParser</p>
<p>FloatLabelLayout</p>
<p>Mixpanel</p>
<p><a href="https://github.com/google/guava" target="_blank" rel="external">Guava</a></p>
<p><a href="https://github.com/JodaOrg/joda-time" target="_blank" rel="external">Joda-Time</a></p>
<p><a href="https://github.com/square/dagger" target="_blank" rel="external">Dagger</a></p>
<p><a href="https://github.com/JakeWharton/butterknife" target="_blank" rel="external">Butterknife</a></p>
<p><a href="https://github.com/square/otto" target="_blank" rel="external">Otto</a></p>
<p><a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="external">RxJava</a></p>
<p><a href="https://github.com/ReactiveX/RxAndroid" target="_blank" rel="external">RxAndroid</a></p>
<p><a href="https://github.com/JakeWharton/timber" target="_blank" rel="external">Timber</a></p>
<p><a href="https://github.com/square/picasso" target="_blank" rel="external">Picasso</a></p>
<p><a href="https://github.com/google/gson" target="_blank" rel="external">Gson</a></p>
<p><a href="https://github.com/square/okhttp" target="_blank" rel="external">OkHttp</a></p>
<p><a href="https://github.com/square/okio" target="_blank" rel="external">Okio</a></p>
<p><a href="https://github.com/Flipboard/bottomsheet" target="_blank" rel="external">BottomSheet</a></p>
<p><a href="https://github.com/chrisjenx/Calligraphy" target="_blank" rel="external">Calligraphy</a></p>
<p><a href="https://github.com/chrisbanes/PhotoView" target="_blank" rel="external">PhotoView</a></p>
<p><a href="https://github.com/makovkastar/FloatingActionButton" target="_blank" rel="external">FloatingActionButton</a></p>
<p><a href="https://github.com/splitwise/TokenAutoComplete" target="_blank" rel="external">TokenAutoComplete</a></p>
<h2 id="Quip"><a href="#Quip" class="headerlink" title="Quip"></a>Quip</h2><h2 id="Trello"><a href="#Trello" class="headerlink" title="Trello"></a>Trello</h2><h2 id="Tumblr-网站和应用程序版权信息"><a href="#Tumblr-网站和应用程序版权信息" class="headerlink" title="Tumblr 网站和应用程序版权信息"></a>Tumblr 网站和应用程序版权信息</h2><p>Tumblr’s web and mobile applications (including but not limited to iOS, Android, and Windows Mobile) are Copyright (c) 2015, Tumblr, Inc. All Rights Reserved.</p>
<p>Tumblr’s web and mobile applications use “open source” components. You can find the source code of these open source projects, along with applicable license information, below. We are deeply grateful to these developers for their work and contributions.</p>
<p>ActionBar-PullToRefresh</p>
<p>Copyright (c) 2013 Chris Banes<br>Project: <a href="https://github.com/chrisbanes/ActionBar-PullToRefresh" target="_blank" rel="external">https://github.com/chrisbanes/ActionBar-PullToRefresh</a><br>License: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="external">http://www.apache.org/licenses/LICENSE-2.0</a><br>Android PullToRefresh</p>
<p>Copyright (c) 2011-2012 Chris Banes<br>Project: <a href="https://github.com/chrisbanes/Android-PullToRefresh" target="_blank" rel="external">https://github.com/chrisbanes/Android-PullToRefresh</a><br>License: <a href="https://github.com/chrisbanes/Android-PullToRefresh/blob/master/LICENSE" target="_blank" rel="external">https://github.com/chrisbanes/Android-PullToRefresh/blob/master/LICENSE</a><br>Android SDK</p>
<p>Copyright (c) 2014 Google Inc. All Rights Reserved.<br>Project: <a href="http://source.android.com/" target="_blank" rel="external">http://source.android.com/</a><br>License: <a href="http://source.android.com/source/licenses.html" target="_blank" rel="external">http://source.android.com/source/licenses.html</a>; see also <a href="http://developer.android.com/sdk/terms.html" target="_blank" rel="external">http://developer.android.com/sdk/terms.html</a><br>Apache HTTP MIME</p>
<p>Copyright (c) 1999-2014 The Apache Software Foundation. All Rights Reserved.<br>Project: <a href="http://hc.apache.org/httpcomponents-client-ga/httpmime/" target="_blank" rel="external">http://hc.apache.org/httpcomponents-client-ga/httpmime/</a><br>License: <a href="http://www.apache.org/licenses/" target="_blank" rel="external">http://www.apache.org/licenses/</a><br>Apache Pool Component</p>
<p>Copyright (c) 2001-2014 The Apache Software Foundation. All Rights Reserved.<br>Project: <a href="http://commons.apache.org/proper/commons-pool/" target="_blank" rel="external">http://commons.apache.org/proper/commons-pool/</a><br>License: <a href="http://www.apache.org/licenses/" target="_blank" rel="external">http://www.apache.org/licenses/</a><br>DiskLruCache</p>
<p>Copyright (c) 2012 Jake Wharton<br>Copyright (c) 2011 The Android Open Source Project<br>Project: <a href="https://github.com/JakeWharton/DiskLruCache" target="_blank" rel="external">https://github.com/JakeWharton/DiskLruCache</a><br>License: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="external">http://www.apache.org/licenses/LICENSE-2.0</a><br>Nine Old Androids</p>
<p>Copyright (c) 2012 Jake Wharton<br>Project: <a href="http://nineoldandroids.com/" target="_blank" rel="external">http://nineoldandroids.com/</a><br>License: <a href="http://www.apache.org/licenses/" target="_blank" rel="external">http://www.apache.org/licenses/</a><br>Rebound</p>
<p>Copyright (c) 2013, Facebook, Inc. All rights reserved.<br>Project: <a href="http://facebook.github.io/rebound/" target="_blank" rel="external">http://facebook.github.io/rebound/</a><br>License: <a href="https://github.com/facebook/rebound/blob/master/LICENSE" target="_blank" rel="external">https://github.com/facebook/rebound/blob/master/LICENSE</a><br>Signpost</p>
<p>Copyright (c) 2012 Takahiro Horikawa, Matthias Kaepp, and contributors.<br>Project: <a href="https://code.google.com/p/oauth-signpost/" target="_blank" rel="external">https://code.google.com/p/oauth-signpost/</a><br>License: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="external">http://www.apache.org/licenses/LICENSE-2.0</a><br>SmoothProgressBar</p>
<p>Copyright (c) 2014 Antoine Merle<br>Project: <a href="https://github.com/castorflex/SmoothProgressBar" target="_blank" rel="external">https://github.com/castorflex/SmoothProgressBar</a><br>License: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="external">http://www.apache.org/licenses/LICENSE-2.0</a><br>StickyListHeaders</p>
<p>Copyright (c) 2012 Emil Sjölander<br>Project: <a href="https://github.com/emilsjolander/StickyListHeaders" target="_blank" rel="external">https://github.com/emilsjolander/StickyListHeaders</a><br>License: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="external">http://www.apache.org/licenses/LICENSE-2.0</a><br>ViewPagerIndicator</p>
<p>Copyright (c) 2012 Jake Wharton<br>Copyright (c) 2011 Patrik Åkerfeldt<br>Copyright (c) 2011 Francisco Figueiredo Jr.<br>Project: <a href="https://github.com/JakeWharton/Android-ViewPagerIndicator" target="_blank" rel="external">https://github.com/JakeWharton/Android-ViewPagerIndicator</a><br>License: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="external">http://www.apache.org/licenses/LICENSE-2.0</a><br>Volley</p>
<p>Copyright (c) 2011 The Android Open Source Project<br>Project: <a href="https://android.googlesource.com/platform/frameworks/volley/" target="_blank" rel="external">https://android.googlesource.com/platform/frameworks/volley/</a><br>License: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="external">http://www.apache.org/licenses/LICENSE-2.0</a><br>Butter Knife</p>
<p>Copyright (c) 2013 Jake Wharton<br>Project: <a href="https://github.com/JakeWharton/butterknife" target="_blank" rel="external">https://github.com/JakeWharton/butterknife</a><br>License: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="external">http://www.apache.org/licenses/LICENSE-2.0</a><br>Leak Canary</p>
<p>Copyright (c) 2015 Square, Inc<br>Project: <a href="https://github.com/square/leakcanary" target="_blank" rel="external">https://github.com/square/leakcanary</a><br>License: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="external">http://www.apache.org/licenses/LICENSE-2.0</a><br>ExoPlayer</p>
<p>Copyright (c) 2015 Google, Inc<br>Project: <a href="https://google.github.io/ExoPlayer/index.html" target="_blank" rel="external">https://google.github.io/ExoPlayer/index.html</a><br>License: <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="external">http://www.apache.org/licenses/LICENSE-2.0</a></p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-Gradle_in_Android_Studio_(3)_-_项目中的Gradle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/14/Gradle_in_Android_Studio_(3)_-_项目中的Gradle/">Gradle in Android Studio (3) - 项目中的Gradle</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Gradle in Android Studio</p>
<blockquote>
<p>转载请注明出处 :  <a href="http://blog.csdn.net/hpu_zyh/article/details/48447539" target="_blank" rel="external">http://blog.csdn.net/hpu_zyh/article/details/48447539</a><br><a href="http://blog.csdn.net/hpu_zyh" target="_blank" rel="external">博客主页</a>  |   <a href="http://www.jianshu.com/users/3e9f552e6ba7" target="_blank" rel="external">简书</a>  |  <a href="http://www.zhihu.com/people/yuhan-zhang-36" target="_blank" rel="external">知乎</a>  |  <a href="http://weibo.com/u/2359002991" target="_blank" rel="external">微博</a>  |  <a href="https://github.com/hanks-zyh" target="_blank" rel="external">github</a></p>
</blockquote>
<hr>
<p><a href="https://www.youtube.com/watch?v=cD7NPxuuXYY" target="_blank" rel="external"><img src="http://gradle.wpengine.netdna-cdn.com/wp-content/uploads/2015/03/GradleLogoReg.png" alt=""></a></p>
<p>Gradle (<strong>谷瑞豆</strong>) <a href="http://gradle.org/" target="_blank" rel="external">官网</a>,  点击上面图片看Google官方视频 <strong>Introducing Gradle (Ep 2, Android Studio)</strong> in Youtube<br><a href="http://blog.csdn.net/hpu_zyh/article/details/47430623" target="_blank" rel="external">来自Gradle的hello world</a></p>
<p>##Android Studio中的Gradle<br>当创建一个项目后,Android studio 会自动创建以下的目录<br><img src="http://img.blog.csdn.net/20150914214416965" alt="这里写图片描述"><br>一般情况下,我们只修改<code>app</code> moudle下的build.gradle即可满足使用</p>
<p>android studio 目录结构<br><img src="http://img.blog.csdn.net/20150914214430893" alt="这里写图片描述"></p>
<p>##库管理机制</p>
<p>当创建一个项目时,生成以下的基本信息: <code>app/build.gradle</code><br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.application'</span></div><div class="line"></div><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">22</span>             <span class="comment">// 这里需要按照自己本机下载的版本填写, 如果本机没有下载,会报错</span></div><div class="line">    buildToolsVersion <span class="string">"23.0.0 rc2"</span>   <span class="comment">// Error:failed to find target android-22 : E:\android-sdk</span></div><div class="line"></div><div class="line">    defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"hanks.com.myapplication"</span> <span class="comment">//应用包名</span></div><div class="line">        minSdkVersion <span class="number">15</span>                        </div><div class="line">        targetSdkVersion <span class="number">22</span>                     </div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line">    &#125;</div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            minifyEnabled <span class="keyword">false</span></div><div class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">dependencies</span> &#123; <span class="comment">//库依赖</span></div><div class="line">    <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>]) <span class="comment">//引用本地的libs目录下的所以jar包</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:appcompat-v7:22.2.0'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>当需要添加一些第三方库时, 直接在<code>dependencies</code>添加引用<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    <span class="comment">// Google Play Services</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.google.android.gms:play-services:7.8.0'</span></div><div class="line"></div><div class="line">    <span class="comment">// Support Libraries</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:appcompat-v7:23.0.0'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:cardview-v7:23.0.0'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:design:23.0.0'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:gridlayout-v7:23.0.0'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:leanback-v17:23.0.0'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:mediarouter-v7:23.0.0'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:palette-v7:23.0.0'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:recyclerview-v7:23.0.0'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:support-annotations:23.0.0'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:support-v13:23.0.0'</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:support-v4:23.0.0'</span></div><div class="line"></div><div class="line">    <span class="comment">// <span class="doctag">Note:</span> these libraries require the "Google Repository" and "Android Repository"</span></div><div class="line">    <span class="comment">//       to be installed via the SDK manager.</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>添加引用后,Android Studio会提示我们<code>Sync</code>, 然后会自动从远程库中下载我们引用的库文件,本地已经缓存过的话会直接引用本地的,而不用下载</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">compile</span> files(<span class="string">'libs/gson-2.3.1.jar'</span>)                <span class="comment">//引用单个jar</span></div><div class="line">-------------------------------------------------------------------------------</div><div class="line"><span class="keyword">compile</span> <span class="keyword">fileTree</span>(<span class="keyword">include</span>: [<span class="string">'*.jar'</span>], dir: <span class="string">'libs'</span>)   <span class="comment">// 引用libs下的全部jar</span></div><div class="line">-------------------------------------------------------------------------------</div><div class="line"><span class="keyword">compile</span> <span class="keyword">project</span>(<span class="string">':library:mylibrary'</span>)               <span class="comment">// 引用library目录下的mylibrary</span></div></pre></td></tr></table></figure>
<p><a href="http://gradleplease.appspot.com" target="_blank" rel="external">查找Gradle依赖库的网站</a></p>
<p>可以通过<code>Android Studio</code>来添加引用, 比如引用 <code>recyclerview-v7</code><br><img src="http://img.blog.csdn.net/20150914212642484" alt="这里写图片描述"></p>
<p>使用<code>Gradle</code>来管理库,比以前引用<code>.jar</code>(只包含Java Code)方便的多,也不用到处复制库文件, 并且直接使用<code>Gradle</code>可以直接引用<code>aar</code>(包含库文件的Java Code, Resource, Assets, AndroidMenifest.xml)</p>
<p>##打包多个APK</p>
<p>利用Gradle的灵活性,你可以为同一个项目来配置,创建不同的版本, 默认有<code>debug</code>和<code>release</code>两种编译类型<br><strong>build variants</strong><br><img src="http://img.blog.csdn.net/20150914214312690" alt="这里写图片描述"></p>
<p><strong>product flavors</strong><br><img src="http://img.blog.csdn.net/20150914214329781" alt="这里写图片描述"></p>
<p>代码<br><img src="http://img.blog.csdn.net/20150914214350421" alt="这里写图片描述"></p>
<p>##MyApplication/build.gradle<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Top-level build file where you can add configuration options common to all sub-projects/modules.</span></div><div class="line"></div><div class="line"><span class="keyword">buildscript</span> &#123;</div><div class="line">    <span class="keyword">repositories</span> &#123;</div><div class="line">        jcenter()</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">dependencies</span> &#123;</div><div class="line">        <span class="keyword">classpath</span> <span class="string">'com.android.tools.build:gradle:1.2.3'</span></div><div class="line"></div><div class="line">        <span class="comment">// <span class="doctag">NOTE:</span> Do not place your application dependencies here; they belong</span></div><div class="line">        <span class="comment">// in the individual module build.gradle files</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">allprojects</span> &#123;</div><div class="line">    <span class="keyword">repositories</span> &#123;</div><div class="line">        jcenter()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>jcenter</code>远程仓库默认是<code>https</code>的,当使用代理时可能会在下载远程库时出现<code>Error:Cause: peer not authenticated</code>, 解决方案是 使用<code>http</code>代替 <code>https</code></p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">buildscript</span> &#123;</div><div class="line">    <span class="keyword">repositories</span> &#123;</div><div class="line">        jcenter&#123;</div><div class="line">            url <span class="string">"http://jcenter.bintray.com"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">dependencies</span> &#123;</div><div class="line">        <span class="keyword">classpath</span> <span class="string">'com.android.tools.build:gradle:1.2.3'</span></div><div class="line"></div><div class="line">        <span class="comment">// <span class="doctag">NOTE:</span> Do not place your application dependencies here; they belong</span></div><div class="line">        <span class="comment">// in the individual module build.gradle files</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>gradle下载报同样的错, 以下解决方案<br><img src="http://img.blog.csdn.net/20150914214506277" alt="这里写图片描述"></p>
<h2 id="settings-gradle"><a href="#settings-gradle" class="headerlink" title="settings.gradle"></a>settings.gradle</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">include</span> <span class="string">':app'</span></div></pre></td></tr></table></figure>
<p>当我们创建一个library时<br><img src="http://img.blog.csdn.net/20150914214441505" alt="这里写图片描述"><br>移动mylibrary目录后<br><img src="http://img.blog.csdn.net/20150914214454418" alt="这里写图片描述"></p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-Gradle_in_Android_Studio_(2)_-_配置Gradle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/14/Gradle_in_Android_Studio_(2)_-_配置Gradle/">Gradle in Android Studio (2) - 配置Gradle</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#配置Gradle</p>
<blockquote>
<p>来自<a href="https://developer.android.com/intl/zh-cn/tools/building/configuring-gradle.html#workBuildVariants" target="_blank" rel="external">AndroidDevelopers</a></p>
<p>转载请注明出处 :  <a href="http://blog.csdn.net/hpu_zyh/article/details/48447255" target="_blank" rel="external">http://blog.csdn.net/hpu_zyh/article/details/48447255</a><br><a href="http://blog.csdn.net/hpu_zyh" target="_blank" rel="external">博客主页</a>  |   <a href="http://www.jianshu.com/users/3e9f552e6ba7" target="_blank" rel="external">简书</a>  |  <a href="http://www.zhihu.com/people/yuhan-zhang-36" target="_blank" rel="external">知乎</a>  |  <a href="http://weibo.com/u/2359002991" target="_blank" rel="external">微博</a>  |  <a href="https://github.com/hanks-zyh" target="_blank" rel="external">github</a></p>
</blockquote>
<p>##建立基本配置<br>Android Studio创建的<code>project</code>包含一个顶级构建文件(build.gradle), 并且每个<code>module</code>都包含一个构建文件(build.gradle)。他们是纯文本文件,使用<strong>Groovy</strong>的语法来配置构建,使用Android的Gradle插件生成。在大多数情况下，你只需要修改<code>module</code>下的<code>build.gradle</code>。例如，在BuildSystemExample项目中的<code>module</code>的<code>build.gradle</code>如下所示：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.application'</span></div><div class="line"></div><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">19</span></div><div class="line">    buildToolsVersion <span class="string">"19.0.0"</span></div><div class="line"></div><div class="line">    defaultConfig &#123;</div><div class="line">        minSdkVersion <span class="number">8</span></div><div class="line">        targetSdkVersion <span class="number">19</span></div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line">    &#125;</div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            minifyEnabled <span class="keyword">true</span></div><div class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    <span class="keyword">compile</span> <span class="keyword">project</span>(<span class="string">":lib"</span>)</div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:appcompat-v7:19.0.1'</span></div><div class="line">    <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>])</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>apply plugin: &#39;com.android.application&#39;</code>表示将<code>Android plugin for Gradle</code>应用到编译。这增加了Android的特定的构建任务，以顶级的构建任务，使得<code>Android {...}</code>提供给指定的Android特定的构建选项元素。</p>
<p><code>android {...}</code>配置所有的Android特定的构建选项：</p>
<ul>
<li><code>compileSdkVersion</code> 用来编译的sdk的版本。</li>
<li><code>buildToolsVersion</code> 使用什么版本的编译工具。使用<code>SDK Manager</code>安装多个版本的编译工具。</li>
</ul>
<blockquote>
<p>注：请始终使用其主要版本号 &gt;= 您的编译目标和目标SDK的构建工具版本。</p>
</blockquote>
<ul>
<li><code>defaultConfig</code>配置的清单文件（AndroidManifest.xml）的一些设置。<code>defaultConfig</code>的配置将覆盖<code>AndroidManifest.xml</code>中的设置。<br><code>defaultConfig</code>元素指定的配置适用于所有的版本(<strong>build variants</strong>)，除非一个<code>build variants</code>的配置将覆盖一些值。</li>
<li><code>buildTypes</code>元素控制如何构建和打包应用程序。默认情况下，构建系统定义了两种版本类型：<code>debug</code>和<code>release</code>。<code>debug</code>类型包括debug标示，并且使用debug key密钥来进行签名。<code>release</code>类型默认情况下没有签名。在这个例子中，<code>release</code>版本使用<code>ProGuard</code>。</li>
<li><code>dependenceies</code>元素在<code>android</code>元素之外，Android的元素之后。此元素为依赖模块。后面章节介绍。</li>
</ul>
<blockquote>
<p>注意：当<code>build.gradle</code>文件有改动时，Android Studio需要同步构建配置。点击Android Studio黄色通知栏上的<code>SyncNow</code>。</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20150914213623929" alt="这里写图片描述"></p>
<p>##声明依赖</p>
<p>在这个例子中的<code>app</code>module声明了三个依赖：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    <span class="comment">// Module dependency</span></div><div class="line">    <span class="keyword">compile</span> <span class="keyword">project</span>(<span class="string">":lib"</span>)</div><div class="line"></div><div class="line">    <span class="comment">// Remote binary dependency</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:appcompat-v7:19.0.1'</span></div><div class="line"></div><div class="line">    <span class="comment">// Local binary dependency</span></div><div class="line">    <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>])</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>每个这些相关性进行说明。构建系统将所有编译依赖于编译类路径，并将它们包含在最终方案。</p>
<p>###模块依赖<br><code>app</code>模块依赖<code>lib</code>模块, <code>compile project(&quot;:lib&quot;)</code> 声明了BuildSystemExample对lib模块的依赖关系。当您生成应用程序模块，构建系统装配，包括lib模块。</p>
<p>###远程库依赖<br>该<code>app</code>程序和<code>lib</code>模块从Android支持库都使用<code>ActionBarActivity</code>类，所以这些模块依赖于它。<br>编译<code>com.android.support:appcompat-v7:19.0.1</code>通过指定的Maven声明对<code>Android Support Library</code>的19.0.1版本的依赖。 如果你的SDK安装没有这个包，下载并使用SDK管理器进行安装。</p>
<p>AndroidStudio为默认使用Maven的中央仓库项目。 （该配置被包括在顶层构建文件）。</p>
<p>###本地库依赖</p>
<p>如果您有需要本地库依赖模块，JAR文件，这些依赖关系复制到<code>&lt;moduleName&gt;/libs</code>中。<br><code>compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])</code>告诉构建系统依赖  <code>app/libs</code>的所有JAR文件，应该包含在编译类路径，并在最后的封装。</p>
<p>详细信息，请参见<a href="http://www.gradle.org/docs/current/userguide/artifact_dependencies_tutorial.html" target="_blank" rel="external"> Dependency Management Basics</a>用户指南中。</p>
<p>##运行ProGuard</p>
<p>构建系统可以在构建过程中运行ProGuard混淆你的类。在BuildSystemExample，修改生成文件的应用程序模块运行的ProGuard的发布版本：<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="params">...</span></div><div class="line">android &#123;</div><div class="line">    <span class="params">...</span></div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            minifyEnabled <span class="literal">true</span></div><div class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="params">...</span></div></pre></td></tr></table></figure></p>
<p><code>getDefaultProguardFile(&#39;proguard-android.txt&#39;)</code>获得从Android SDK安装的默认ProGuard的设置。 AndroidStudio 增加了模块特定的规则文件proguard-rules.pro的模块，在这里你可以添加自定义的ProGuard规则的根源。</p>
<p>##对包装标识应用程序ID</p>
<p>构建系统的<code>applicationID</code>属性是用来唯一标识应用程序包进行发布。应用程序ID设置在build.gradle文件的Andr​​oid的部分。<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">apply</span> plugin: <span class="string">'com.android.application'</span></div><div class="line"></div><div class="line">   android &#123;</div><div class="line">       <span class="attribute">compileSdkVersion</span> <span class="number">19</span></div><div class="line">       buildToolsVersion <span class="string">"19.1"</span></div><div class="line"></div><div class="line">   defaultConfig &#123;</div><div class="line">       <span class="attribute">applicationId</span> <span class="string">"com.example.my.app"</span></div><div class="line">       minSdkVersion <span class="number">15</span></div><div class="line">       targetSdkVersion <span class="number">19</span></div><div class="line">       versionCode <span class="number">1</span></div><div class="line">       versionName <span class="string">"1.0"</span></div><div class="line">   &#125;</div><div class="line">   ...</div></pre></td></tr></table></figure></p>
<blockquote>
<p>注意：的applicationID仅指定在build.gradle文件，而不是在AndroidManifest.xml文件。</p>
</blockquote>
<p>当使用<code>build variants</code>，构建系统为每个<code>product flavors</code>指定的build types生成不同的后缀ID。<br> <figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="section">productFlavors</span> &#123;</div><div class="line">     <span class="section">pro</span> &#123;</div><div class="line">         <span class="attribute">applicationId</span> = <span class="string">"com.example.my.pkg.pro"</span></div><div class="line">     &#125;</div><div class="line">     free &#123;</div><div class="line">         <span class="attribute">applicationId</span> = <span class="string">"com.example.my.pkg.free"</span></div><div class="line">     &#125;</div><div class="line"> &#125;</div><div class="line"></div><div class="line"> buildTypes &#123;</div><div class="line">     <span class="section">debug</span> &#123;</div><div class="line">         <span class="attribute">applicationIdSuffix</span> <span class="string">".debug"</span></div><div class="line">     &#125;</div><div class="line"> &#125;</div><div class="line"> ....</div></pre></td></tr></table></figure></p>
<p>包名必须在manifest文件中指定。这是用在你的源代码来引用您的<code>R</code>文件，并解决任何相关<code>activity</code> <code>service</code>的注册。<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">package</span>=<span class="string">"com.example.app"</span>&gt;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>注意：如果有多个清单（例如，<code>product flavors</code>为某个build type配置了不同的manifest），包名是可选的体现。如果在这些清单规定，包的名称必须与在清单在<code>src/main/</code>文件夹中指定的包名。</p>
</blockquote>
<p>有关构建文件详细信息，请参阅<a href="http://blog.csdn.net/hpu_zyh/article/details/48447081" target="_blank" rel="external">构建系统</a>概述。</p>
<p>##配置签名设置</p>
<p><code>debug</code>和<code>release</code>版本不同的应用程序是否能够在安全设备，以及如何将APK进行签名进行调试。构建系统签署的调试版本使用已知的凭据，以避免密码提示在构建时默认密钥和证书。构建系统没有签字的发行版，除非你明确地定义了签约配置此版本。如果您还没有<code>release</code>版本的key，你可以生成一个,参考<a href="https://developer.android.com/tools/publishing/app-signing.html" target="_blank" rel="external">Signing your Applications</a>。</p>
<p>##使用<strong>build variants</strong><br>本节将介绍 构建系统帮助你从一个单一的项目中创建不同的版本。如果你有一个演示版本,有付费版本，你要在<code>Google Paly</code>针对不同的设备分发多个APK,这个很有用。</p>
<p>构建系统使用 <code>product flavors</code>来创建的不同的产品版本。您的应用程序的每一个产品版本可以有不同的功能或设备的要求。构建系统还使用<code>build type</code>构建和打包不同的设置到不同的版本。每个<code>product flavor</code>和<code>build type</code>组合形成一个构建变量。编译系统会生成不同的APK版本。</p>
<p>###<strong>Build variants</strong></p>
<p>这个例子项目包括两个默认生成（debug和release）和两个类型（demo和full）的。要了解有关构建变种高级应用的详细信息，请参阅<a href="#">构建系统</a>概述。</p>
<p>####<strong>Product flavors</strong></p>
<p>要创建您的应用程序不同的产品版本：</p>
<ol>
<li>在<code>build.gradle</code>文件中定义<code>product flavors</code></li>
<li>为每个<code>flavors</code>添加不同的设置。</li>
<li>添加香精的具体来源，您的项目。</li>
</ol>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="class">android </span>&#123;</div><div class="line">    ...</div><div class="line">    <span class="class">defaultConfig </span>&#123; ... &#125;</div><div class="line">    <span class="class">signingConfigs </span>&#123; ... &#125;</div><div class="line">    <span class="class">buildTypes </span>&#123; ... &#125;</div><div class="line">    <span class="class">productFlavors </span>&#123;</div><div class="line">        <span class="class">demo </span>&#123;</div><div class="line">            applicationId <span class="string">"com.buildsystemexample.app.demo"</span></div><div class="line">            versionName <span class="string">"1.0-demo"</span></div><div class="line">        &#125;</div><div class="line">        <span class="class">full </span>&#123;</div><div class="line">            applicationId <span class="string">"com.buildsystemexample.app.full"</span></div><div class="line">            versionName <span class="string">"1.0-full"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">...</div></pre></td></tr></table></figure>
<blockquote>
<p>注意：要在多APK支持分发您的应用程序到<strong>Google Play</strong>，分配相同的包名称为所有变体，并给每个变体的不同VERSIONCODE。要分发您的应用程序在谷歌播放单独的应用程序的不同变种，指定不同的包名给每个变量。</p>
</blockquote>
<p>##针对每个<code>flavor</code>添加其他目录</p>
<p>现在，您创建源文件夹，并添加一个SecondActivity每个味道。要创建演示味源目录结构：</p>
<ol>
<li>在项目面板中，展开<code>BuildSystemExample</code>，然后展开应用程序目录。</li>
<li>右键单击src目录下的应用程序，并选择  <strong>New &gt; Directory</strong>.。<br>创建demo作为新目录的名称，然后单击确定。<br>类似地，创建以下目录：</li>
</ol>
<ul>
<li>app/src/demo/java</li>
<li>app/src/demo/res</li>
<li>app/src/demo/res/layout</li>
<li>app/src/demo/res/values<br>由此产生的目录结构如下图1所示。<br><img src="http://img.blog.csdn.net/20150914213847039" alt="这里写图片描述"></li>
</ul>
<p>####添加一个新的活动，各味</p>
<p>要SecondActivity添加到<code>demo</code>flavors：</p>
<ol>
<li>创建一个新的Activity。</li>
<li>选择<strong>Blank Activity</strong>，然后单击<strong>Next</strong>。</li>
<li>输入<code>SecondActivity</code>作为该Activity的名称。</li>
<li>输入<code>com.buildsystemexample.app</code>作为包名，然后单击<strong>Finish</strong>。</li>
<li>右键单击<em>app/src/demo</em>的java目录，并选择<strong>New&gt; Package</strong>。</li>
<li>输入<code>com.buildsystemexample.app</code>作为包名，然后单击<strong>OK</strong>。</li>
<li>拖动<code>SecondActivity</code>到 <em>app/src/demo/java</em>下。</li>
<li><p>接受默认值，然后单击<strong>Refactor</strong>。<br>要增加对SecondActivity布局和一个字符串资源到<code>demo</code> flavors：</p>
</li>
<li><p>从 <em> app/src/main/res/layout</em>拖动<code>activity_second.xml</code>到<em>app/src/demo/res/layout</em>。</p>
</li>
<li>接受出现的窗口中的默认值，然后单击<strong>OK</strong>。</li>
<li>复制的strings.xml从应用程序/ src目录/主/ RES到应用程序/ src目录/演示/资源。</li>
<li>取代的strings.xml具有以下的新副本的内容：<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">"hello_world"</span>&gt;</span>Demo version only.<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>现在，通过复制demo的源码来创建<code>full</code> flavors：</p>
<ol>
<li>在项目面板中，右键点击下应用程序/ src目录demo目录，然后选择复制。</li>
<li>在src /目录下用鼠标右键单击下的应用程序/然后选择粘贴。</li>
<li>在出现的窗口中，输入“满”作为新的名称，然后单击确定。</li>
<li>具有下列下的src /全速/ RES /值替换strings.xml中的内容：<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">"hello_world"</span>&gt;</span>This is the full version!<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>注：从这一点上，可以独立开发SecondActivity内部各的味道。例如，你可以在韵味十足的增加更多的功能到这个活动。</p>
</blockquote>
<p>检查设置的<code>product flavors</code>生效,打开Android studio的<strong>Build Variants</strong>面板,如下图<br><img src="http://img.blog.csdn.net/20150914213913163" alt="这里写图片描述"></p>
<p>图2.构建变体面板。</p>
<p>####从<strong>MainActivity</strong>启动一个<code>flavor-specific</code>Activity</p>
<p>由于香味比活度（SecondActivity）有两种口味相同的包名称和活动名称，你可以从主活动，这是通用于所有的口味启动它。要修改的主要活动：</p>
<ol>
<li><p>编辑<code>activity_main.xml</code>并添加一个按钮：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">...</span>&gt;</span></div><div class="line">    ...</div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/button2"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"@string/button2"</span></div><div class="line">        <span class="attr">android:onClick</span>=<span class="string">"onButton2Clicked"</span>/&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>下面的代码添加到<code>MainActivity</code>的<code>onButton2Clicked</code>方法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onButton2Clicked</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">    Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, SecondActivity.<span class="keyword">class</span>);</div><div class="line">    startActivity(intent);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>编辑应用程序的<code>Manifest</code>文件引用<code>SecondActivity</code>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">...</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">application</span> <span class="attr">...</span>&gt;</span></div><div class="line">        ...</div><div class="line">        <span class="tag">&lt;<span class="name">activity</span></span></div><div class="line">            <span class="attr">android:name</span>=<span class="string">"com.buildsystemexample.app.SecondActivity"</span></div><div class="line">            <span class="attr">android:label</span>=<span class="string">"@string/title_activity_second"</span> &gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>####构建类型</p>
<p>构建类型代表每个应用程序包生成编译包装的版本。默认情况下，提供了<code>debug</code>和<code>release</code>版本的类型。</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">android &#123;</div><div class="line">    ...</div><div class="line">    defaultConfig &#123; ... &#125;</div><div class="line">    signingConfigs &#123; ... &#125;</div><div class="line">    buildTypes &#123; ... &#125;</div><div class="line">    productFlavors <span class="meta">&#123;...&#125;</span></div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            minifyEnabled <span class="literal">false</span></div><div class="line">            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'</div><div class="line">        &#125;</div><div class="line">         debug &#123;</div><div class="line">            debuggable <span class="literal">true</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">...</div></pre></td></tr></table></figure>
<blockquote>
<p>注：虽然只有<code>release</code>类型出现在默认<code>build.gradle</code>文件，但是每个版本都会生成<code>release</code>和<code>debug</code>版本。</p>
</blockquote>
<p>在这个例子中，该<code>product flavors</code>和<code>build types</code>创建以下<code>build variants</code>：</p>
<ul>
<li>demoDebug</li>
<li>demoRelease</li>
<li>fullDebug</li>
<li>fullRelease</li>
</ul>
<p>要构建这个例子中，点击Android Studio中<strong>Build</strong>菜单选项，或调用命令行的 <code>assemble</code>任务。</p>
<blockquote>
<p>注：<strong> Build &gt; Make Project</strong> 选项编译自上次编译修改过整个项目的所有源文件。<strong>Build &gt; Rebuild Project</strong>选项重新编译项目中的所有源文件。</p>
</blockquote>
<p>每个<code>build variant</code>产生单独的文件夹。</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-Gradle_in_Android_Studio_(1)_-_构建系统概述" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/14/Gradle_in_Android_Studio_(1)_-_构建系统概述/">Gradle in Android Studio (1) - 构建系统概述</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#构建系统概述</p>
<blockquote>
<p>Android构建系统是用于构建，测试，运行和打包app的工具包。构建系统可以集成到Android Studio菜单中,也可以单独使用命令行运行。构建系统的特点：</p>
<ul>
<li>自定义，配置和扩展构建过程;</li>
<li>为同一个<code>project</code>或者<code>moudles</code>,创建多个不同的APP;</li>
<li>重用代码和资源。</li>
</ul>
</blockquote>
<p><a href="https://developer.android.com/intl/zh-cn/sdk/installing/studio-build.html" target="_blank" rel="external">原文地址</a></p>
<blockquote>
<p>转载请注明出处 :  <a href="http://blog.csdn.net/hpu_zyh/article/details/48447081" target="_blank" rel="external">http://blog.csdn.net/hpu_zyh/article/details/48447081</a><br><a href="http://blog.csdn.net/hpu_zyh" target="_blank" rel="external">博客主页</a>  |   <a href="http://www.jianshu.com/users/3e9f552e6ba7" target="_blank" rel="external">简书</a>  |  <a href="http://www.zhihu.com/people/yuhan-zhang-36" target="_blank" rel="external">知乎</a>  |  <a href="http://weibo.com/u/2359002991" target="_blank" rel="external">微博</a>  |  <a href="https://github.com/hanks-zyh" target="_blank" rel="external">github</a></p>
</blockquote>
<p>##构建过程<br>构建<code>.apk</code>文件的过程涉及到许多工具,并且产生一些中间文件。如果您正在使用Android Studio，每次执行你的<code>project</code>或者<code>module</code>的 <code>Gradle build task</code> 都可以看到完整的构建过程。构建过程是非常灵活的,大部分的构建过程都是可配置和可扩展的。下图描述了构建过程中涉及的一些工具和构建流程：<br><img src="http://img.blog.csdn.net/20150914213150128" alt="这里写图片描述"></p>
<p>一个典型的构建过程的一般如上图所示。构建系统读取配置的<code>product flavors</code> <code>build types</code> <code>dependencies</code>,然后合并所有的资源。如果不同的文件夹中包含相同的资源名称或设置，下面覆盖的优先顺序是：<code>dependencies</code>覆盖<code>build types</code>， <code>build types</code>覆盖<code>product flavors</code>，<code>product flavors</code>覆盖<code>源代码目录</code>。</p>
<ul>
<li><code>Android的资产打包工具（AAPT）</code>把你的应用程序资源文件进行编译，如<code>AndroidManifest.xml</code>文件和一些<code>XML文件</code>，<code>R.java</code>文件是由你的Java代码中引用的资源自动生成的。</li>
<li><code>aidl工具</code>，将<code>.aidl接口</code>转换成<code>Java接口</code>。</li>
<li>所有的Java代码，包括<code>R.java</code>和<code>.aidl文件</code>，由Java编译器编译成<code>.class文件</code>。</li>
<li><code>DEX工具</code>转换<code>.class文件</code>的Dalvik字节码。使用的<code>第三方库</code>和<code>.class文件</code>也被转换成<code>.dex文件</code>，以便它们可以被打包成最终的<code>.apk文件</code>。</li>
<li>所有非编译资源（如图片），已编译的资源，以及<code>.dex文件</code>被发送到<code>apkbuilder工具</code>打包成一个apk文件。</li>
<li>一旦apk文件生成，它在安装之前需要使用debug或者release key进行签名 。</li>
<li>最后，应用程序被签名后，使用<code>zipalign工具</code>压缩<code>.apk文件</code>, 减少最终的.apk所占空间<blockquote>
<p>注：应用程序被限制在64K方法参考限值。如果您的应用程序达到此限制，构建过程输出以下错误信息：</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Unable <span class="keyword">to</span> execute dex: <span class="function"><span class="keyword">method</span> <span class="title">ID</span> <span class="title">not</span> <span class="title">in</span> [0, 0<span class="title">xffff</span>]:</span> <span class="number">65536</span>.</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<p>为了避免这种错误，请参阅构建应用程序与在<a href="#">65K方法</a>。</p>
<p>##构建输出<br>构建生成APK每个 <code>build variant</code> 在<code>app/build</code>文件夹<code>app/build/outputs/apk/</code>目录中包含一个名为<code>app-&lt;flavor&gt;-&lt;buildtype&gt;.apk</code>的 .apk文件;例如, <code>app-full-release.apk</code> 和 <code>app-demo-debug.apk</code>.</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-用Android_Studio进行NDK开发(简化流程)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/02/用Android_Studio进行NDK开发(简化流程)/">用Android Studio进行NDK开发(简化流程)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>开发环境<br><strong>Android Studio 1.3 RC3</strong><br><strong>android-ndk-r10e</strong></p>
<p>转载请注明出处 :  <a href="http://blog.csdn.net/hpu_zyh/article/details/48184581" target="_blank" rel="external">http://blog.csdn.net/hpu_zyh/article/details/48184581</a><br><a href="http://blog.csdn.net/hpu_zyh" target="_blank" rel="external">博客主页</a>  |   <a href="http://www.jianshu.com/users/3e9f552e6ba7" target="_blank" rel="external">简书</a>  |  <a href="http://www.zhihu.com/people/yuhan-zhang-36" target="_blank" rel="external">知乎</a>  |  <a href="http://weibo.com/u/2359002991" target="_blank" rel="external">微博</a>  |  <a href="https://github.com/hanks-zyh" target="_blank" rel="external">github</a></p>
</blockquote>
<p>###1. 准备NDK环境<br>我这里下载的是<code>android-ndk-r10e</code><br>进入Android studio 的 <code>Project Structure</code>-&gt;<code>SDK location</code> -&gt; <code>Android NDK location</code>, 设置<strong>android-ndk-r10e</strong>的路径, 配置好即可进行开发了(就是这么简单)<br><img src="http://img.blog.csdn.net/20150902221536713" alt="这里写图片描述"></p>
<p>###2. NDK开发</p>
<p>####创建工程,配置NDK<br>在Android studio中创建一个新的Android项目, 修改项目下的<code>build.gradle</code><br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.application'</span></div><div class="line"></div><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">22</span></div><div class="line">    buildToolsVersion <span class="string">"23.0.0 rc2"</span></div><div class="line"></div><div class="line">    defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"hanks.com.hkjni"</span></div><div class="line">        minSdkVersion <span class="number">15</span></div><div class="line">        targetSdkVersion <span class="number">22</span></div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line"></div><div class="line">        ndk&#123;</div><div class="line">            moduleName <span class="string">"hkjni"</span>   <span class="comment">//生成的so名字</span></div><div class="line">            abiFilters <span class="string">"armeabi"</span>, <span class="string">"armeabi-v7a"</span>, <span class="string">"x86"</span>  <span class="comment">//输出指定三种abi体系结构下的so库。</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            minifyEnabled <span class="keyword">false</span></div><div class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>])</div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:appcompat-v7:22.2.0'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>编写     <code>MainActivity</code><br><img src="http://img.blog.csdn.net/20150902223647139" alt="这里写图片描述"></p>
<p>在<code>src\main</code>目录下创建 <code>jni</code>目录<br>创建需要调用的 <code>c语言</code>文件<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"jni.h"</span></span></div><div class="line"></div><div class="line"><span class="function">JNIEXPORT jstring JNICALL <span class="title">Java_hanks_com_hkjni_MainActivity_getHello</span> <span class="params">(JNIEnv * env , jobject obj)</span></span>&#123;</div><div class="line">    <span class="keyword">char</span> * str = <span class="string">"from hkcode"</span>;</div><div class="line">    <span class="keyword">return</span> (*env)-&gt;NewStringUTF(env,str);</div><div class="line">    <span class="comment">//如果不知道这个方法名怎么写可以通过 javah 生成</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://img.blog.csdn.net/20150902222115560" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20150902222221488" alt="这里写图片描述"></p>
<p><strong>下面就可以直接运行了!!!(感觉比以前轻松好多啊)</strong></p>
<p>   如果不知道这个方法名怎么写可以通过 <strong>javah</strong>命令 生成,然后<strong>复制</strong>即可, 知道命名规则的话直接编写 .c 文件也可以<br>   <img src="http://img.blog.csdn.net/20150902222137395" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20150902222237008" alt="这里写图片描述">   </p>
<hr>
<p>以前用Eclipse还有编辑 <code>Android.mk</code>文件,现在Android studio 自动生成了</p>
<p><img src="http://img.blog.csdn.net/20150902222152383" alt="这里写图片描述"></p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-提高效率_Emmet.vim" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/29/提高效率_Emmet.vim/">提高效率 Emmet.vim</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#提高效率 Emmet.vim</p>
<blockquote>
<p>转载请注明出处 : <a href="http://blog.csdn.net/hpu_zyh/article/details/48069159" target="_blank" rel="external">http://blog.csdn.net/hpu_zyh/article/details/48069159</a><br><a href="http://blog.csdn.net/hpu_zyh" target="_blank" rel="external">博客主页</a>  |   <a href="http://www.jianshu.com/users/3e9f552e6ba7" target="_blank" rel="external">简书</a>  |  <a href="http://www.zhihu.com/people/yuhan-zhang-36" target="_blank" rel="external">知乎</a>  |  <a href="http://weibo.com/u/2359002991" target="_blank" rel="external">微博</a>  |  <a href="https://github.com/hanks-zyh" target="_blank" rel="external">github</a></p>
<p><strong>Emmet</strong> — the essential toolkit for web-developers<br><strong>Emmet</strong>配上强大的<strong>Vim</strong>, 简直不能再美了.<br>听说 <strong>Emment</strong>和 <strong>Vim</strong> 更配哦 (哈哈, 这个越对是)</p>
</blockquote>
<p>也可以用于 <strong>Sublime Text</strong> (默认已经下载了), <a href="http://emmet.io/" target="_blank" rel="external">官网</a><br><img src="http://img.blog.csdn.net/20150829034525472" alt="Emmet"></p>
<p>##下载<br>下载地址: <a href="http://www.vim.org/scripts/script.php?script_id=2981" target="_blank" rel="external">emmet-vim.zip</a><br>解压到 <code>~/.vim</code><br><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># cd ~/.vim</span></div><div class="line"><span class="meta"># unzip emmet-vim.zip</span></div></pre></td></tr></table></figure></p>
<p>打开vim就可以使用了</p>
<hr>
<p>##使用<br>主要是<strong>使用缩写</strong>来生成<strong>代码块</strong><br>示例:<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">+-------------------------------------</div><div class="line"><span class="section">| html:5_</span></div><div class="line">+-------------------------------------</div></pre></td></tr></table></figure></p>
<p><code>_</code> 代表光标位置<br><code>&lt;c-y&gt;</code> 代表 <code>Ctrl + y</code><br><code>&lt;c-y&gt;,</code> 代表 <code>Ctrl + y</code>再<code>加逗号</code></p>
<h3 id="1-html-5-生成HTML5的-DOCTYPE-基本结构"><a href="#1-html-5-生成HTML5的-DOCTYPE-基本结构" class="headerlink" title="1 html:5 生成HTML5的 DOCTYPE 基本结构"></a>1 <code>html:5</code> 生成HTML5的 DOCTYPE 基本结构</h3><p>先输入<code>html:5</code> ,再使用命令 <code>&lt;c-y&gt;,</code>  实际上输入 <code>!</code> 效果等同于    <code>html:5</code></p>
<blockquote>
<p> ——————–扩展——————–</p>
<p><strong>!</strong> ,等同于 <code>html:5</code> ,生成 HTML5 doctype<br><strong>html:xt</strong>, 生成 XHTML transitional doctype<br><strong>html:4s</strong>, 生成 HTML4 strict doctype</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20150829011618473" alt="html:5"></p>
<p>###2 <code>.header</code> 生成 <code>class =  &quot;header&quot;</code>的div<br>先输入<code>.header</code> ,再使用命令 <code>&lt;c-y&gt;,</code> header可以是<strong>任意名字</strong></p>
<p><img src="http://img.blog.csdn.net/20150829012102271" alt="这里写图片描述"></p>
<p>###3 <code>#wrapper</code> 生成 <code>id = &quot;wrapper&quot;</code>的div<br>先输入<code>#wrapper</code> ,再使用命令 <code>&lt;c-y&gt;,</code><br><img src="http://img.blog.csdn.net/20150829034613897" alt="这里写图片描述"></p>
<blockquote>
<p>——————–扩展——————–</p>
<p>组合, 输入 <strong>p.clazz#pid</strong>， 生成：<strong><code>&lt;p id=&quot;pid&quot; class=&quot;clazz&quot;&gt;&lt;/p&gt;</code></strong></p>
</blockquote>
<p>###4  <strong><code>h1{foo}</code></strong>， 生成： <strong><code>&lt;h1&gt;foo&lt;/h1&gt;</code></strong></p>
<p><img src="http://img.blog.csdn.net/20150829014032271" alt="这里写图片描述"></p>
<blockquote>
<p>——————–扩展——————–</p>
<p>输入 <strong><code>a</code> </strong>, 生成 <strong><code>&lt;a href=&quot;&quot;&gt;&lt;/a&gt;</code></strong><br>输入 <strong><code>a:link</code> </strong>, 生成 <strong><code>&lt;a href=&quot;http://&quot;&gt;&lt;/a&gt;</code></strong><br>输入<strong><code>img</code></strong>,生成<strong><code>&lt;img src=&quot;&quot; alt=&quot;&quot;&gt;</code></strong><br>输入<strong><code>link</code></strong>,生成<strong><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;&quot;&gt;</code></strong><br>输入<strong><code>link:css</code></strong>,生成<strong><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;</code></strong><br><a href="http://html5.9tech.cn/news/2013/1010/33090.html" target="_blank" rel="external">更多自动填充标签属性</a></p>
</blockquote>
<p>###5 <code>h1+h2</code> 生成 <code>&lt;h1&gt;&lt;/h1&gt;&lt;h2&gt;&lt;/h2&gt;</code><br><img src="http://img.blog.csdn.net/20150829014427332" alt="这里写图片描述"></p>
<p>###6  <code>&gt;</code> 生成<strong>下级</strong>的标签<br>先输入<code>header&gt;div</code> ,再使用命令 <code>&lt;c-y&gt;,</code><br><img src="http://img.blog.csdn.net/20150829012255691" alt="这里写图片描述"></p>
<blockquote>
<p>——————–扩展——————–<br><strong><code>header^div</code></strong>生成上级标签<br><strong><code>header+div</code></strong> 生成同级标签</p>
</blockquote>
<p>###7 <code>*</code>生成几倍的标签<br><img src="http://img.blog.csdn.net/20150829012308067" alt="这里写图片描述"></p>
<p>###8 <code>$</code>变量,生成不同的值<br><code>div&gt;p#test$*3&gt;a</code> : <strong>div</strong>标签内插入<strong>3</strong>个子标签,每个子标签内容为 <strong>p</strong>标签<code>id= &quot;test1&quot;</code>内嵌<strong>a</strong>标签<br><img src="http://img.blog.csdn.net/20150829012319164" alt="这里写图片描述"></p>
<h3 id="9-切换注释"><a href="#9-切换注释" class="headerlink" title="9 切换注释"></a>9 切换注释</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="section">&lt;div&gt;</span></div><div class="line">    <span class="attribute">hello</span> world</div><div class="line"><span class="section">&lt;/div&gt;</span></div></pre></td></tr></table></figure>
<p>光标移到div, 插入模式中按 <code>&lt;c-y&gt;/</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- &lt;div&gt;</span></div><div class="line">    hello world</div><div class="line">&lt;/div&gt; --&gt;</div></pre></td></tr></table></figure></p>
<p>###生成一个HTML5页面结构<br><img src="http://img.blog.csdn.net/20150829031906019" alt="这里写图片描述"><br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="comment">&lt;!-- 下面这段可以直接一下子生成 --&gt;</span></span></div><div class="line">!&gt;(header&gt;.header&gt;.logo<span class="template-variable">&#123;logo&#125;</span><span class="xml">+nav&gt;ul&gt;((li&gt;a[href="#"]</span><span class="template-variable">&#123;item$&#125;</span><span class="xml">)*4))+(section&gt;.wrapper&gt;h1+article&gt;h1+header+p+footer)+(footer&gt;.footer&gt;p</span><span class="template-variable">&#123;@copyright 2015&#125;</span><span class="xml">)</span></div></pre></td></tr></table></figure></p>
<p>生成内容如下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">header</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"logo"</span>&gt;</span>logo<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">nav</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>item1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>item2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>item3<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>item4<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">header</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">section</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">article</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">article</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">footer</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>@copyright 2015<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p>##总结</p>
<p>子级<code>&gt;</code>、同级<code>+</code>、提升层级<code>^</code>、重复输出<code>*</code>、组输出<code>()</code>  基本属性id<code>#</code>  基本属性class<code>.</code>、自定义属性<code>[]</code>、属性自增<code>$</code>、文字属性<code>{}</code></p>
<blockquote>
<p><strong>E</strong> 代表HTML标签</p>
</blockquote>
<table>
<thead>
<tr>
<th>缩写</th>
<th style="text-align:left">生成内容</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>E</code></strong></td>
<td style="text-align:left">代表HTML标签</td>
</tr>
<tr>
<td><strong><code>E#id</code></strong></td>
<td style="text-align:left">代表标签<strong>E</strong>有<strong>id</strong>属性</td>
</tr>
<tr>
<td><strong><code>E.class</code></strong></td>
<td style="text-align:left">代表<strong>E</strong>有<strong>class</strong>属性</td>
</tr>
<tr>
<td><strong><code>E[attr=foo]</code></strong></td>
<td style="text-align:left">代表某个特定属性</td>
</tr>
<tr>
<td><strong><code>E{info}</code></strong></td>
<td style="text-align:left">代表标签<strong>E</strong>包含的内容是<strong>info</strong></td>
</tr>
<tr>
<td><strong><code>E&gt;N</code></strong></td>
<td style="text-align:left">代表<strong>N</strong>是<strong>E</strong>的子元素</td>
</tr>
<tr>
<td><strong><code>E+N</code></strong></td>
<td style="text-align:left">代表<strong>N</strong>是<strong>E</strong>的同级元素</td>
</tr>
<tr>
<td><strong><code>E^N</code></strong></td>
<td style="text-align:left">代表<strong>N</strong>是<strong>E</strong>的上级元素</td>
</tr>
<tr>
<td><strong><code>E*3</code></strong></td>
<td style="text-align:left">代表重复输出<strong>E</strong>标签<strong>3</strong>次</td>
</tr>
<tr>
<td><strong><code>(E+N)*3</code></strong></td>
<td style="text-align:left">代表<strong>N</strong>和<strong>E</strong>为一组同级标签,重复输出<strong>3</strong>次</td>
</tr>
<tr>
<td><strong><code>E$</code></strong></td>
<td style="text-align:left"><strong>$</strong>为<strong>自增</strong>变量,一般和    <strong>*</strong>结合使用</td>
</tr>
<tr>
<td><strong><code>E@</code></strong></td>
<td style="text-align:left"><strong><code>@</code></strong>可以制定变量的规则,<strong><code>@-</code></strong>为<strong>自减</strong>变量,<strong><code>@3*5</code></strong>为从3开始增加5个数,一般和<strong>*</strong>结合使用</td>
</tr>
</tbody>
</table>
<hr>
<table>
<thead>
<tr>
<th>vim下的快捷键</th>
<th style="text-align:left">生成内容</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;c-y&gt;d</code></td>
<td style="text-align:left">插入模式下根据光标位置选中整个标签</td>
</tr>
<tr>
<td><code>&lt;c-y&gt;D</code></td>
<td style="text-align:left">插入模式下根据光标位置选中整个标签内容</td>
</tr>
<tr>
<td><code>&lt;c-y&gt;n</code></td>
<td style="text-align:left">跳转到下一个编辑点</td>
</tr>
<tr>
<td><code>&lt;c-y&gt;N</code></td>
<td style="text-align:left">跳转到上一个编辑点</td>
</tr>
<tr>
<td><code>&lt;c-y&gt;m</code></td>
<td style="text-align:left">合并行</td>
</tr>
<tr>
<td><code>&lt;c-y&gt;k</code></td>
<td style="text-align:left">移除标签对</td>
</tr>
<tr>
<td><code>&lt;c-y&gt;j</code></td>
<td style="text-align:left">分割/合并标签</td>
</tr>
<tr>
<td><code>&lt;c-y&gt;/</code></td>
<td style="text-align:left">切换注释</td>
</tr>
<tr>
<td><code>&lt;c-y&gt;a</code></td>
<td style="text-align:left">从 URL 地址生成锚</td>
</tr>
<tr>
<td><code>&lt;c-y&gt;A</code></td>
<td style="text-align:left">从 URL 地址生成引用文本</td>
</tr>
</tbody>
</table>
<p>.</p>
<blockquote>
<p><strong><a href="http://docs.emmet.io/cheat-sheet/" target="_blank" rel="external"> 完整语法</a></strong></p>
</blockquote>
<p>参考:<br><a href="http://www.vim.org/scripts/script.php?script_id=2981" target="_blank" rel="external">http://www.vim.org/scripts/script.php?script_id=2981</a><br><a href="https://raw.githubusercontent.com/mattn/emmet-vim/master/TUTORIAL" target="_blank" rel="external">https://raw.githubusercontent.com/mattn/emmet-vim/master/TUTORIAL</a><br><a href="http://www.jianshu.com/p/ad8a6a786054" target="_blank" rel="external">http://www.jianshu.com/p/ad8a6a786054</a><br><a href="http://www.jianshu.com/p/5e099ebaa26a" target="_blank" rel="external">http://www.jianshu.com/p/5e099ebaa26a</a><br><a href="http://html5.9tech.cn/news/2013/1010/33090.html" target="_blank" rel="external">http://html5.9tech.cn/news/2013/1010/33090.html</a></p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-front-end" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/27/front-end/">front-end</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###HTML5相关</p>
<ul>
<li>HTML</li>
<li>XHTML</li>
<li>CSS</li>
<li>CSS3</li>
<li>JavaScript</li>
<li>JQuery</li>
<li>HTML5</li>
</ul>
<p>###书籍</p>
<blockquote>
<p>引自知乎 <a href="http://www.zhihu.com/question/19809484" target="_blank" rel="external">http://www.zhihu.com/question/19809484</a> <code>人丑就该多读书,说的一点没错啊</code></p>
</blockquote>
<p>第一本，入门<br><strong>《Head first HTML&amp;CSS》</strong><br>最好的入门书。看两遍就对HTML &amp; CSS 有个大概印象了<br>此时把w3cschool作为备查手册收藏起来</p>
<p>第二本<br><strong>《CSS权威指南（第三版）》</strong><br>最权威的CSS书籍，除了阅读W3C的文档外的不二选择。有时间（无论是现在还是将来）可以反复看，并当做字典随时查。</p>
<p>第三本<br><strong>《精通CSS》</strong><br>广受前辈推荐的一本书。上一本书是字典的话，这本书相当于《中学生作文大全》，汇集了一些CSS的最佳实践。</p>
<p>第四本<br><strong>《图解CSS3：核心技术与案例实践》</strong><br>这本书比较新，讲解的是最新的CSS3（前三本书停留在CSS2.1时代），CSS3也是必学的，不是什么可学可不学的最新技术。</p>
<p>HTML CSS值得看的书就这些，剩下的就是自己写还有看技术博客了。接下来是JavaScript，HTML和CSS都是没有逻辑的标记型语言，JS才是真正的编程语言，评价前端工程师的水平就看这个了。</p>
<p>第五本<br><strong>《JavaScript DOM编程艺术》</strong><br>最好的JS入门书籍，一目了然地告诉你JS到底在Web上做些什么，还灌输了最符合标准的编程理念。</p>
<p>第六本<br><strong>《JavaScript高级程序设计》</strong><br>每个前端必看的书，此书是前端工程师科技树的关键一环。看完此书后各种层次的JS书籍都可以看了。<br>俗称红宝书，也算入门书籍，虽然是大部头（七百多页），但至少读3～5遍。<br>全部掌握了，你可以在网络社区里谈笑风生了，经过实践的锻炼后，面试个前端工程师的岗位应该都没问题了。</p>
<p>第七本<br><strong>《JavaScript语言精粹》</strong><br>也是前端必看。薄薄一百来页，对JS的去粗取精。</p>
<p>第八本<br><strong>《Head First Ajax》</strong><br>Ajax也是基本技术，在第六本书里也有介绍，但我自己是不太理解，所以特地又看了这本。</p>
<p>第九本<br><strong>《JavaScript设计模式》</strong><br>“设计模式”是软件工程的重要课题，相当于高考时候的答题套路。前人总结出来的应对各种问题的模板。也算是必看书籍。</p>
<p>第十本<br><strong>《高性能网站建设指南》（及其续篇《高性能网站进阶》）</strong><br>告诉你真正的商业公司的前端是怎么优化一个网站的。</p>
<p>看 完以上十本算是<strong>前端入门</strong>了。到现在为止，配合搜索引擎，已经可以无障碍地做出静态网页、各种特效、用AJAX配合后台构建Web应用了。然后是各种框架、 库、预处理语言的学习，而且现在JavaScript也可以用来写服务器了（Node.js），这样一来JS通吃前后端，前端工程师都欢欣鼓舞，这也是个 学习热点。下面是一些补充书籍，可以穿插着看。（至少看了两遍《JavaScript高级程序设计》再看下面的书）</p>
<p><strong>《锋利的jQuery》</strong><br>讲JS最著名的库——jQuery的，快速入门的书。光会原生JS不够，还要会用库。</p>
<hr>
<blockquote>
<p>相关书籍<br><a href="http://www.w3cfuns.com/feres.php?do=picture&amp;listtype=book" target="_blank" rel="external">http://www.w3cfuns.com/feres.php?do=picture&amp;listtype=book</a></p>
</blockquote>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-一步一步实现500px引导动画_--_酷酷哒" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/18/一步一步实现500px引导动画_--_酷酷哒/">一步一步实现500px引导动画 -- 酷酷哒</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="一步一步实现500px引导动画-–-酷酷哒"><a href="#一步一步实现500px引导动画-–-酷酷哒" class="headerlink" title="一步一步实现500px引导动画 – 酷酷哒"></a>一步一步实现500px引导动画 – 酷酷哒</h1><blockquote>
<p>转载请注明出处 : <a href="http://blog.csdn.net/hpu_zyh/article/details/47749859" target="_blank" rel="external">http://blog.csdn.net/hpu_zyh/article/details/47749859</a></p>
<p><a href="http://blog.csdn.net/hpu_zyh" target="_blank" rel="external">博客主页</a>  |   <a href="http://www.jianshu.com/users/3e9f552e6ba7" target="_blank" rel="external">简书</a>  |  <a href="http://www.zhihu.com/people/yuhan-zhang-36" target="_blank" rel="external">知乎</a>  |  <a href="http://weibo.com/u/2359002991" target="_blank" rel="external">微博</a>  |  <a href="https://github.com/hanks-zyh" target="_blank" rel="external">github</a></p>
</blockquote>
<p>下了500px应用, 瞬间被它的引导动画吸引住了,下面一步一步来实现引导动画</p>
<h2 id="最终效果图"><a href="#最终效果图" class="headerlink" title="最终效果图:"></a>最终效果图:</h2><p><img src="http://file.bmob.cn/M01/09/67/oYYBAFXS0giAVZ_yAFK58BsXp6I373.gif" alt="">   </p>
<hr>
<p>清晰版<br> <img src="http://file.bmob.cn/M01/09/76/oYYBAFXS1AeADqx8AERLXngnTHk663.gif" alt=""></p>
<p>下面的小圆点简单的,就先省略,重点在切换动画</p>
<hr>
<h3 id="创建viewpager"><a href="#创建viewpager" class="headerlink" title="创建viewpager"></a>创建viewpager</h3><p>可以左右随手指滑动的只有底部文字部分,所以ViewPager中存放的布局是底部文字部分<br><code>activity_main.xml</code><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;RelativeLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span></div><div class="line">    android:<span class="attribute">background</span>=<span class="string">"#fff"</span>&gt;</div><div class="line">    &lt;android<span class="selector-class">.support</span><span class="selector-class">.v4</span><span class="selector-class">.view</span><span class="selector-class">.ViewPager</span></div><div class="line">        android:id=<span class="string">"@+id/viewpager"</span></div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"match_parent"</span> /&gt;</div><div class="line">&lt;/RelativeLayout&gt;</div></pre></td></tr></table></figure></p>
<p>先添加viewpager控件</p>
<p><code>MainActivity.java</code><br><figure class="highlight pony"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//创建adapter</span></div><div class="line"><span class="type">GuideAdapter</span> adapter = <span class="function"><span class="keyword">new</span> <span class="title">GuideAdapter</span>(getFragmentManager());</span></div><div class="line"><span class="comment">//设置viewpager缓存页数,默认的缓存一页,因为引导页共有4页,</span></div><div class="line"><span class="comment">//所以设置缓存3页,这样所以page在滑动过程中不会重新创建</span></div><div class="line"><span class="title">viewpager</span>.<span class="title">setOffscreenPageLimit</span>(<span class="number">3</span>);</div><div class="line"><span class="title">viewpager</span>.<span class="title">setAdapter</span>(adapter);</div></pre></td></tr></table></figure></p>
<p>在<code>MainActivity</code>中,首先获取到xml中的viewpager,为viewpager设置Adapter,并且设置viewpage的缓存页数<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> List&lt;Fragment&gt; fragmentList = <span class="keyword">new</span> <span class="type">ArrayList</span>&lt;&gt;();</div></pre></td></tr></table></figure></p>
<p>创建了用于填充viewpager的fragmentList<br><figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">fragment00</span> = new GuideFragment()<span class="comment">;</span></div><div class="line"><span class="attribute">fragment01</span> = new GuideFragment()<span class="comment">;</span></div><div class="line"><span class="attribute">fragment02</span> = new GuideFragment()<span class="comment">;</span></div><div class="line"><span class="attribute">fragment03</span> = new GuideFragment()<span class="comment">;</span></div><div class="line"></div><div class="line">fragmentList.add(fragment00)<span class="comment">;</span></div><div class="line">fragmentList.add(fragment01)<span class="comment">;</span></div><div class="line">fragmentList.add(fragment02)<span class="comment">;</span></div><div class="line">fragmentList.add(fragment03)<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p>初始化fragmentList</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">GuideAdapter</span> <span class="keyword">extends</span> <span class="title">FragmentPagerAdapter</span> </span>&#123;</div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="title">GuideAdapter</span><span class="params">(FragmentManager fm)</span> </span>&#123;</div><div class="line">           <span class="keyword">super</span>(fm);</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="meta">@Override</span></div><div class="line">       <span class="keyword">public</span> <span class="function">Fragment <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">           <span class="function"><span class="keyword">return</span> fragmentList.<span class="title">get</span><span class="params">(position)</span></span>;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="meta">@Override</span></div><div class="line">       <span class="keyword">public</span> <span class="function"><span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">           <span class="function"><span class="keyword">return</span> fragmentList.<span class="title">size</span><span class="params">()</span></span>;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>GuideAdapter 继承FragmentPagerAdapter</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by Hanks on 2015/8/13.</div><div class="line"> */</div><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">GuideFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</div><div class="line">    <span class="meta">@Nullable</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    public <span class="type">View</span> onCreateView(<span class="type">LayoutInflater</span> inflater, <span class="type">ViewGroup</span> container, <span class="type">Bundle</span> savedInstanceState) &#123;</div><div class="line">        <span class="type">View</span> view = inflater.inflate(<span class="type">R</span>.layout.fragment_guide, container, <span class="literal">false</span>);</div><div class="line">        <span class="keyword">return</span> view;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在Fragment中只是展示了一下布局<br><img src="http://img.blog.csdn.net/20150818114547069" alt="这里写图片描述"></p>
<p>运行效果<br> <img src="http://img.blog.csdn.net/20150818114332478" alt="这里写图片描述"></p>
<hr>
<p>##开始引导动画</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//给viewpager设置Pagetransformer</span></div><div class="line">viewpager.setPageTransformer(<span class="literal">false</span>, <span class="keyword">new</span> <span class="type">HKTransformer</span>());</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * by Hanks</div><div class="line"> */</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HKTransformer</span> <span class="keyword">implements</span> <span class="title">ViewPager</span>.<span class="title">PageTransformer</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transformPage</span><span class="params">(View view, <span class="keyword">float</span> position)</span> </span>&#123;</div><div class="line">        Log.i(<span class="string">""</span>, <span class="string">"view:    "</span> + view + <span class="string">"position= "</span> + position);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>观察滑动过程中<strong>view</strong>和<strong>position</strong>的值</p>
<p>从第0页到第1页,<br><img src="http://img.blog.csdn.net/20150818114914483" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20150818115006696" alt="这里写图片描述"><br>可以看到4个页面的对应的position 从 0, 1, 2, 3 变化为 -1, 0, 1, 2</p>
<p>然后从第1页滑动到第2页<br><img src="http://img.blog.csdn.net/20150818115021583" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20150818115031865" alt="这里写图片描述"><br>可以看到4个页面的对应的position 从 -1, 0, 1, 2 变化为 -2, -1, 0, 1</p>
<p>继续观察可以看到其中的规律,这里不再贴出图片了.</p>
<p>###观察滑动规律<br>假设4个页面分别为A,B,C,D<br>只看第0个页面</p>
<ul>
<li>从 A-B,  position:  0 ~ -1</li>
<li>从 B-C,  position: -1 ~ -2</li>
<li>从 C-D,  position: -2 ~ -3</li>
</ul>
<p>所以可以以其中一个view的position为标准来确定当前滑动的是哪个页面<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * by Hanks</div><div class="line"> */</div><div class="line"><span class="keyword">class</span> HKTransformer implements ViewPager.PageTransformer &#123;</div><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> transformPage(View view, <span class="keyword">float</span> <span class="built_in">position</span>) &#123;</div><div class="line">        <span class="built_in">if</span> (fragment00.getView() == view) &#123;</div><div class="line">            Log.i(<span class="string">""</span>, <span class="string">"view:    "</span> + view + <span class="string">"position= "</span> + <span class="built_in">position</span>);</div><div class="line">            currentPosition = <span class="built_in">position</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="built_in">if</span> (<span class="built_in">position</span> &lt; <span class="number">-1</span>) &#123; <span class="comment">// [-Infinity,-1)</span></div><div class="line">            <span class="comment">// This page is way off-screen to the left.</span></div><div class="line">        &#125; <span class="built_in">else</span> <span class="built_in">if</span> (<span class="built_in">position</span> &lt;= <span class="number">0</span>) &#123; <span class="comment">// [-1,0]</span></div><div class="line">            <span class="comment">// Use the default slide transition when moving to the left page</span></div><div class="line">        &#125; <span class="built_in">else</span> <span class="built_in">if</span> (<span class="built_in">position</span> &lt;= <span class="number">1</span>) &#123; <span class="comment">// (0,1]</span></div><div class="line">            <span class="comment">// Fade the page out.</span></div><div class="line"></div><div class="line">            <span class="keyword">float</span> p = Math.<span class="built_in">abs</span>(<span class="built_in">position</span>);</div><div class="line">            <span class="keyword">float</span> f = (<span class="number">1</span> - p);</div><div class="line"></div><div class="line">            Log.i(<span class="string">""</span>, <span class="string">"p= "</span> + p);</div><div class="line">            <span class="comment">// p : 1~0</span></div><div class="line">            <span class="comment">// f : 0~1</span></div><div class="line"></div><div class="line"></div><div class="line">            <span class="built_in">if</span> (<span class="number">-1</span> &lt; currentPosition &amp;&amp; currentPosition &lt;= <span class="number">0</span>) &#123;</div><div class="line">               <span class="comment">// A ~ B 之间的动画</span></div><div class="line"></div><div class="line"></div><div class="line">            &#125; <span class="built_in">else</span> <span class="built_in">if</span> (<span class="number">-2</span> &lt; currentPosition &amp;&amp; currentPosition &lt;= <span class="number">-1</span>) &#123;</div><div class="line">                <span class="comment">//B ~  C 之间的动画</span></div><div class="line"></div><div class="line"></div><div class="line">            &#125; <span class="built_in">else</span> <span class="built_in">if</span> (<span class="number">-3</span> &lt; currentPosition &amp;&amp; currentPosition &lt;= <span class="number">-2</span>) &#123;</div><div class="line">                <span class="comment">//C ~  D 之间的动画</span></div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line"></div><div class="line">        &#125; <span class="built_in">else</span> &#123; <span class="comment">// (1,+Infinity]</span></div><div class="line">            <span class="comment">// This page is way off-screen to the right.</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p> 在position处于<strong>(0,1]</strong>时,表示两个页面正在滑动切换,可以打印一下看看,然后就是基于上面的规律, 根据<strong>currentPosition</strong>来判断是从在哪两个页面之间滑动</p>
<p>###开始动画</p>
<p>####A~B界面的动画<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;RelativeLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span></div><div class="line">    android:<span class="attribute">background</span>=<span class="string">"#fff"</span>&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;ImageView</div><div class="line">        android:id=<span class="string">"@+id/iv_device"</span></div><div class="line">        android:layout_width=<span class="string">"340dp"</span></div><div class="line">        android:layout_height=<span class="string">"500dp"</span></div><div class="line">        android:layout_centerInParent=<span class="string">"true"</span></div><div class="line">        android:scaleType=<span class="string">"centerInside"</span></div><div class="line">        android:src=<span class="string">"@drawable/tour_device"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;ImageView</div><div class="line">        android:id=<span class="string">"@+id/iv_initial_phone"</span></div><div class="line">        android:layout_width=<span class="string">"200dp"</span></div><div class="line">        android:layout_height=<span class="string">"400dp"</span></div><div class="line">        android:layout_centerInParent=<span class="string">"true"</span></div><div class="line">        android:scaleType=<span class="string">"centerCrop"</span></div><div class="line">        android:src=<span class="string">"@drawable/tour_initial_photo"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;android<span class="selector-class">.support</span><span class="selector-class">.v4</span><span class="selector-class">.view</span><span class="selector-class">.ViewPager</span></div><div class="line">        android:id=<span class="string">"@+id/viewpager"</span></div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"match_parent"</span>&gt;&lt;/android<span class="selector-class">.support</span><span class="selector-class">.v4</span><span class="selector-class">.view</span><span class="selector-class">.ViewPager</span>&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;/RelativeLayout&gt;</div></pre></td></tr></table></figure></p>
<p>一个手机边框 :</p>
<ul>
<li><strong>scaleX : 1 ~ 2</strong></li>
<li><strong>alpha : 1 ~ 0</strong></li>
</ul>
<p>中间”大人小孩”图片 :<br> <strong>scaleX : 1 ~ 0.5</strong><br> <strong>scaleY : 1 ~ 0.5</strong><br> <strong>translationY: 0 ~ -600</strong></p>
<p>评论模块:<br><strong>scaleX : 2 ~ 1</strong><br> <strong>scaleY : 2 ~ 1</strong><br> <strong>translationY: 800 ~ 0</strong><br> <strong>alpha :  ~ 1</strong><br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">iv_initial_phone.setTranslationY(<span class="number">-600</span> * f);</div><div class="line">iv_initial_phone.setScaleX(<span class="number">0.5</span>f * p + <span class="number">0.5</span>f);</div><div class="line">iv_initial_phone.setScaleY(<span class="number">0.5</span>f * p + <span class="number">0.5</span>f);</div><div class="line">iv_device.setScaleX(<span class="number">1</span> + <span class="number">2</span> * f);</div><div class="line"></div><div class="line"><span class="comment">//仔细观察iv_device是在滑到中间时就完全alpha=0了</span></div><div class="line">if (p &gt; <span class="number">0.5</span> &amp;&amp; p &lt;= <span class="number">1</span>) &#123;</div><div class="line">    iv_device.setAlpha(<span class="number">2</span> * p - <span class="number">1</span>);</div><div class="line">&#125; else &#123;</div><div class="line">    iv_device.setAlpha(<span class="number">0</span>f);</div><div class="line">&#125;</div><div class="line">ll_comments.setTranslationY(<span class="number">800</span> * p);</div><div class="line">ll_comments.setAlpha(f);</div><div class="line">ll_comments.setScaleX(<span class="number">2</span> - f);</div><div class="line">ll_comments.setScaleY(<span class="number">2</span> - f);</div></pre></td></tr></table></figure></p>
<p>运行效果<br><img src="http://img.blog.csdn.net/20150818132835708" alt="这里写图片描述"></p>
<p>####B~C界面的动画<br>布局文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:background</span>=<span class="string">"#fff"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/ll_comments"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"200dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"63dp"</span></div><div class="line">            <span class="attr">android:layout_gravity</span>=<span class="string">"right"</span></div><div class="line">            <span class="attr">android:drawableLeft</span>=<span class="string">"@drawable/tour_avatar1"</span></div><div class="line">            <span class="attr">android:drawablePadding</span>=<span class="string">"8dp"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center_vertical|left"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"Kaitlyn 收藏了\n您的照片\n刚刚"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#111"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"14sp"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"200dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"63dp"</span></div><div class="line">            <span class="attr">android:layout_gravity</span>=<span class="string">"left"</span></div><div class="line">            <span class="attr">android:drawablePadding</span>=<span class="string">"8dp"</span></div><div class="line">            <span class="attr">android:drawableRight</span>=<span class="string">"@drawable/tour_avatar2"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center_vertical|right"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"Adam 评论了\n您的照片\n刚刚"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#111"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"14sp"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"200dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"63dp"</span></div><div class="line">            <span class="attr">android:layout_gravity</span>=<span class="string">"right"</span></div><div class="line">            <span class="attr">android:drawableLeft</span>=<span class="string">"@drawable/tour_avatar3"</span></div><div class="line">            <span class="attr">android:drawablePadding</span>=<span class="string">"8dp"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center_vertical|left"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"Kaitlyn 收藏了\n您的照片\n刚刚"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#111"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"14sp"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"200dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"63dp"</span></div><div class="line">            <span class="attr">android:layout_gravity</span>=<span class="string">"left"</span></div><div class="line">            <span class="attr">android:drawablePadding</span>=<span class="string">"8dp"</span></div><div class="line">            <span class="attr">android:drawableRight</span>=<span class="string">"@drawable/tour_avatar4"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"right|center_vertical"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"Adam 评论了\n您的照片\n刚刚"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#111"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"14sp"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/ll_rows"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_centerHorizontal</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center_horizontal"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/row1"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/row2"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"843dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">            <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></div><div class="line">            <span class="attr">android:layout_marginLeft</span>=<span class="string">"5.5dp"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"fitXY"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/row3"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/row4"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/row5"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/row6"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/row7"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/row8"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/row9"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/iv_device"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"340dp"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"500dp"</span></div><div class="line">        <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:scaleType</span>=<span class="string">"centerInside"</span></div><div class="line">        <span class="attr">android:src</span>=<span class="string">"@drawable/tour_device"</span> /&gt;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/iv_initial_phone"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"200dp"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"400dp"</span></div><div class="line">        <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">        <span class="attr">android:src</span>=<span class="string">"@drawable/tour_initial_photo"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/iv_final_photo"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"48dp"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">        <span class="attr">android:layout_centerHorizontal</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:layout_marginTop</span>=<span class="string">"144dp"</span></div><div class="line">        <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">        <span class="attr">android:src</span>=<span class="string">"@drawable/tour_final_photo"</span> /&gt;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v4.view.ViewPager</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/viewpager"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;<span class="tag">&lt;/<span class="name">android.support.v4.view.ViewPager</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>“大人小孩”图片:<br><strong>translationY : -600 ~ -900</strong></p>
<p>评论模块:<br><strong>alpha : 1 ~ 0</strong></p>
<p>横条图片模块:<br><strong>translationY : -1000 ~ 0</strong><br><strong>alpha : 1 ~ 0.5</strong></p>
<p>横条图片中间图片(这是一个单独的图片,后面的动画用到):<br><strong>translationY : -1000 ~ 0</strong><br><strong>alpha : 0.5 ~ 1</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> <span class="selector-tag">iv_initial_phone</span><span class="selector-class">.setTranslationY</span>(<span class="selector-tag">-600</span> + <span class="selector-tag">-300</span> * <span class="selector-tag">f</span>);</div><div class="line"></div><div class="line"><span class="selector-tag">ll_comments</span><span class="selector-class">.setAlpha</span>(<span class="selector-tag">p</span>);</div><div class="line"></div><div class="line"><span class="selector-tag">ll_rows</span><span class="selector-class">.setTranslationY</span>(<span class="selector-tag">-1000</span> * <span class="selector-tag">p</span>);</div><div class="line"><span class="selector-tag">ll_rows</span><span class="selector-class">.setAlpha</span>(0<span class="selector-class">.5f</span> + 0<span class="selector-class">.5f</span> * <span class="selector-tag">f</span>);</div><div class="line"></div><div class="line"><span class="selector-tag">iv_final_photo</span><span class="selector-class">.setTranslationY</span>(<span class="selector-tag">-1000</span> * <span class="selector-tag">p</span>);</div><div class="line"><span class="selector-tag">iv_final_photo</span><span class="selector-class">.setAlpha</span>(0<span class="selector-class">.5f</span> + 0<span class="selector-class">.5f</span> * <span class="selector-tag">f</span>);</div></pre></td></tr></table></figure>
<p>效果:<br><img src="http://img.blog.csdn.net/20150818133033145" alt="这里写图片描述"></p>
<p>####C~D界面的动画</p>
<p>设置缩放中心点<br><figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">iv_final_photo.setPivotY(<span class="number">0</span>f)<span class="comment">;</span></div><div class="line">iv_final_photo.setPivotX(iv_final_photo.getWidth() / <span class="number">2</span>)<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p>最后图片:<br><strong>scaleX : 1 ~ 3</strong><br><strong>scaleY : 1 ~ 3</strong></p>
<p>横条图片模块<br><em>奇数行向右移动, <strong>translationX :  0 ~ -100</strong>
</em>偶数行向左移动, <strong>translationX :  0 ~ 100</strong></p>
<p>头像模块:<br><strong>translationY :  -300 ~ 0</strong></p>
<p>注册按钮<br><strong>translationX :  300 ~ 0</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">iv_final_photo.setScaleX(<span class="number">1</span> + <span class="number">3</span> * f); <span class="comment">//1~3</span></div><div class="line">iv_final_photo.setScaleY(<span class="number">1</span> + <span class="number">3</span> * f); <span class="comment">//1~3</span></div><div class="line"></div><div class="line">for (int i = <span class="number">0</span>; i &lt; ll_rows.getChildCount(); i++) &#123;</div><div class="line">   View child = ll_rows.getChildAt(i);</div><div class="line">   child.setAlpha(p);</div><div class="line">   if (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</div><div class="line">       child.setTranslationX(<span class="number">100</span> * f);</div><div class="line">   &#125; else &#123;</div><div class="line">       child.setTranslationX(<span class="number">-100</span> * f);</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">tv_avatar_you.setTranslationY(<span class="number">-300</span> + <span class="number">300</span> * f);</div><div class="line"></div><div class="line">tv_register.setTranslationY(<span class="number">300</span> - <span class="number">300</span> * f);</div></pre></td></tr></table></figure>
<p>运行结果:<br><img src="http://img.blog.csdn.net/20150818133956984" alt="这里写图片描述"></p>
<hr>
<p>###最后的模糊效果<br>看到一篇<a href="http://developers.500px.com/2015/03/17/a-blurring-view-for-android.html" target="_blank" rel="external">博客</a> (<a href="http://www.devtf.cn/?p=158" target="_blank" rel="external">中文翻译版</a>)讲解了500px的模糊效果</p>
<p>项目地址:<a href="https://github.com/500px/500px-android-blur" target="_blank" rel="external">https://github.com/500px/500px-android-blur</a></p>
<p>在build.gradle中添加<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">renderscriptTargetApi</span> <span class="number">18</span></div><div class="line">renderscriptSupportModeEnabled <span class="literal">true</span></div></pre></td></tr></table></figure></p>
<p>将BlurringView.java复制到项目目录</p>
<p>使用BlurringView,</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;hanks<span class="selector-class">.com</span><span class="selector-class">.customview</span><span class="selector-class">.BlurringView</span></div><div class="line">     android:id=<span class="string">"@+id/blurringView"</span></div><div class="line">     android:layout_width=<span class="string">"match_parent"</span></div><div class="line">     android:layout_height=<span class="string">"150dp"</span></div><div class="line">     android:layout_alignParentBottom=<span class="string">"true"</span></div><div class="line">     app:blurRadius=<span class="string">"11"</span></div><div class="line">     app:downsampleFactor=<span class="string">"6"</span></div><div class="line">     app:overlayColor=<span class="string">"#99FFFFFF"</span></div><div class="line">     &gt;</div><div class="line"> &lt;/hanks<span class="selector-class">.com</span><span class="selector-class">.customview</span><span class="selector-class">.BlurringView</span>&gt;</div></pre></td></tr></table></figure>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">View blurredView = findViewById(R.id.blurredView)<span class="comment">;</span></div><div class="line">blurringView.setBlurredView(blurredView)<span class="comment">;</span></div></pre></td></tr></table></figure>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">blurringView.invalidate()<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>最终的xml:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></div><div class="line">    <span class="attr">android:background</span>=<span class="string">"#fff"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">RelativeLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/blurredView"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/ll_comments"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"200dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"63dp"</span></div><div class="line">                <span class="attr">android:layout_gravity</span>=<span class="string">"right"</span></div><div class="line">                <span class="attr">android:drawableLeft</span>=<span class="string">"@drawable/tour_avatar1"</span></div><div class="line">                <span class="attr">android:drawablePadding</span>=<span class="string">"8dp"</span></div><div class="line">                <span class="attr">android:gravity</span>=<span class="string">"center_vertical|left"</span></div><div class="line">                <span class="attr">android:text</span>=<span class="string">"Kaitlyn 收藏了\n您的照片\n刚刚"</span></div><div class="line">                <span class="attr">android:textColor</span>=<span class="string">"#111"</span></div><div class="line">                <span class="attr">android:textSize</span>=<span class="string">"14sp"</span> /&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"200dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"63dp"</span></div><div class="line">                <span class="attr">android:layout_gravity</span>=<span class="string">"left"</span></div><div class="line">                <span class="attr">android:drawablePadding</span>=<span class="string">"8dp"</span></div><div class="line">                <span class="attr">android:drawableRight</span>=<span class="string">"@drawable/tour_avatar2"</span></div><div class="line">                <span class="attr">android:gravity</span>=<span class="string">"center_vertical|right"</span></div><div class="line">                <span class="attr">android:text</span>=<span class="string">"Adam 评论了\n您的照片\n刚刚"</span></div><div class="line">                <span class="attr">android:textColor</span>=<span class="string">"#111"</span></div><div class="line">                <span class="attr">android:textSize</span>=<span class="string">"14sp"</span> /&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"200dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"63dp"</span></div><div class="line">                <span class="attr">android:layout_gravity</span>=<span class="string">"right"</span></div><div class="line">                <span class="attr">android:drawableLeft</span>=<span class="string">"@drawable/tour_avatar3"</span></div><div class="line">                <span class="attr">android:drawablePadding</span>=<span class="string">"8dp"</span></div><div class="line">                <span class="attr">android:gravity</span>=<span class="string">"center_vertical|left"</span></div><div class="line">                <span class="attr">android:text</span>=<span class="string">"Kaitlyn 收藏了\n您的照片\n刚刚"</span></div><div class="line">                <span class="attr">android:textColor</span>=<span class="string">"#111"</span></div><div class="line">                <span class="attr">android:textSize</span>=<span class="string">"14sp"</span> /&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"200dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"63dp"</span></div><div class="line">                <span class="attr">android:layout_gravity</span>=<span class="string">"left"</span></div><div class="line">                <span class="attr">android:drawablePadding</span>=<span class="string">"8dp"</span></div><div class="line">                <span class="attr">android:drawableRight</span>=<span class="string">"@drawable/tour_avatar4"</span></div><div class="line">                <span class="attr">android:gravity</span>=<span class="string">"right|center_vertical"</span></div><div class="line">                <span class="attr">android:text</span>=<span class="string">"Adam 评论了\n您的照片\n刚刚"</span></div><div class="line">                <span class="attr">android:textColor</span>=<span class="string">"#111"</span></div><div class="line">                <span class="attr">android:textSize</span>=<span class="string">"14sp"</span> /&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/ll_rows"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_centerHorizontal</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center_horizontal"</span></div><div class="line">            <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">                <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">                <span class="attr">android:src</span>=<span class="string">"@drawable/row1"</span> /&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">                <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">                <span class="attr">android:src</span>=<span class="string">"@drawable/row2"</span> /&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"843dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">                <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"5.5dp"</span></div><div class="line">                <span class="attr">android:scaleType</span>=<span class="string">"fitXY"</span></div><div class="line">                <span class="attr">android:src</span>=<span class="string">"@drawable/row3"</span> /&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">                <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">                <span class="attr">android:src</span>=<span class="string">"@drawable/row4"</span> /&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">                <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">                <span class="attr">android:src</span>=<span class="string">"@drawable/row5"</span> /&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">                <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">                <span class="attr">android:src</span>=<span class="string">"@drawable/row6"</span> /&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">                <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">                <span class="attr">android:src</span>=<span class="string">"@drawable/row7"</span> /&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">                <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">                <span class="attr">android:src</span>=<span class="string">"@drawable/row8"</span> /&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"600dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">                <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">                <span class="attr">android:src</span>=<span class="string">"@drawable/row9"</span> /&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/iv_device"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"340dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"500dp"</span></div><div class="line">            <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"centerInside"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/tour_device"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/iv_initial_phone"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"200dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"400dp"</span></div><div class="line">            <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/tour_initial_photo"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/iv_final_photo"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"48dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"72dp"</span></div><div class="line">            <span class="attr">android:layout_centerHorizontal</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:layout_marginTop</span>=<span class="string">"144dp"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">            <span class="attr">android:src</span>=<span class="string">"@drawable/tour_final_photo"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/tv_avatar_you"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"90dp"</span></div><div class="line">            <span class="attr">android:layout_centerHorizontal</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:drawableTop</span>=<span class="string">"@drawable/tour_avatar_you"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:paddingTop</span>=<span class="string">"30dp"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"您收藏这张照片\n刚刚"</span></div><div class="line">            <span class="attr">android:textColor</span>=<span class="string">"#222"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"10sp"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">hanks.com.guideview.BlurringView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/blurringView"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"150dp"</span></div><div class="line">        <span class="attr">android:layout_alignParentBottom</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">app:blurRadius</span>=<span class="string">"11"</span></div><div class="line">        <span class="attr">app:downsampleFactor</span>=<span class="string">"6"</span></div><div class="line">        <span class="attr">app:overlayColor</span>=<span class="string">"#99FFFFFF"</span></div><div class="line">        &gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">hanks.com.guideview.BlurringView</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v4.view.ViewPager</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/viewpager"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        &gt;<span class="tag">&lt;/<span class="name">android.support.v4.view.ViewPager</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/tv_register"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"80dp"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"25dp"</span></div><div class="line">        <span class="attr">android:layout_alignParentBottom</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:layout_centerHorizontal</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:layout_marginBottom</span>=<span class="string">"15dp"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"#2595ec"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"注册"</span></div><div class="line">        <span class="attr">android:textColor</span>=<span class="string">"#fff"</span></div><div class="line">        <span class="attr">android:textSize</span>=<span class="string">"12sp"</span> /&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight pony"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div></pre></td><td class="code"><pre><div class="line">package hanks.com.guideview;</div><div class="line"></div><div class="line">import android.os.<span class="type">Bundle</span>;</div><div class="line">import android.support.v4.app.<span class="type">Fragment</span>;</div><div class="line">import android.support.v4.app.<span class="type">FragmentActivity</span>;</div><div class="line">import android.support.v4.app.<span class="type">FragmentManager</span>;</div><div class="line">import android.support.v4.app.<span class="type">FragmentPagerAdapter</span>;</div><div class="line">import android.support.v4.view.<span class="type">ViewPager</span>;</div><div class="line">import android.util.<span class="type">Log</span>;</div><div class="line">import android.view.<span class="type">View</span>;</div><div class="line">import android.view.<span class="type">WindowManager</span>;</div><div class="line">import android.widget.<span class="type">ImageView</span>;</div><div class="line">import android.widget.<span class="type">LinearLayout</span>;</div><div class="line">import android.widget.<span class="type">TextView</span>;</div><div class="line"></div><div class="line">import java.util.<span class="type">ArrayList</span>;</div><div class="line">import java.util.<span class="type">List</span>;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * by Hanks</div><div class="line"> */</div><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="title">extends</span> <span class="title">FragmentActivity</span> &#123;</span></div><div class="line"></div><div class="line">    private <span class="type">ViewPager</span> viewpager;</div><div class="line">    private <span class="type">ImageView</span> iv_device, iv_initial_phone;</div><div class="line">    private <span class="type">ImageView</span> iv_final_photo;</div><div class="line">    private <span class="type">List</span>&lt;<span class="type">Fragment</span>&gt; fragmentList = <span class="function"><span class="keyword">new</span> <span class="title">ArrayList</span>&lt;&gt;();</span></div><div class="line">    <span class="title">private</span> <span class="title">LinearLayout</span> <span class="title">ll_rows</span>, <span class="title">ll_comments</span>;</div><div class="line">    <span class="title">private</span> <span class="title">float</span> <span class="title">currentPosition</span> = 0;</div><div class="line">    <span class="title">private</span> <span class="title">GuideFragment</span> <span class="title">fragment00</span>, <span class="title">fragment01</span>, <span class="title">fragment02</span>, <span class="title">fragment03</span>;</div><div class="line">    <span class="title">private</span> <span class="title">TextView</span> <span class="title">tv_avatar_you</span>;</div><div class="line">    <span class="title">private</span> <span class="title">TextView</span> <span class="title">tv_register</span>;</div><div class="line"></div><div class="line">    <span class="title">private</span> <span class="title">BlurringView</span> <span class="title">blurringView</span>;</div><div class="line"></div><div class="line">    @<span class="title">Override</span></div><div class="line">    <span class="title">protected</span> <span class="title">void</span> <span class="title">onCreate</span>(<span class="type">Bundle</span> savedInstanceState) &#123;</div><div class="line">        <span class="title">super</span>.<span class="title">onCreate</span>(savedInstanceState);</div><div class="line">        <span class="title">this</span>.<span class="title">getWindow</span>().<span class="title">setFlags</span>(<span class="type">WindowManager</span>.<span class="type">LayoutParams</span>.<span class="type">FLAG_FULLSCREEN</span>, <span class="type">WindowManager</span>.<span class="type">LayoutParams</span>.<span class="type">FLAG_FULLSCREEN</span>);<span class="comment">//去掉信息栏</span></div><div class="line">        <span class="title">setContentView</span>(<span class="type">R</span>.layout.activity_main);</div><div class="line">        <span class="title">setFullscreen</span>();</div><div class="line"></div><div class="line">        <span class="title">fragment00</span> = <span class="title">new</span> <span class="title">GuideFragment</span>();</div><div class="line">        <span class="title">fragment01</span> = <span class="title">new</span> <span class="title">GuideFragment</span>();</div><div class="line">        <span class="title">fragment02</span> = <span class="title">new</span> <span class="title">GuideFragment</span>();</div><div class="line">        <span class="title">fragment03</span> = <span class="title">new</span> <span class="title">GuideFragment</span>();</div><div class="line"></div><div class="line">        <span class="title">fragmentList</span>.<span class="title">add</span>(fragment00);</div><div class="line">        <span class="title">fragmentList</span>.<span class="title">add</span>(fragment01);</div><div class="line">        <span class="title">fragmentList</span>.<span class="title">add</span>(fragment02);</div><div class="line">        <span class="title">fragmentList</span>.<span class="title">add</span>(fragment03);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="title">viewpager</span> = (<span class="type">ViewPager</span>) <span class="title">findViewById</span>(<span class="type">R</span>.id.viewpager);</div><div class="line">        <span class="title">iv_device</span> = (<span class="type">ImageView</span>) <span class="title">findViewById</span>(<span class="type">R</span>.id.iv_device);</div><div class="line">        <span class="title">iv_final_photo</span> = (<span class="type">ImageView</span>) <span class="title">findViewById</span>(<span class="type">R</span>.id.iv_final_photo);</div><div class="line">        <span class="title">tv_avatar_you</span> = (<span class="type">TextView</span>) <span class="title">findViewById</span>(<span class="type">R</span>.id.tv_avatar_you);</div><div class="line">        <span class="title">tv_register</span> = (<span class="type">TextView</span>) <span class="title">findViewById</span>(<span class="type">R</span>.id.tv_register);</div><div class="line"></div><div class="line">        <span class="title">blurringView</span> = (<span class="type">BlurringView</span>) <span class="title">findViewById</span>(<span class="type">R</span>.id.blurringView);</div><div class="line"></div><div class="line">        <span class="title">ll_rows</span> = (<span class="type">LinearLayout</span>) <span class="title">findViewById</span>(<span class="type">R</span>.id.ll_rows);</div><div class="line">        <span class="title">ll_comments</span> = (<span class="type">LinearLayout</span>) <span class="title">findViewById</span>(<span class="type">R</span>.id.ll_comments);</div><div class="line"></div><div class="line">        <span class="title">iv_initial_phone</span> = (<span class="type">ImageView</span>) <span class="title">findViewById</span>(<span class="type">R</span>.id.iv_initial_phone);</div><div class="line"></div><div class="line">        <span class="title">View</span> <span class="title">blurredView</span> = <span class="title">findViewById</span>(<span class="type">R</span>.id.blurredView);</div><div class="line">        <span class="title">blurringView</span>.<span class="title">setBlurredView</span>(blurredView);</div><div class="line"></div><div class="line">        <span class="comment">//创建adapter</span></div><div class="line">        <span class="title">GuideAdapter</span> <span class="title">adapter</span> = <span class="title">new</span> <span class="title">GuideAdapter</span>(getSupportFragmentManager());</div><div class="line">        <span class="comment">//设置viewpager缓存页数,默认的缓存一页,因为引导页共有4页,</span></div><div class="line">        <span class="comment">//所以设置缓存3页,这样所以page在滑动过程中不会重新创建</span></div><div class="line">        <span class="title">viewpager</span>.<span class="title">setOffscreenPageLimit</span>(<span class="number">3</span>);</div><div class="line">        <span class="title">viewpager</span>.<span class="title">setAdapter</span>(adapter);</div><div class="line">        <span class="title">viewpager</span>.<span class="title">setPageTransformer</span>(true, new <span class="type">HKTransformer</span>());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="title">private</span> <span class="title">void</span> <span class="title">setFullscreen</span>() &#123;</div><div class="line">        <span class="title">View</span> <span class="title">decorView</span> = <span class="title">getWindow</span>().<span class="title">getDecorView</span>();</div><div class="line">        <span class="title">int</span> <span class="title">uiOptions</span> = <span class="title">View</span>.<span class="title">SYSTEM_UI_FLAG_HIDE_NAVIGATION</span></div><div class="line">                | <span class="title">View</span>.<span class="title">SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</span></div><div class="line">                | <span class="title">View</span>.<span class="title">SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION</span></div><div class="line">                | <span class="title">View</span>.<span class="title">SYSTEM_UI_FLAG_FULLSCREEN</span></div><div class="line">                | <span class="title">View</span>.<span class="title">SYSTEM_UI_FLAG_IMMERSIVE_STICKY</span>;</div><div class="line">        <span class="title">decorView</span>.<span class="title">setSystemUiVisibility</span>(uiOptions);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="title">class</span> <span class="title">GuideAdapter</span> <span class="title">extends</span> <span class="title">FragmentPagerAdapter</span> &#123;</div><div class="line">        <span class="title">public</span> <span class="title">GuideAdapter</span>(<span class="type">FragmentManager</span> fm) &#123;</div><div class="line">            <span class="title">super</span>(fm);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @<span class="title">Override</span></div><div class="line">        <span class="title">public</span> <span class="title">Fragment</span> <span class="title">getItem</span>(int position) &#123;</div><div class="line">            <span class="title">return</span> <span class="title">fragmentList</span>.<span class="title">get</span>(position);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @<span class="title">Override</span></div><div class="line">        <span class="title">public</span> <span class="title">int</span> <span class="title">getCount</span>() &#123;</div><div class="line">            <span class="title">return</span> <span class="title">fragmentList</span>.<span class="title">size</span>();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    /**</div><div class="line">     * <span class="title">by</span> <span class="title">Hanks</span></div><div class="line">     */</div><div class="line">    <span class="title">class</span> <span class="title">HKTransformer</span> <span class="title">implements</span> <span class="title">ViewPager</span>.<span class="title">PageTransformer</span> &#123;</div><div class="line">        @<span class="title">Override</span></div><div class="line">        <span class="title">public</span> <span class="title">void</span> <span class="title">transformPage</span>(<span class="type">View</span> view, float position) &#123;</div><div class="line">            <span class="title">if</span> (fragment00.getView() == <span class="title">view</span>) &#123;</div><div class="line">                <span class="title">Log</span>.<span class="title">i</span>("", "view:    " + view + "position= " + position);</div><div class="line">                <span class="title">currentPosition</span> = <span class="title">position</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="title">blurringView</span>.<span class="title">invalidate</span>();</div><div class="line"></div><div class="line">            <span class="title">if</span> (position &lt; <span class="number">-1</span>) &#123; <span class="comment">// [-Infinity,-1)</span></div><div class="line">                <span class="comment">// This page is way off-screen to the left.</span></div><div class="line">            &#125; <span class="title">else</span> <span class="title">if</span> (position &lt;= <span class="number">0</span>) &#123; <span class="comment">// [-1,0]</span></div><div class="line">                <span class="comment">// Use the default slide transition when moving to the left page</span></div><div class="line">            &#125; <span class="title">else</span> <span class="title">if</span> (position &lt;= <span class="number">1</span>) &#123; <span class="comment">// (0,1]</span></div><div class="line">                <span class="comment">// Fade the page out.</span></div><div class="line"></div><div class="line">                <span class="title">float</span> <span class="title">p</span> = <span class="title">Math</span>.<span class="title">abs</span>(position);</div><div class="line">                <span class="title">float</span> <span class="title">f</span> = (<span class="number">1</span> - p);</div><div class="line"></div><div class="line">                <span class="title">Log</span>.<span class="title">i</span>("", "p= " + p);</div><div class="line">                <span class="comment">// p : 1~0</span></div><div class="line">                <span class="comment">// f : 0~1</span></div><div class="line"></div><div class="line">                <span class="title">iv_final_photo</span>.<span class="title">setPivotY</span>(<span class="number">0</span>f);</div><div class="line">                <span class="title">iv_final_photo</span>.<span class="title">setPivotX</span>(iv_final_photo.getWidth() / 2);</div><div class="line"></div><div class="line">                <span class="title">if</span> (<span class="number">-1</span> &lt; currentPosition &amp;&amp; currentPosition &lt;= <span class="number">0</span>) &#123;</div><div class="line">                    <span class="comment">// A ~ B 界面的动画</span></div><div class="line"></div><div class="line">                    <span class="title">iv_initial_phone</span>.<span class="title">setTranslationY</span>(<span class="number">-600</span> * f);</div><div class="line">                    <span class="title">iv_initial_phone</span>.<span class="title">setScaleX</span>(<span class="number">0.5</span>f * p + <span class="number">0.5</span>f);</div><div class="line">                    <span class="title">iv_initial_phone</span>.<span class="title">setScaleY</span>(<span class="number">0.5</span>f * p + <span class="number">0.5</span>f);</div><div class="line">                    <span class="title">iv_device</span>.<span class="title">setScaleX</span>(<span class="number">1</span> + <span class="number">2</span> * f);</div><div class="line"></div><div class="line">                    <span class="title">if</span> (p &gt; <span class="number">0.5</span> &amp;&amp; p &lt;= <span class="number">1</span>) &#123;</div><div class="line">                        <span class="title">iv_device</span>.<span class="title">setAlpha</span>(<span class="number">2</span> * p - <span class="number">1</span>);</div><div class="line">                    &#125; <span class="title">else</span> &#123;</div><div class="line">                        <span class="title">iv_device</span>.<span class="title">setAlpha</span>(<span class="number">0</span>f);</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="title">ll_comments</span>.<span class="title">setTranslationY</span>(<span class="number">800</span> * p);</div><div class="line">                    <span class="title">ll_comments</span>.<span class="title">setAlpha</span>(f);</div><div class="line">                    <span class="title">ll_comments</span>.<span class="title">setScaleX</span>(<span class="number">2</span> - f);</div><div class="line">                    <span class="title">ll_comments</span>.<span class="title">setScaleY</span>(<span class="number">2</span> - f);</div><div class="line"></div><div class="line">                    <span class="title">ll_rows</span>.<span class="title">setTranslationY</span>(<span class="number">-1000</span> - <span class="number">500</span> * p);</div><div class="line">                    <span class="title">ll_rows</span>.<span class="title">setAlpha</span>(<span class="number">0.5</span>f);</div><div class="line">                    <span class="title">iv_final_photo</span>.<span class="title">setTranslationY</span>(<span class="number">-1000</span> - <span class="number">500</span> * p);</div><div class="line">                    <span class="title">iv_final_photo</span>.<span class="title">setAlpha</span>(<span class="number">0.5</span>f);</div><div class="line"></div><div class="line">                    <span class="title">tv_avatar_you</span>.<span class="title">setTranslationY</span>(<span class="number">-300</span>);</div><div class="line"></div><div class="line">                    <span class="title">tv_register</span>.<span class="title">setTranslationY</span>(<span class="number">300</span>);</div><div class="line"></div><div class="line">                &#125; <span class="title">else</span> <span class="title">if</span> (<span class="number">-2</span> &lt; currentPosition &amp;&amp; currentPosition &lt;= <span class="number">-1</span>) &#123;</div><div class="line">                    <span class="comment">// B ~ C 界面的动画</span></div><div class="line"></div><div class="line">                    <span class="title">iv_initial_phone</span>.<span class="title">setTranslationY</span>(<span class="number">-600</span> + <span class="number">-300</span> * f);</div><div class="line"></div><div class="line">                    <span class="title">ll_comments</span>.<span class="title">setAlpha</span>(p);</div><div class="line"></div><div class="line">                    <span class="title">ll_rows</span>.<span class="title">setTranslationY</span>(<span class="number">-1000</span> * p);</div><div class="line">                    <span class="title">ll_rows</span>.<span class="title">setAlpha</span>(<span class="number">0.5</span>f + <span class="number">0.5</span>f * f);</div><div class="line"></div><div class="line">                    <span class="title">iv_final_photo</span>.<span class="title">setTranslationY</span>(<span class="number">-1000</span> * p);</div><div class="line">                    <span class="title">iv_final_photo</span>.<span class="title">setAlpha</span>(<span class="number">0.5</span>f + <span class="number">0.5</span>f * f);</div><div class="line"></div><div class="line">                    <span class="title">tv_avatar_you</span>.<span class="title">setTranslationY</span>(<span class="number">-300</span>);</div><div class="line">                    <span class="title">tv_register</span>.<span class="title">setTranslationY</span>(<span class="number">300</span>);</div><div class="line">                &#125; <span class="title">else</span> <span class="title">if</span> (<span class="number">-3</span> &lt; currentPosition &amp;&amp; currentPosition &lt;= <span class="number">-2</span>) &#123;</div><div class="line">                    <span class="comment">// C ~ D 界面的动画</span></div><div class="line"></div><div class="line"></div><div class="line">                    <span class="title">iv_final_photo</span>.<span class="title">setScaleX</span>(<span class="number">1</span> + <span class="number">3</span> * f); <span class="comment">//1~3</span></div><div class="line">                    <span class="title">iv_final_photo</span>.<span class="title">setScaleY</span>(<span class="number">1</span> + <span class="number">3</span> * f); <span class="comment">//1~3</span></div><div class="line"></div><div class="line">                    <span class="title">for</span> (int i = <span class="number">0</span>; i &lt; ll_rows.getChildCount(); <span class="title">i</span>++) &#123;</div><div class="line">                        <span class="title">View</span> <span class="title">child</span> = <span class="title">ll_rows</span>.<span class="title">getChildAt</span>(i);</div><div class="line">                        <span class="title">child</span>.<span class="title">setAlpha</span>(p);</div><div class="line">                        <span class="title">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</div><div class="line">                            <span class="title">child</span>.<span class="title">setTranslationX</span>(<span class="number">100</span> * f);</div><div class="line">                        &#125; <span class="title">else</span> &#123;</div><div class="line">                            <span class="title">child</span>.<span class="title">setTranslationX</span>(<span class="number">-100</span> * f);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="title">tv_avatar_you</span>.<span class="title">setTranslationY</span>(<span class="number">-300</span> + <span class="number">300</span> * f);</div><div class="line"></div><div class="line">                    <span class="title">tv_register</span>.<span class="title">setTranslationY</span>(<span class="number">300</span> - <span class="number">300</span> * f);</div><div class="line">                &#125;</div><div class="line"></div><div class="line"></div><div class="line">            &#125; <span class="title">else</span> &#123; <span class="comment">// (1,+Infinity]</span></div><div class="line">                <span class="comment">// This page is way off-screen to the right.</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>源代码下载:<a href="https://github.com/hanks-zyh/500px-guideview" target="_blank" rel="external">https://github.com/hanks-zyh/500px-guideview</a></p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-HTTPie__a_CLI,_cURL-like_tool_for_humans" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/17/HTTPie__a_CLI,_cURL-like_tool_for_humans/">HTTPie:a CLI, cURL-like tool for humans</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p style="margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
</p>
<h1><span style="font-size:12px"></span></h1>
<h1 style="font-size:2.25em; margin-right:0px; margin-bottom:16px; margin-left:0px; line-height:1.2; position:relative; padding-bottom:0.3em; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(238,238,238); color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif; margin-top:0px!important">
HTTPie</h1>
<br>
<p></p>
<p style="margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<br>
</p>
<p style="font-size:22px; margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<br>
</p>
<p style="font-size:22px; margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<img src="http://ww3.sinaimg.cn/mw690/7cc829d3gw1ejbewyhgazj20d10970t3.jpg" alt=""><br>
</p>
<p style="font-size:22px; margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<img src="https://raw.githubusercontent.com/jakubroztocil/httpie/master/httpie.png" alt=""><br>
</p>
<p style="font-size:22px; margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<a target="_blank" href="https://github.com/jkbrzt/httpie" style="font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:18px; line-height:18px">github</a><br>
</p>
<p style="font-size:22px; margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<br>
</p>
<p style="font-size:22px; margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<span style="font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:22.5px">HTTPie 是用 Python 编写，用到了&nbsp;</span><a target="_blank" href="http://python-requests.org/" style="color:rgb(88,176,213); text-decoration:none; font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:22.5px">Requests</a><span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:22.5px">&nbsp;和&nbsp;</span><a target="_blank" href="http://pygments.org/" style="color:rgb(88,176,213); text-decoration:none; font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:22.5px">Pygments</a><span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:22.5px">&nbsp;这些出色的库。</span><br>
</p>
<p style="font-size:22px; margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:22.5px"><br>
</span></p>
<p style="font-size:22px; margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:22.5px"><br>
</span></p>
<p style="font-size:22px; margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:22.5px"></span></p>
<p style="margin-top:0px; margin-bottom:10px; color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:22.5px">
<span style="">主要特性：</span></p>
<ul style="margin-top:0px; margin-bottom:10px; color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:22.5px">
<li style="margin-bottom:5px">直观的语法</li><li style="margin-bottom:5px">&#26684;式化和色彩化的终端输出</li><li style="margin-bottom:5px">内置 JSON 支持</li><li style="margin-bottom:5px">支持上传表单和文件</li><li style="margin-bottom:5px">HTTPS、代理和认证</li><li style="margin-bottom:5px">任意请求数据</li><li style="margin-bottom:5px">自定义头部</li><li style="margin-bottom:5px">持久性会话</li><li style="margin-bottom:5px">类 Wget 下载</li><li style="margin-bottom:5px">支持 Python 2.6, 2.7 和 3.x</li><li style="margin-bottom:5px">支持 Linux, Mac OS X 和 Windows</li><li style="margin-bottom:5px">插件</li><li style="margin-bottom:5px">文档</li><li style="margin-bottom:5px">测试覆盖率</li></ul>
<h2 style="margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; line-height:22.5px"><span style="font-size:24px">安装</span></span></h2>
<div><span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; line-height:22.5px"><span style="font-size:24px"><br>
</span></span></div>
<p style="font-size:22px; margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:15px; line-height:22.5px"><span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px"><span style="white-space:pre"></span><span style="white-space:pre"></span>Mac
 OS X</span><br>
</span></p>
<p style="margin:0px; font-weight:normal; color:rgb(46,46,46); padding:0px"><span style="font-family:Microsoft YaHei,宋体,Lato,Helvetica Neue,Helvetica,Arial,sans-serif"><span style="font-size:15px; line-height:22.5px"></span></span></p>
<pre style="margin:0px 2em; padding:10px; line-height:17.8231201171875px"><span class="nv" style="color:rgb(187,96,213)">$ </span>brew install httpie</pre>
<p></p>
<p><span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px"><span style="white-space:pre"></span><span style="white-space:pre"></span>Linux</span><span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px">&nbsp;</span></p>
<p><span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px"></span></p>
<pre style="margin:0px 2em; padding:10px; line-height:17.8231201171875px"><span class="c" style="color:rgb(96,160,176); font-style:italic"># Debian-based distributions such as Ubuntu:
</span><span class="nv" style="color:rgb(187,96,213)">$ </span>apt-get install httpie

<span class="c" style="color:rgb(96,160,176); font-style:italic"># RPM-based distributions:
</span><span class="nv" style="color:rgb(187,96,213)">$ </span>yum install httpie</pre>
<p></p>
<p><span style="white-space:pre"></span><span style="white-space:pre"></span>通过<a target="_blank" href="http://www.pip-installer.org/en/latest/index.html" rel="nofollow" style="border-bottom-width:1px; border-bottom-style:dashed; border-bottom-color:rgb(204,204,204); color:rgb(85,26,139); text-decoration:none; font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px">pip</a><span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px">:</span></p>
<p><span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px"></span></p>
<pre style="margin:0px 2em; padding:10px; line-height:17.8231201171875px"><span class="c" style="color:rgb(96,160,176); font-style:italic"># Make sure we have an up-to-date version of pip and setuptools:
</span><span class="nv" style="color:rgb(187,96,213)">$ </span>pip install --upgrade pip setuptools

<span class="nv" style="color:rgb(187,96,213)">$ </span>pip install --upgrade httpie</pre>
<br>
<p></p>
<p><span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px"><br>
</span></p>
<p><span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; line-height:21.9606304168701px"><span style="font-size:24px">使用</span></span></p>
<p><span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="http://img.blog.csdn.net/20150817000201064?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br>
</span></p>
<p><span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px"><span style="white-space:pre"></span>hello world</span></p>
<p><span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px"></span></p>
<pre style="margin:0px 2em; padding:10px; line-height:17.8231201171875px"><span class="nv" style="color:rgb(187,96,213)">$ </span>http httpie.org</pre>
<br>
<p><strong><span style="font-size:24px"><span style="font-family:monospace; line-height:17.8430118560791px">http&nbsp;</span><span class="pre" style="white-space:pre; font-family:monospace; line-height:17.8430118560791px">--help</span></span></strong></p>
<p><br>
</p>
<p><span style="font-size:18px">参考手册</span></p>
<p><a target="_blank" href="https://pypi.python.org/pypi/httpie"><span style="font-size:18px">https://pypi.python.org/pypi/httpie</span></a><br>
</p>
<p style="font-size:22px; margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<br>
</p>
<p style="font-size:22px; margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<br>
</p>
<h2 style="margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; line-height:22.5px"><span style="font-size:24px">例子</span></span></h2>
<p></p>
<ul>
<li><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"><span style="font-size:14px">自定义HTTP方法,HTTP header和JSON数据</span></span></li></ul>
<p></p>
<p></p>
<p style="margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<span style="font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; line-height:22.5px"><span style="font-size:14px"><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"></span></span></span></p>
<pre name="code" class="html">$ http PUT example.org X-API-Token:123 name=John</pre>
<p></p>
<p style="margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
</p>
<ul>
<li><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"><span style="font-size:14px">提交表单</span></span></li></ul>
<p></p>
<p style="margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<span style="font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; line-height:22.5px"><span style="font-size:14px"><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"></span></span></span></p>
<pre name="code" class="html">$ http -f POST example.org hello=World</pre>
<ul>
<li><span style="font-size:14px">打印发送请求<span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px">使用的输出项</span></span></li></ul>
<p></p>
<p style="margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; line-height:22.5px"><span style="font-size:14px"><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"></span></span></span></p>
<pre name="code" class="html">$ http -v example.org</pre>
<ul>
<li><span style="font-size:14px">利用<span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px">使用Github API发布评论和验证一个问题</span></span></li></ul>
<p></p>
<p style="margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; line-height:22.5px"><span style="font-size:14px"><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"></span></span></span></p>
<pre name="code" class="html">$ http -a USERNAME POST https://api.github.com/repos/jakubroztocil/httpie/issues/83/comments body=&#39;HTTPie is awesome!&#39;</pre><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"></span>
<ul>
<li><span style="font-size:14px">使用重定向输入上传一个文件</span></li></ul>
<p></p>
<p style="margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; line-height:22.5px"><span style="font-size:14px"><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"></span></span></span></p>
<pre name="code" class="html">$ http example.org &lt; file.json</pre><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"></span>
<ul>
<li><span style="font-size:14px">下载一个文件并通过重定向输出将其保存</span></li></ul>
<p></p>
<p style="margin:0px; font-family:'Microsoft YaHei',宋体,'Myriad Pro',Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:normal; line-height:1; color:rgb(46,46,46); padding:0px">
<span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; line-height:22.5px"><span style="font-size:14px"><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"></span></span></span></p>
<pre name="code" class="html">$ http example.org/file &gt; file</pre>
<pre></pre>
<p></p>
<p></p>
<ul>
<li><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"><span style="font-size:14px">wget风&#26684;下载文件</span></span></li></ul>
<p></p>
<p><span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; line-height:22.5px"><span style="font-size:14px"><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"></span></span></span></p>
<pre name="code" class="html">$ http --download example.org/file</pre><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"></span>
<ul>
<li><span style="font-size:14px">使用session保持请求相同的主机之间的通信</span></li></ul>
<pre name="code" class="html">$ http --session=logged-in -a username:password httpbin.org/get API-Key:123

$ http --session=logged-in httpbin.org/headers</pre><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"></span>
<ul>
<li><span style="font-size:14px">设置一个自定义的主机头工作在失踪的DNS记录:</span></li></ul>
<pre name="code" class="html">$ http localhost:8000 Host:example.com</pre><span style="font-size:14px"><br>
</span>
<h2 style="font-family:Georgia,'Bitstream Vera Serif','New York',Palatino,serif; font-weight:normal; line-height:1em; font-size:20.4965877532959px; color:rgb(54,109,156); margin:0.7em 0px">
HTTP Method</h2>
<div id="http-method" style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:17.8231201171875px">
<p style="line-height:1.5">HTTP 请求方法位于 URL的左边,下面是使用DELETE方法进行请求</p>
<pre style="margin:0px 2em; padding:10px"><span class="nv" style="color:rgb(187,96,213)">$ </span>http DELETE example.org/todos/7
</pre>
<p style="line-height:1.5">就像执行了下面的request-line命令行</p>
<pre style="margin:0px 2em; padding:10px"><span class="nf" style="color:rgb(6,40,126)">DELETE</span> <span class="nn" style="color:rgb(14,132,181); font-weight:bold">/todos/7</span> <span class="kr" style="color:rgb(0,112,32); font-weight:bold">HTTP</span><span class="o" style="color:rgb(102,102,102)">/</span><span class="m" style="color:rgb(64,160,112)">1.1</span>
</pre>
<p style="line-height:1.5">HTTPie 默认使用&nbsp;<strong><tt>GET</tt>&nbsp;</strong>(with no request data) 或者&nbsp;<strong><tt>POST</tt>&nbsp;</strong>(with request data).</p>
</div>
<div id="request-url" style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:17.8231201171875px">
<h2 style="font-family:Georgia,'Bitstream Vera Serif','New York',Palatino,serif; font-weight:normal; line-height:1em; font-size:20.4965877532959px; color:rgb(54,109,156); margin:0.7em 0px">
Request URL</h2>
<p style="line-height:1.5">&nbsp;HTTPie 需要请求一个URL. 默认的 scheme 是&nbsp;<tt><span class="pre" style="white-space:pre"><strong>http://</strong></span></tt>, 而且可以省略参数
<strong>–&nbsp;</strong><tt><strong>http</strong> , <span style="font-family:monospace; font-size:14.640419960022px; line-height:21.9606304168701px; white-space:pre">
<span style="font-family:monospace; font-size:14.640419960022px; line-height:21.9606304168701px"><strong>example.org</strong></span></span>就代表了
<strong>http://</strong><span style="font-family:monospace; font-size:14.640419960022px; line-height:21.9606304168701px"><strong>example.org</strong>,此外,支持curl类&#20284;的localhost, 例如&nbsp;<span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px"><strong>&nbsp;</strong></span><tt style="font-size:14.640419960022px; line-height:21.9606304168701px"><strong>:3000</strong>
 代表&nbsp;<span style="font-family:monospace; font-size:14.640419960022px; line-height:21.9606304168701px; white-space:pre"><strong>http://localhost:3000,
</strong>默认是80端口</span></tt></span></tt></p>
<pre style="margin:0px 2em; padding:10px"><span class="nv" style="color:rgb(187,96,213)">$ </span>http :/foo
</pre>
<pre style="margin:0px 2em; padding:10px"><span class="nf" style="color:rgb(6,40,126)">GET</span> <span class="nn" style="color:rgb(14,132,181); font-weight:bold">/foo</span> <span class="kr" style="color:rgb(0,112,32); font-weight:bold">HTTP</span><span class="o" style="color:rgb(102,102,102)">/</span><span class="m" style="color:rgb(64,160,112)">1.1</span>
<span class="na" style="color:rgb(64,112,160)">Host</span><span class="o" style="color:rgb(102,102,102)">:</span> <span class="l">localhost</span>
</pre>
<pre style="margin:0px 2em; padding:10px"><span class="nv" style="color:rgb(187,96,213)">$ </span>http :3000/bar
</pre>
<pre style="margin:0px 2em; padding:10px"><span class="nf" style="color:rgb(6,40,126)">GET</span> <span class="nn" style="color:rgb(14,132,181); font-weight:bold">/bar</span> <span class="kr" style="color:rgb(0,112,32); font-weight:bold">HTTP</span><span class="o" style="color:rgb(102,102,102)">/</span><span class="m" style="color:rgb(64,160,112)">1.1</span>
<span class="na" style="color:rgb(64,112,160)">Host</span><span class="o" style="color:rgb(102,102,102)">:</span> <span class="l">localhost:3000</span>
</pre>
<pre style="margin:0px 2em; padding:10px"><span class="nv" style="color:rgb(187,96,213)">$ </span>http :
</pre>
<pre style="margin:0px 2em; padding:10px"><span class="nf" style="color:rgb(6,40,126)">GET</span> <span class="nn" style="color:rgb(14,132,181); font-weight:bold">/</span> <span class="kr" style="color:rgb(0,112,32); font-weight:bold">HTTP</span><span class="o" style="color:rgb(102,102,102)">/</span><span class="m" style="color:rgb(64,160,112)">1.1</span>
<span class="na" style="color:rgb(64,112,160)">Host</span><span class="o" style="color:rgb(102,102,102)">:</span> <span class="l">localhost</span>
</pre>
<p style="line-height:1.5">当手动在url中添加&nbsp;<strong>querystring parameters&nbsp;</strong>, 可以直接使用&nbsp;<strong>key==value</strong>
<span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px">
<strong>key==value</strong></span><span style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:21.9606304168701px"><strong>&nbsp;</strong>&nbsp;</span>的形式而不用担心
<strong>&amp;</strong>&nbsp;符号.&nbsp;</p>
<pre style="margin:0px 2em; padding:10px"><span class="nv" style="color:rgb(187,96,213)">$ </span>http GET www.google.com <span class="nv" style="color:rgb(187,96,213)">search</span><span class="o" style="color:rgb(102,102,102)">==</span>HTTPie <span class="nv" style="color:rgb(187,96,213)">tbm</span><span class="o" style="color:rgb(102,102,102)">==</span>isch
</pre>
<pre style="margin:0px 2em; padding:10px"><span class="nf" style="color:rgb(6,40,126)">GET</span> <span class="nn" style="color:rgb(14,132,181); font-weight:bold">/?search=HTTPie&amp;tbm=isch</span> <span class="kr" style="color:rgb(0,112,32); font-weight:bold">HTTP</span><span class="o" style="color:rgb(102,102,102)">/</span><span class="m" style="color:rgb(64,160,112)">1.1</span>
</pre>
</div>
<div id="request-items" style="font-family:Arial,Verdana,Geneva,'Bitstream Vera Sans',Helvetica,sans-serif; font-size:14.640419960022px; line-height:17.8231201171875px">
<h2 style="font-family:Georgia,'Bitstream Vera Serif','New York',Palatino,serif; font-weight:normal; line-height:1em; font-size:20.4965877532959px; color:rgb(54,109,156); margin:0.7em 0px">
<br>
</h2>
</div>
<br>
<p></p>
<span style="color:rgb(46,46,46); font-family:'Microsoft YaHei',宋体,Lato,'Helvetica Neue',Helvetica,Arial,sans-serif; line-height:22.5px"><span style="color:rgb(43,43,43); font-family:arial,sans-serif; line-height:21px"><span style="font-size:14px">&nbsp;</span></span></span>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-来自Gradle的hello_world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/11/来自Gradle的hello_world/">来自Gradle的hello world</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="来自Gradle的hello-world"><a href="#来自Gradle的hello-world" class="headerlink" title="来自Gradle的hello world"></a>来自Gradle的hello world</h1><blockquote>
<p>Android Studio使用<strong><code>Gradle</code></strong> 构建项目</p>
</blockquote>
<p><strong>为什么要用Gradle？</strong></p>
<p> Gradle是比较先进的构建系统，也是一个很好的构建工具，允许通过插件自定义构建逻辑</p>
<p> <strong>为什么Android Studio选择Gradle?</strong></p>
<ul>
<li>使用领域专用语言（Domain Specific Language）来描述和处理构建逻辑。（以下简称DSL）</li>
<li>基于Groovy。DSL可以混合各种声明元素，用代码操控这些DSL元素达到逻辑自定义。</li>
<li>支持已有的Maven或者Ivy仓库基础建设</li>
<li>非常灵活，允许使用best practices，并不强制让你遵照它的原则来。</li>
<li>其它插件时可以暴露自己的DSL和API来让Gradle构建文件使用。</li>
<li>允许IDE集成，是很好的API工具</li>
</ul>
<hr>
<h1 id="下载-配置"><a href="#下载-配置" class="headerlink" title="下载 配置"></a><strong>下载 配置</strong></h1><ol>
<li>Gradle官网 <a href="http://gradle.org" target="_blank" rel="external">下载</a> 最新版本(目前最新2.6)</li>
<li>设置环境变量</li>
</ol>
<ul>
<li>添加<code>GRADLE_HOME</code>环境变量来制定Gradle的安装目录</li>
<li>添加<code>GRADLE_HOME\bin</code>到path环境变量中</li>
</ul>
<ol>
<li>检查测试配置结果<br>打开命令行,输入 <code>gradle -v</code><br><img src="http://img.blog.csdn.net/20150811232853764" alt="这里写图片描述"><h1 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a><strong>Hello World</strong></h1><blockquote>
<p>你可以通过    <code>gradle</code>命令运行一个Gradle构建. <code>gradle</code>命令会在当前目录中查找一个叫<code>build.gradle</code>    的文件.    我们称这个<code>build.gradle</code>文件为一个构建脚本    (build    script),但是严格来说它是一个构建配置脚本    (build configuration script).    这个脚本定义了一个    project    和它的tasks.</p>
</blockquote>
</li>
</ol>
<h2 id="创建-build-gradle-文件"><a href="#创建-build-gradle-文件" class="headerlink" title="创建 build.gradle 文件"></a>创建 build.gradle 文件</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">task</span> hello&#123;</div><div class="line">    <span class="keyword">doLast</span>&#123;</div><div class="line">        <span class="keyword">println</span> <span class="string">'Hello world!'</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>进入文件所在目录, 运行命令 <code>gradle -q hello</code><br>输出:<br><img src="http://img.blog.csdn.net/20150811232952218" alt="这里写图片描述"><br>这个构建脚本定义了一个独立的 <strong>task,</strong>叫做<strong>hello</strong>, 并且加入了一个    action.    当你运行 gradle    hello,    Gradle 执行叫做    hello 的 task,    也就是执行了你所提供的    action.    这个 action    是一个包含了一些    Groovy    代码的闭包.</p>
<p><code>-q</code> : 代表quite模式.它不会生成    Gradle    的日志信息    (log    messages),    所以用户只能看到tasks 的输出.    它使得的输出更加清晰.    你并不一定需要加入这个选项.</p>
<h2 id="便捷的定义"><a href="#便捷的定义" class="headerlink" title="便捷的定义"></a>便捷的定义</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">task</span> hello	&lt;&lt; &#123;</div><div class="line">	<span class="keyword">println</span>	<span class="string">'Hello	world!'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>与前面的例子比较,    <strong>doLast</strong>    被替换成了    <strong>&lt;&lt;</strong>     它们有一样的功能,    但看上去更加简洁了</p>
<h2 id="构建脚本代码"><a href="#构建脚本代码" class="headerlink" title="构建脚本代码"></a>构建脚本代码</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">task upper &lt;&lt; &#123;</div><div class="line">    <span class="keyword">String</span> someString = <span class="string">'my_name'</span></div><div class="line">    <span class="built_in">println</span> <span class="string">"Original: "</span> + someString</div><div class="line">    <span class="built_in">println</span> <span class="string">"Upper case: "</span>+ someString.toUpperCase()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行:  <code>gradle -q upper</code><br>结果:<br><img src="http://img.blog.csdn.net/20150811232924267" alt="这里写图片描述"><br>在    Gradle    任务里使用    Groovy<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">task</span> <span class="keyword">count</span> &lt;&lt; &#123;</div><div class="line">    <span class="number">4</span>.<span class="keyword">times</span> &#123; <span class="keyword">print</span> <span class="string">"$it "</span> &#125;</div><div class="line">    <span class="keyword">println</span> <span class="string">""</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>输出:</p>
<p><img src="http://img.blog.csdn.net/20150811233007639" alt="这里写图片描述"></p>
<h2 id="任务依赖"><a href="#任务依赖" class="headerlink" title="任务依赖"></a>任务依赖</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">task</span> hello &lt;&lt; &#123;</div><div class="line">    <span class="keyword">println</span> <span class="string">"Hello World!"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">task</span> intro(dependsOn: hello) &lt;&lt; &#123;</div><div class="line">    <span class="keyword">println</span> <span class="string">"I'm Gradle"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行:      <code>gradle -q intro</code><br>结果:</p>
<p><img src="http://img.blog.csdn.net/20150811232943087" alt="这里写图片描述"></p>
<p>intro 依赖于 hello,    所以执行 intro 的时候 hello 命令会被优先执行来作为启动 intro 任务的条件.<br>在加入一个依赖之前,    这个依赖的任务<strong>不需要提前定义</strong>, 来看下面的例子<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">task</span> taskY(dependsOn: <span class="string">'taskX'</span>) &lt;&lt; &#123;</div><div class="line">    <span class="keyword">println</span> <span class="string">"taskY"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">task</span> taskX &lt;&lt; &#123;</div><div class="line">    <span class="keyword">println</span> <span class="string">"taskX"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://img.blog.csdn.net/20150811233017780" alt="这里写图片描述"></p>
<hr>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-Android中的Interpolator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/22/Android中的Interpolator/">Android中的Interpolator</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="gt-首先介绍一个网站-https-www-desmos-com，这是一个通过函数来生成函数图像的网站，使用起来很灵活，可以-同时添加多个函数图像，分别指定他们的定义域。感谢道哥分享！"><a href="#gt-首先介绍一个网站-https-www-desmos-com，这是一个通过函数来生成函数图像的网站，使用起来很灵活，可以-同时添加多个函数图像，分别指定他们的定义域。感谢道哥分享！" class="headerlink" title="&gt;首先介绍一个网站 https://www.desmos.com，这是一个通过函数来生成函数图像的网站，使用起来很灵活，可以 同时添加多个函数图像，分别指定他们的定义域。感谢道哥分享！"></a>&gt;首先介绍一个网站 <a href="https://www.desmos.com" target="_blank" rel="external">https://www.desmos.com</a>，这是一个通过函数来生成函数图像的网站，使用起来很灵活，可以 同时添加多个函数图像，分别指定他们的定义域。感谢道哥分享！</h2><h1 id="系统提供的Interpolator"><a href="#系统提供的Interpolator" class="headerlink" title="系统提供的Interpolator"></a>系统提供的Interpolator</h1><h2 id="LinearInterpolator-线性插值器"><a href="#LinearInterpolator-线性插值器" class="headerlink" title="LinearInterpolator 线性插值器"></a>LinearInterpolator 线性插值器</h2><p><img src="http://img.blog.csdn.net/20150722001839478" alt="这里写图片描述"><br><img src="http://cogitolearning.co.uk/wp-content/uploads/2013/10/linear_settings.png" alt="这里写图片描述"><br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinearInterpolator</span> <span class="keyword">extends</span> <span class="title">BaseInterpolator</span> <span class="keyword">implements</span> <span class="title">NativeInterpolatorFactory</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinearInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinearInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> input;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">long</span> <span class="title">createNativeInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">return</span> NativeInterpolatorFactoryHelper.<span class="title">createLinearInterpolator</span><span class="params">()</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="AccelerateInterpolator-加速插值器"><a href="#AccelerateInterpolator-加速插值器" class="headerlink" title="AccelerateInterpolator  加速插值器"></a>AccelerateInterpolator  加速插值器</h2><p> <img src="http://img.blog.csdn.net/20150722000557925" alt="这里写图片描述"><br> <img src="http://cogitolearning.co.uk/wp-content/uploads/2013/10/accelerate_settings.png" alt="这里写图片描述"><br>源代码：<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccelerateDecelerateInterpolator</span> <span class="keyword">extends</span> <span class="title">BaseInterpolator</span></span></div><div class="line">        <span class="keyword">implements</span> <span class="title">NativeInterpolatorFactory</span> &#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateDecelerateInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@SuppressWarnings</span>(&#123;<span class="string">"UnusedDeclaration"</span>&#125;)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateDecelerateInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123; <span class="comment">//这里定义的函数</span></div><div class="line">        <span class="keyword">return</span> (<span class="keyword">float</span>)(Math.cos((input + <span class="number">1</span>) * Math.PI) / <span class="number">2.0</span>f) + <span class="number">0.5</span>f;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">long</span> <span class="title">createNativeInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">return</span> NativeInterpolatorFactoryHelper.<span class="title">createAccelerateDecelerateInterpolator</span><span class="params">()</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="减速DecelerateInterpolator"><a href="#减速DecelerateInterpolator" class="headerlink" title="减速DecelerateInterpolator"></a>减速DecelerateInterpolator</h2><p><img src="http://img.blog.csdn.net/20150722001105691" alt="这里写图片描述"><br><img src="http://cogitolearning.co.uk/wp-content/uploads/2013/10/decelerate_settings.png" alt="这里写图片描述"><br>源码：<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * An interpolator where the rate of change starts out quickly and</div><div class="line"> * and then decelerates.</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="meta">@HasNativeInterpolator</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DecelerateInterpolator</span> <span class="keyword">extends</span> <span class="title">BaseInterpolator</span> <span class="keyword">implements</span> <span class="title">NativeInterpolatorFactory</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DecelerateInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Constructor</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> factor Degree to which the animation should be eased. Setting factor to 1.0f produces</div><div class="line">     *        an upside-down y=x^2 parabola. Increasing factor above 1.0f makes exaggerates the</div><div class="line">     *        ease-out effect (i.e., it starts even faster and ends evens slower)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DecelerateInterpolator</span><span class="params">(<span class="keyword">float</span> factor)</span> </span>&#123;</div><div class="line">        mFactor = factor;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DecelerateInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(context.getResources(), context.getTheme(), attrs);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DecelerateInterpolator</span><span class="params">(Resources res, Theme theme, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a;</div><div class="line">        <span class="keyword">if</span> (theme != <span class="keyword">null</span>) &#123;</div><div class="line">            a = theme.obtainStyledAttributes(attrs, R.styleable.DecelerateInterpolator, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            a = res.obtainAttributes(attrs, R.styleable.DecelerateInterpolator);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        mFactor = a.getFloat(R.styleable.DecelerateInterpolator_factor, <span class="number">1.0</span>f);</div><div class="line">        setChangingConfiguration(a.getChangingConfigurations());</div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">float</span> result;</div><div class="line">        <span class="keyword">if</span> (mFactor == <span class="number">1.0</span>f) &#123;</div><div class="line">            result = (<span class="keyword">float</span>)(<span class="number">1.0</span>f - (<span class="number">1.0</span>f - input) * (<span class="number">1.0</span>f - input));</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            result = (<span class="keyword">float</span>)(<span class="number">1.0</span>f - Math.pow((<span class="number">1.0</span>f - input), <span class="number">2</span> * mFactor));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mFactor = <span class="number">1.0</span>f;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">long</span> <span class="title">createNativeInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">return</span> NativeInterpolatorFactoryHelper.<span class="title">createDecelerateInterpolator</span><span class="params">(mFactor)</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>##AccelerateDecelerateInterpolator  加速减速插值器<br><img src="http://img.blog.csdn.net/20150722001638975" alt="这里写图片描述"><br><img src="http://cogitolearning.co.uk/wp-content/uploads/2013/10/accelerate_decelerate_settings.png" alt="这里写图片描述"><br>源码：<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@HasNativeInterpolator</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccelerateDecelerateInterpolator</span> <span class="keyword">extends</span> <span class="title">BaseInterpolator</span></span></div><div class="line">        <span class="keyword">implements</span> <span class="title">NativeInterpolatorFactory</span> &#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateDecelerateInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@SuppressWarnings</span>(&#123;<span class="string">"UnusedDeclaration"</span>&#125;)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccelerateDecelerateInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123; <span class="comment">//这里定义函数</span></div><div class="line">        <span class="keyword">return</span> (<span class="keyword">float</span>)(Math.cos((input + <span class="number">1</span>) * Math.PI) / <span class="number">2.0</span>f) + <span class="number">0.5</span>f;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">long</span> <span class="title">createNativeInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">return</span> NativeInterpolatorFactoryHelper.<span class="title">createAccelerateDecelerateInterpolator</span><span class="params">()</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="BounceInterpolator-弹跳插值器"><a href="#BounceInterpolator-弹跳插值器" class="headerlink" title="BounceInterpolator 弹跳插值器"></a>BounceInterpolator 弹跳插值器</h2><p><img src="http://img.blog.csdn.net/20150722004214712" alt="这里写图片描述"><br><img src="http://cogitolearning.co.uk/wp-content/uploads/2013/10/bounce_settings.png" alt="这里写图片描述"><br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"></div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.android.internal.view.animation.HasNativeInterpolator;</div><div class="line"><span class="keyword">import</span> com.android.internal.view.animation.NativeInterpolatorFactory;</div><div class="line"><span class="keyword">import</span> com.android.internal.view.animation.NativeInterpolatorFactoryHelper;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * An interpolator where the change bounces at the end.</div><div class="line"> */</div><div class="line"><span class="meta">@HasNativeInterpolator</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BounceInterpolator</span> <span class="keyword">extends</span> <span class="title">BaseInterpolator</span> <span class="keyword">implements</span> <span class="title">NativeInterpolatorFactory</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BounceInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@SuppressWarnings</span>(&#123;<span class="string">"UnusedDeclaration"</span>&#125;)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BounceInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="function"><span class="keyword">float</span> <span class="title">bounce</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> t * t * <span class="number">8.0</span>f;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="comment">// _b(t) = t * t * 8</span></div><div class="line">        <span class="comment">// bs(t) = _b(t) for t &lt; 0.3535</span></div><div class="line">        <span class="comment">// bs(t) = _b(t - 0.54719) + 0.7 for t &lt; 0.7408</span></div><div class="line">        <span class="comment">// bs(t) = _b(t - 0.8526) + 0.9 for t &lt; 0.9644</span></div><div class="line">        <span class="comment">// bs(t) = _b(t - 1.0435) + 0.95 for t &lt;= 1.0</span></div><div class="line">        <span class="comment">// b(t) = bs(t * 1.1226)</span></div><div class="line">        t *= <span class="number">1.1226</span>f;</div><div class="line">        <span class="keyword">if</span> (t &lt; <span class="number">0.3535</span>f) <span class="function"><span class="keyword">return</span> <span class="title">bounce</span><span class="params">(t)</span></span>;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (t &lt; <span class="number">0.7408</span>f) <span class="keyword">return</span> bounce(t - <span class="number">0.54719</span>f) + <span class="number">0.7</span>f;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (t &lt; <span class="number">0.9644</span>f) <span class="keyword">return</span> bounce(t - <span class="number">0.8526</span>f) + <span class="number">0.9</span>f;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">return</span> bounce(t - <span class="number">1.0435</span>f) + <span class="number">0.95</span>f;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">long</span> <span class="title">createNativeInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">return</span> NativeInterpolatorFactoryHelper.<span class="title">createBounceInterpolator</span><span class="params">()</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>##AnticipateInterpolator 回荡秋千插值器<br><img src="http://img.blog.csdn.net/20150722002030894" alt="这里写图片描述"><br><img src="http://cogitolearning.co.uk/wp-content/uploads/2013/10/anticipate_settings.png" alt="这里写图片描述"><br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnticipateInterpolator</span> <span class="keyword">extends</span> <span class="title">BaseInterpolator</span> <span class="keyword">implements</span> <span class="title">NativeInterpolatorFactory</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">float</span> mTension;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        mTension = <span class="number">2.0</span>f;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> tension Amount of anticipation. When tension equals 0.0f, there is</div><div class="line">     *                no anticipation and the interpolator becomes a simple</div><div class="line">     *                acceleration interpolator.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateInterpolator</span><span class="params">(<span class="keyword">float</span> tension)</span> </span>&#123;</div><div class="line">        mTension = tension;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(context.getResources(), context.getTheme(), attrs);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateInterpolator</span><span class="params">(Resources res, Theme theme, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a;</div><div class="line">        <span class="keyword">if</span> (theme != <span class="keyword">null</span>) &#123;</div><div class="line">            a = theme.obtainStyledAttributes(attrs, R.styleable.AnticipateInterpolator, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            a = res.obtainAttributes(attrs, R.styleable.AnticipateInterpolator);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        mTension = a.getFloat(R.styleable.AnticipateInterpolator_tension, <span class="number">2.0</span>f);</div><div class="line">        setChangingConfiguration(a.getChangingConfigurations());</div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="comment">// a(t) = t * t * ((tension + 1) * t - tension)</span></div><div class="line">        <span class="keyword">return</span> t * t * ((mTension + <span class="number">1</span>) * t - mTension);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">long</span> <span class="title">createNativeInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">return</span> NativeInterpolatorFactoryHelper.<span class="title">createAnticipateInterpolator</span><span class="params">(mTension)</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="AnticipateOvershootInterpolator"><a href="#AnticipateOvershootInterpolator" class="headerlink" title="AnticipateOvershootInterpolator"></a>AnticipateOvershootInterpolator</h2><p><img src="http://img.blog.csdn.net/20150722004047492" alt="这里写图片描述"><br><img src="http://cogitolearning.co.uk/wp-content/uploads/2013/10/anticipate_overshoot_settings.png" alt=""><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * An interpolator where the change starts backward then flings forward and overshoots</div><div class="line"> * the target value and finally goes back to the final value.</div><div class="line"> */</div><div class="line"><span class="meta">@HasNativeInterpolator</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnticipateOvershootInterpolator</span> <span class="keyword">extends</span> <span class="title">BaseInterpolator</span></span></div><div class="line">        <span class="keyword">implements</span> <span class="title">NativeInterpolatorFactory</span> &#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">float</span> mTension;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateOvershootInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        mTension = <span class="number">2.0f</span> * <span class="number">1.5f</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> tension Amount of anticipation/overshoot. When tension equals 0.0f,</div><div class="line">     *                there is no anticipation/overshoot and the interpolator becomes</div><div class="line">     *                a simple acceleration/deceleration interpolator.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateOvershootInterpolator</span><span class="params">(<span class="keyword">float</span> tension)</span> </span>&#123;</div><div class="line">        mTension = tension * <span class="number">1.5f</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> tension Amount of anticipation/overshoot. When tension equals 0.0f,</div><div class="line">     *                there is no anticipation/overshoot and the interpolator becomes</div><div class="line">     *                a simple acceleration/deceleration interpolator.</div><div class="line">     * <span class="doctag">@param</span> extraTension Amount by which to multiply the tension. For instance,</div><div class="line">     *                     to get the same overshoot as an OvershootInterpolator with</div><div class="line">     *                     a tension of 2.0f, you would use an extraTension of 1.5f.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateOvershootInterpolator</span><span class="params">(<span class="keyword">float</span> tension, <span class="keyword">float</span> extraTension)</span> </span>&#123;</div><div class="line">        mTension = tension * extraTension;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateOvershootInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(context.getResources(), context.getTheme(), attrs);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnticipateOvershootInterpolator</span><span class="params">(Resources res, Theme theme, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a;</div><div class="line">        <span class="keyword">if</span> (theme != <span class="keyword">null</span>) &#123;</div><div class="line">            a = theme.obtainStyledAttributes(attrs, AnticipateOvershootInterpolator, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            a = res.obtainAttributes(attrs, AnticipateOvershootInterpolator);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        mTension = a.getFloat(AnticipateOvershootInterpolator_tension, <span class="number">2.0f</span>) *</div><div class="line">                a.getFloat(AnticipateOvershootInterpolator_extraTension, <span class="number">1.5f</span>);</div><div class="line">        setChangingConfiguration(a.getChangingConfigurations());</div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">a</span><span class="params">(<span class="keyword">float</span> t, <span class="keyword">float</span> s)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> t * t * ((s + <span class="number">1</span>) * t - s);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">o</span><span class="params">(<span class="keyword">float</span> t, <span class="keyword">float</span> s)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> t * t * ((s + <span class="number">1</span>) * t + s);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="comment">// a(t, s) = t * t * ((s + 1) * t - s)</span></div><div class="line">        <span class="comment">// o(t, s) = t * t * ((s + 1) * t + s)</span></div><div class="line">        <span class="comment">// f(t) = 0.5 * a(t * 2, tension * extraTension), when t &lt; 0.5</span></div><div class="line">        <span class="comment">// f(t) = 0.5 * (o(t * 2 - 2, tension * extraTension) + 2), when t &lt;= 1.0</span></div><div class="line">        <span class="keyword">if</span> (t &lt; <span class="number">0.5f</span>) <span class="keyword">return</span> <span class="number">0.5f</span> * a(t * <span class="number">2.0f</span>, mTension);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0.5f</span> * (o(t * <span class="number">2.0f</span> - <span class="number">2.0f</span>, mTension) + <span class="number">2.0f</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">createNativeInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> NativeInterpolatorFactoryHelper.createAnticipateOvershootInterpolator(mTension);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="CycleInterpolator-正弦周期变化插值器"><a href="#CycleInterpolator-正弦周期变化插值器" class="headerlink" title="CycleInterpolator 正弦周期变化插值器"></a>CycleInterpolator 正弦周期变化插值器</h2><p><img src="http://img.blog.csdn.net/20150722004311238" alt="这里写图片描述"><br><img src="http://cogitolearning.co.uk/wp-content/uploads/2013/10/cycle_settings.png" alt=""><br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"> <span class="meta">@HasNativeInterpolator</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CycleInterpolator</span> <span class="keyword">extends</span> <span class="title">BaseInterpolator</span> <span class="keyword">implements</span> <span class="title">NativeInterpolatorFactory</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CycleInterpolator</span><span class="params">(<span class="keyword">float</span> cycles)</span> </span>&#123;</div><div class="line">        mCycles = cycles;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CycleInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(context.getResources(), context.getTheme(), attrs);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CycleInterpolator</span><span class="params">(Resources resources, Theme theme, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a;</div><div class="line">        <span class="keyword">if</span> (theme != <span class="keyword">null</span>) &#123;</div><div class="line">            a = theme.obtainStyledAttributes(attrs, R.styleable.CycleInterpolator, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            a = resources.obtainAttributes(attrs, R.styleable.CycleInterpolator);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        mCycles = a.getFloat(R.styleable.CycleInterpolator_cycles, <span class="number">1.0</span>f);</div><div class="line">        setChangingConfiguration(a.getChangingConfigurations());</div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">float</span>)(Math.sin(<span class="number">2</span> * mCycles * Math.PI * input));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mCycles;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">long</span> <span class="title">createNativeInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">return</span> NativeInterpolatorFactoryHelper.<span class="title">createCycleInterpolator</span><span class="params">(mCycles)</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>##OvershootInterpolator<br><img src="http://img.blog.csdn.net/20150722002152522" alt="这里写图片描述"><br><img src="http://cogitolearning.co.uk/wp-content/uploads/2013/10/overshoot_settings.png" alt="这里写图片描述"><br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * An interpolator where the change flings forward and overshoots the last value</div><div class="line"> * then comes back.</div><div class="line"> */</div><div class="line"><span class="meta">@HasNativeInterpolator</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OvershootInterpolator</span> <span class="keyword">extends</span> <span class="title">BaseInterpolator</span> <span class="keyword">implements</span> <span class="title">NativeInterpolatorFactory</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">float</span> mTension;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OvershootInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        mTension = <span class="number">2.0</span>f;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> tension Amount of overshoot. When tension equals 0.0f, there is</div><div class="line">     *                no overshoot and the interpolator becomes a simple</div><div class="line">     *                deceleration interpolator.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OvershootInterpolator</span><span class="params">(<span class="keyword">float</span> tension)</span> </span>&#123;</div><div class="line">        mTension = tension;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OvershootInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(context.getResources(), context.getTheme(), attrs);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OvershootInterpolator</span><span class="params">(Resources res, Theme theme, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        TypedArray a;</div><div class="line">        <span class="keyword">if</span> (theme != <span class="keyword">null</span>) &#123;</div><div class="line">            a = theme.obtainStyledAttributes(attrs, R.styleable.OvershootInterpolator, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            a = res.obtainAttributes(attrs, R.styleable.OvershootInterpolator);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        mTension = a.getFloat(R.styleable.OvershootInterpolator_tension, <span class="number">2.0</span>f);</div><div class="line">        setChangingConfiguration(a.getChangingConfigurations());</div><div class="line">        a.recycle();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">        <span class="comment">// _o(t) = t * t * ((tension + 1) * t + tension)</span></div><div class="line">        <span class="comment">// o(t) = _o(t - 1) + 1</span></div><div class="line">        t -= <span class="number">1.0</span>f;</div><div class="line">        <span class="keyword">return</span> t * t * ((mTension + <span class="number">1</span>) * t + mTension) + <span class="number">1.0</span>f;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/** <span class="doctag">@hide</span> */</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">long</span> <span class="title">createNativeInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">return</span> NativeInterpolatorFactoryHelper.<span class="title">createOvershootInterpolator</span><span class="params">(mTension)</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>#自定义Interpolator</p>
<p>Interpolator源码：<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> android.view.animation;</div><div class="line"></div><div class="line"><span class="keyword">import</span> android.animation.TimeInterpolator;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * An interpolator defines the rate of change of an animation. This allows</div><div class="line"> * the basic animation effects (alpha, scale, translate, rotate) to be</div><div class="line"> * accelerated, decelerated, repeated, etc.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Interpolator</span> <span class="keyword"><span class="keyword">extends</span> <span class="type">TimeInterpolator</span></span> </span>&#123;</div><div class="line">    <span class="comment">// A new interface, TimeInterpolator, was introduced for the new android.animation</span></div><div class="line">    <span class="comment">// package. This older Interpolator interface extends TimeInterpolator so that users of</span></div><div class="line">    <span class="comment">// the new Animator-based animations can use either the old Interpolator implementations or</span></div><div class="line">    <span class="comment">// new classes that implement TimeInterpolator directly.</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>我们来写自己的类来实现该接口<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> android.view.animation.Interpolator;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">float</span> mFactor;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> i;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyInterpolator</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>.i = i;</div><div class="line">	&#125;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123; <span class="comment">//定义我们的函数，input: 0 ~ 1</span></div><div class="line">		<span class="keyword">switch</span>(i)&#123;</div><div class="line">			<span class="keyword">case</span> <span class="number">1</span>:mFactor = input;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			<span class="keyword">case</span> <span class="number">2</span>:mFactor = input*input*input;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> mFactor;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>来个复杂的：</p>
<p>用desmos画一个：<br><img src="http://img.blog.csdn.net/20150722003201447" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20150722003043764" alt="这里写图片描述"><br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public <span class="type">float</span> getInterpolation(<span class="type">float</span> t) &#123; <span class="comment">//定义我们的函数，t: 0 ~ 1</span></div><div class="line">	if(t&lt;<span class="number">0.2094</span>) return (<span class="type">float</span>)(<span class="number">-34</span>*(t<span class="number">-0.18</span>)*(t<span class="number">-0.18</span>)+<span class="number">1.08</span>);</div><div class="line">	else if(t &lt;<span class="number">0.404</span>) return (<span class="type">float</span>)(<span class="number">5.9</span>*(t<span class="number">-0.34</span>)*(t<span class="number">-0.34</span>)+<span class="number">0.95</span>);</div><div class="line">	else if(t &lt; <span class="number">0.6045</span>) return (<span class="type">float</span>)(<span class="number">-3</span>*(t<span class="number">-0.53</span>)*(t<span class="number">-0.53</span>)+<span class="number">1.02</span>);</div><div class="line">	else if(t &lt; <span class="number">0.8064</span>) return (<span class="type">float</span>)((t<span class="number">-0.72</span>)*(t<span class="number">-0.72</span>)+<span class="number">0.99</span>);</div><div class="line">	else return (<span class="type">float</span>)(<span class="number">-0.3</span>*(t<span class="number">-0.915</span>)*(t<span class="number">-0.915</span>)+<span class="number">1.001</span>);</div><div class="line">	return mFactor;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-使用Kotlin开发Android应用（II）：创建新工程" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/06/使用Kotlin开发Android应用（II）：创建新工程/">使用Kotlin开发Android应用（II）：创建新工程</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p>转载自：<a target="_blank" href="http://www.jianshu.com/p/03bba63474f7">http://www.jianshu.com/p/03bba63474f7</a></p>
<p>英文原文“：<a target="_blank" href="http://antonioleiva.com/kotlin-android-create-project/">http://antonioleiva.com/kotlin-android-create-project/</a></p>
<p></p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
在基本了解<a target="_blank" href="http://www.jianshu.com/p/b6a2cda2f806" style="color:rgb(64,148,199); text-decoration:none">什么是Kotlin以及Kotlin可以做什么</a>之后，接下来就到了配置Android Studio并使用Kotlin开发Android apps的时候了。首次配置Android Studio需要几个步骤，而有些Gradle配置是每个新建工程都要重新配置的。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
在本系列文章中，我将创建一个精简版的<a target="_blank" href="https://play.google.com/store/apps/details?id=com.limecreativelabs.bandhook" style="color:rgb(64,148,199); text-decoration:none">Bandhook</a>，这是我以前写的一个app，它的基本功能是连接一个音乐rest API，并返回关于某个乐队的信息。可以到Github上面的<a target="_blank" href="https://github.com/antoniolg/Bandhook-Kotlin" style="color:rgb(64,148,199); text-decoration:none">Bandhook-Kotlin</a>查看源代码。</p>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
创建新工程并下载Kotlin插件</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
使用Android Studio创建一个具有一个activity的基本的Android工程，就跟你为普通工程创建的方式一样：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
创建好了之后，你首先要做的就是下载Kotlin插件。打开Android Studio的首选项的搜索插件面板，使用搜索功能查询Kotlin插件，安装完成并重启IDE即可。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="http://antonioleiva.com/wp-content/uploads/2015/02/kotlin-plugin-e1424632570741.png" alt="" style=""><br>
</div>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
在应用的build.gradle文件中添加Kotlin插件依赖</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
由于我们的主Module要使用Kotlin，因此需要在工程的根build.gradle文件中新增Kotlin插件的依赖：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:1.1.3'
        classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:0.11.91'
    }
}</code></pre>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
配置module的build.gradle文件</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
首先，应用Kotlin插件：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
然后，添加Kotlin函数库到工程的依赖中：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'org.jetbrains.kotlin:kotlin-stdlib:0.11.91'
}</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
最后，你需要在sources目录中添加下一个步骤我们要创建的Kotlin文件夹：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">android {
    compileSdkVersion 22
    buildToolsVersion &quot;22.0.0&quot;

    ...

    sourceSets {
        main.java.srcDirs &#43;= 'src/main/kotlin'
    }
}</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
Alternatively, you can skip this step, and after doing next ones, use this Android Studio action:</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
或者你可以跳过这一步骤，并在完成下一个步骤之后，像下面这样操作Android Studio：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="http://antonioleiva.com/wp-content/uploads/2015/03/configure-kotlin-project.png" class="imagebubble-image" alt="" style=""><br>
</div>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
我更倾向于手动配置以便更好的组织Gradle文件，但第二种选择会简单一点。</p>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
创建Kotlin目录</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
It will be easier if you change the project visualization from ‘Android’ to ‘Project’. Go to ‘app-&gt;src-&gt;main’ and create a folder called ‘kotlin':</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
首先将你的工程可视化界面从‘Android’切换到‘Project’，找到'app-&gt;src-&gt;main'目录，单击右键创建一个命名为‘kotlin’的目录。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="http://antonioleiva.com/wp-content/uploads/2015/02/kotlin-folder.png" class="imagebubble-image" alt="" style=""><br>
</div>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
将Java activity转换为kotlin文件</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
Kotlin plugin can convert from java to kotlin classes. We can convert our current activity to a Kotlin class very easily from ‘Code’ menu, by choosing ‘Convert Java File to Kotlin File':</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
Kotlin插件能够将java类转换成kotlin类。通过选择'Code'菜单里面的‘Convert Java File to Kotlin File’选项，我们可以把当前的activity转换成Kotlin类：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="http://antonioleiva.com/wp-content/uploads/2015/02/convert-java-to-kotlin-e1424633562637.png" alt="" style=""><br>
</div>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
IDE will suggest to move new file to the Kotlin folder. Click on ‘Move File’ (or move it manually if you don´t see the option).<br>
You will get a very similar code translated to Kotlin. I suggest taking a look until you understand the differences:</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
IDE会建议将新的文件移动到Kotlin目录中。单击'Move File'按钮（如果你没有看到这个选项，那么也可以手动移动它）。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
转换完成之后，你将会看到一个翻译成Kotlin语言的类&#20284;的代码片段。我建议你仔细研读直到看出这两者的区别：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">public class MainActivity : ActionBarActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
    }


    override fun onCreateOptionsMenu(menu: Menu): Boolean {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.menu_main, menu)
        return true
    }

    override fun onOptionsItemSelected(item: MenuItem): Boolean {
        // Handle action bar item clicks here. The action bar will
        // automatically handle clicks on the Home/Up button, so long
        // as you specify a parent activity in AndroidManifest.xml.
        val id = item.getItemId()

        //noinspection SimplifiableIfStatement
        if (id == R.id.action_settings) {
            return true
        }

        return super.onOptionsItemSelected(item)
    }
}</code></pre>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
主要的区别</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
通过前面的代码，我们可以看出有一些明显的区别，我们将在下一篇文章中进一步讨论：</p>
<ul style="padding:0px; margin:0px 0px 20px 25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<li style="line-height:30px"><strong>继承的时候使用冒号（:）而不是使用extends关键字</strong></li><li style="line-height:30px"><strong>显式的使用‘override’关键字</strong>：在Java中我们使用@override注解使得代码更简洁，但Kotlin并不强制我们使用。</li><li style="line-height:30px"><strong>使用‘fun’来声明函数</strong>：Kotlin是一种面向对象的函数式语言，因此类&#20284;Scala等语言，Java方法将会使用函数来代表。</li><li style="line-height:30px"><strong>函数参数使用不同的命名法</strong>：参数类型和名字顺序是反过来的，中间以冒号（:）分隔。</li><li style="line-height:30px"><strong>分号（;）是可选的</strong>：我们不需要以分号结束当前行，当然如果想要的话也可以。但如果我们不用加分号的话，将节省很多时间，并使代码更简洁。</li><li style="line-height:30px"><strong>其他细节</strong>：在第一篇文章中，我提到了‘?’符号。这表示被修饰的参数可以为空，判空的处理相比Java是不一样的。</li></ul>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
总结</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
虽然我们能够预期到使用一门新语言将会有很大不同，但Kotlin是JetBrains团队创建的用于弥补Java语言缺失的特性，它容易学习并与Java可互操作。由于Android Studip也是基于JetBrains的产品，因此很容易在这个IDE里面集成并使用Kotlin语言。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
下一篇文章将介绍使用Kotlin语言开发Android应用时的一些贴士和技巧。</p>
<br>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-使用Kotlin开发Android应用（I）：简介" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/06/使用Kotlin开发Android应用（I）：简介/">使用Kotlin开发Android应用（I）：简介</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p>转载自：<a target="_blank" href="http://www.jianshu.com/p/b6a2cda2f806">http://www.jianshu.com/p/b6a2cda2f806</a></p>
<p>英文原文：<a target="_blank" href="http://antonioleiva.com/kotlin-for-android-introduction/">http://antonioleiva.com/kotlin-for-android-introduction/</a></p>
<p></p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
Kotlin是一门基于JVM的编程语言，它正成长为Android开发中用于替代Java语言的继承者。Java是世界上使用最多的编程语言之一，当其他编程语言为更加便于开发者使用而不断进化时，Java并没有像预期那样及时跟进。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
Java缺失的很多特性在最新的修订版中逐渐覆盖到了，但Android开发者暂时还没能够使用它们。这就使得类&#20284;Kotlin这样的语言有了用武之地了：在旧的开发环境中使用现代语言的特性。</p>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
Kotlin是什么？</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
Kotlin是由<a target="_blank" href="https://www.jetbrains.com/" style="color:rgb(64,148,199); text-decoration:none">JetBrains</a>创建的基于JVM的编程语言，IntelliJ正是JetBrains的杰作，而Android Studio是基于IntelliJ修改而来的。Kotlin是一门包含很多函数式编程思想的面向对象编程语言。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
Kotlin生来就是为了弥补Java缺失的现代语言的特性，并极大的简化了代码，使得开发者可以编写尽量少的样板代码。</p>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
为什么要使用Kotlin？</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
首先我必须声明我使用Kotlin的时间并不长，我几乎是边学习边写这一系列博客的。我没有尝试其他替代语言例如Go或者Scala，因此如果你真的想要切换到另一门语言之前，我建议先搜索其他人是如何评价其他语言的。使用Scala开发Android的一个很棒的例子可以在<a target="_blank" href="http://47deg.github.io/translate-bubble-android/" style="color:rgb(64,148,199); text-decoration:none">47deg的Github</a>上面找到。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
下面是我为什么选择Kotlin进行学习的理由：</p>
<ul style="padding:0px; margin:0px 0px 20px 25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<li style="line-height:30px"><strong>相对而言更快的学习曲线</strong>：例如相比Scala而言，我们将学得更快。Kotlin限制比较多，但如果你之前没有使用过现代编程语言，那么使用Kotlin入门会更容易。</li><li style="line-height:30px"><strong>轻量级</strong>：相比其他编程语言，Kotlin函数库更小。由于Android存在65K方法数限制，这使得这一点更为重要。虽然使用proguard或者打包成多个dex能够解决这个问题，但是所有这些解决方案都会增加复杂性，并增加调试的时间。Kotlin函数库方法数小于7000个，相当于support-v4的大小。</li><li style="line-height:30px"><strong>高度可互操作</strong>：Kotlin可以和其他Java类库很好的并且简单的互操作。Kotlin团队在开发这门新语言时正是秉承了这个中心思想。他们希望可以使用Kotlin继续开发现有的使用Java语言编程的工程，而不是重写所有代码。因此Kotlin需要能够极好的和Java互操作。</li><li style="line-height:30px"><strong>完美的集成Android Studio以及Gradle</strong>：Kotlin有一个专门用于Android Studio的插件，以及另一个专门用于Gradle的插件，因此在Android工程中开始使用Kotlin并不困难（我将在下一篇文章中进行介绍）。</li></ul>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
在你作任何决定之前我推荐先阅读一篇由Jake Wharton写的有趣的文章：<a target="_blank" href="https://docs.google.com/document/d/1ReS3ep-hjxWA8kZi0YqDbEhCqTt29hG8P44aA9W0DM8/edit?hl=es&amp;forcehl=1" style="color:rgb(64,148,199); text-decoration:none">在Android开发中使用Kotlin</a></p>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
Kotlin有些什么特性呢？</h3>
<h4 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:20px">
1. 表达式</h4>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
使用Kotlin可以很容易避免样板代码的编写，因为语言本身已经默认覆盖了大多数典型的情况。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
例如，在Java中如果要创建一个典型的数据模型类，我们需要编写（或者至少生成）如下代码：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">public class Artist {
    private long id;
    private String name;
    private String url;
    private String mbid;

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getUrl() {
        return url;
    }

    public void setUrl(String url) {
        this.url = url;
    }

    public String getMbid() {
        return mbid;
    }

    public void setMbid(String mbid) {
        this.mbid = mbid;
    }

    @Override public String toString() {
        return &quot;Artist{&quot; &#43;
                &quot;id=&quot; &#43; id &#43;
                &quot;, name='&quot; &#43; name &#43; '\'' &#43;
                &quot;, url='&quot; &#43; url &#43; '\'' &#43;
                &quot;, mbid='&quot; &#43; mbid &#43; '\'' &#43;
                '}';
    }
}</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
如果使用Kotlin编写呢？如下所示：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">data class Artist(
    var id: Long,
    var name: String,
    var url: String,
    var mbid: String)</code></pre>
<h4 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:20px">
2. 空类型安全</h4>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
当我们使用Java进行开发时，大部分代码都是防守型的。我们需要在使用之前不断的检测对象是否为空，如果我们不想在代码运行时得到非预期的NullPointerException。类&#20284;其他很多编程语言，Kotlin是空类型安全的，因此我们需要使用安全调用操作符显式指明对象是否能够为空。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
我们可以类&#20284;这样声明：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">//This won´t compile. Artist can´t be null
var notNullArtist: Artist = null

//Artist can be null
var artist: Artist? = null

// Won´t compile, artist could be null and we need to deal with that
artist.print()

// Will print only if artist != null
artist?.print()

// Smart cast. We don´t need to use safe call operator if we previously checked nullity
if (artist != null) {
    artist.print()
}

// Only use it when we are sure it´s not null. Will throw an exception otherwise.
artist!!.print()

// Use Elvis operator to give an alternative in case the object is null
val name = artist?.name ?: &quot;empty&quot;</code></pre>
<h4 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:20px">
3. 扩展函数</h4>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
我们可以为任何类添加新函数。相比我们工程中普遍存在的传统的工具类，扩展函数更具可读性。例如，我们可以为fragments添加一个新函数，用于显示一个toast：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">fun Fragment.toast(message: CharSequence, duration: Int = Toast.LENGTH_SHORT) {
    Toast.makeText(getActivity(), message, duration).show()
}</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
然后可以这样调用：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">fragment.toast(&quot;Hello world!&quot;)</code></pre>
<h4 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:20px">
4. 函数式支持（Lambdas）</h4>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
每次当我们创建一个新的listener时，都需要声明一个onClick函数用于处理监听回调，我们可以直接编写监听回调的代码而不用声明onClick函数吗？答案是肯定的。这（包括其他很多有趣的功能）得归功与lambda表达式的运用：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">view.setOnClickListener({ toast(&quot;Hello world!&quot;) })</code></pre>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
目前的限制</h3>
<blockquote style="padding:10px 15px; margin:0px 0px 20px; border-left-width:4px; border-left-style:solid; border-left-color:rgb(153,153,153); position:relative; word-break:break-word; font-size:15px; line-height:30px; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; background-color:rgb(245,245,245)">
<p style="margin-top:0px; margin-bottom:0px; line-height:1.7; text-align:justify; word-break:break-word">
译者注：本小节所列出的限制，在最新版的Kotlin中已经都解决了，仅供读者目睹Kotlin语言的完善和进化过程。</p>
</blockquote>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
Kotlin目前还处于开发阶段，虽然已经很稳定而且最终release版本即将发布（这个夏天），但在Android开发中存在如下限制：</p>
<ul style="padding:0px; margin:0px 0px 20px 25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<li style="line-height:30px"><strong>与自动生成代码的可互操作性</strong>：一些知名的依赖于自动生成代码的Android函数库，例如Dagger或者Butterknife，由于某些不兼容的命名，因此不能正常的使用。Kotlin团队正在解决这些问题，将来某一天将会解决（KT-6444）。不管怎么说，就像我将在下一篇文章中说明的，语言的可表达性能够说服我们不再需要这些函数库。</li></ul>
<blockquote style="padding:10px 15px; margin:0px 0px 20px; border-left-width:4px; border-left-style:solid; border-left-color:rgb(153,153,153); position:relative; word-break:break-word; font-size:15px; line-height:30px; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; background-color:rgb(245,245,245)">
<p style="margin-top:0px; margin-bottom:0px; line-height:1.7; text-align:justify; word-break:break-word">
更新：在Kotlin M12已经带来了对注解处理的支持。</p>
</blockquote>
<ul style="padding:0px; margin:0px 0px 20px 25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<li style="line-height:30px"><strong>没有简单的方式声明自定义views</strong>：Kotlin类只能声明一个构造函数，而自定义views一般都有三个重载构造函数。当我们在代码中使用这些自定义views时只有一个构造函数不存在问题，但如果想在xml文件中使用自定义views，只有一个构造函数是不够的。最简单的解决方法是使用Java声明这些自定义views类，并在Kotlin中引用它们。Kotlin团队许诺将在M11发布版中解决这个问题。</li></ul>
<blockquote style="padding:10px 15px; margin:0px 0px 20px; border-left-width:4px; border-left-style:solid; border-left-color:rgb(153,153,153); position:relative; word-break:break-word; font-size:15px; line-height:30px; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; background-color:rgb(245,245,245)">
<p style="margin-top:0px; margin-bottom:0px; line-height:1.7; text-align:justify; word-break:break-word">
更新：Kotlin M11发布了并包含了<a target="_blank" href="http://kotlinlang.org/docs/reference/classes.html#constructors" style="color:rgb(64,148,199); text-decoration:none">辅助构造函数</a>。</p>
</blockquote>
<ul style="padding:0px; margin:0px 0px 20px 25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<li style="line-height:30px"><strong>Android工程中的jUnit测试</strong>：Android Studio 1.1引入的这个新特性Kotlin暂时还不支持。但纯粹的Kotlin工程能够完全支持Instrumentation测试和jUnit测试。</li></ul>
<blockquote style="padding:10px 15px; margin:0px 0px 20px; border-left-width:4px; border-left-style:solid; border-left-color:rgb(153,153,153); position:relative; word-break:break-word; font-size:15px; line-height:30px; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; background-color:rgb(245,245,245)">
<p style="margin-top:0px; margin-bottom:0px; line-height:1.7; text-align:justify; word-break:break-word">
更新：Kotlin M12的gradle plugin现在支持Android Studio中的单元测试了。</p>
</blockquote>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
总结</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
Kotlin是开发Android app中使用的Java语言的一个有趣的替换者。下一篇文章我们将描述使用Kotlin如何新建一个新工程，并讲解如何充分利用Kotlin使Android开发更容易。敬请关注！</p>
<br>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-Kotlin在Android工程中的应用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/06/Kotlin在Android工程中的应用/">Kotlin在Android工程中的应用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; font-size:22px">
<span class="token p" style="font-family:'microsoft yahei'; font-size:18px; line-height:29.7000007629395px; white-space:pre-wrap; outline:none!important"><span class="token link" style="outline:none!important"><span class="token md md-underlined-text" style="color:inherit; text-decoration:underline; outline:none!important">Kotlin官网：</span><span style="color:#3333ff"><span class="token md md-bracket-end" style="outline:none!important">(</span><span class="token md md-href" style="outline:none!important"><a target="_blank" href="http://kotlinlang.org/">http://kotlinlang.org/</a></span><span class="token md md-paren-end" style="outline:none!important">)</span></span></span></span></h3>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
<span class="token lf" style="color:rgb(90,90,90); font-family:'microsoft yahei'; font-size:18px; line-height:29.7000007629395px; white-space:pre-wrap; outline:none!important"></span><span class="token p" style="color:rgb(90,90,90); font-family:'microsoft yahei'; font-size:18px; line-height:29.7000007629395px; white-space:pre-wrap; outline:none!important">英文原文：<span class="token url" style="outline:none!important; text-decoration:underline"><a target="_blank" href="http://code.tutsplus.com/tutorials/how-to-use-kotlin-in-your-android-projects--cms-24052">http://code.tutsplus.com/tutorials/how-to-use-kotlin-in-your-android-projects--cms-24052</a></span></span><span class="token lf" style="color:rgb(90,90,90); font-family:'microsoft yahei'; font-size:18px; line-height:29.7000007629395px; white-space:pre-wrap; outline:none!important"></span><span class="token p" style="color:rgb(90,90,90); font-family:'microsoft yahei'; font-size:18px; line-height:29.7000007629395px; white-space:pre-wrap; outline:none!important">转载自：<span class="token url" style="outline:none!important; text-decoration:underline"><a target="_blank" href="http://www.jianshu.com/p/a7fadc79e0fb">http://www.jianshu.com/p/a7fadc79e0fb</a></span></span><br>
</h3>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
<br>
</h3>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
简介</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<a target="_blank" href="http://kotlinlang.org/" style="color:rgb(64,148,199); text-decoration:none">Kotlin</a>是由<a target="_blank" href="https://www.jetbrains.com/" style="color:rgb(64,148,199); text-decoration:none">JetBrains</a>设计的开放源码的编程语言，它正在Java开发者中变得越来越流行。Kotlin通常被吹捧为Java的继承者，相比较Java而言，Kotlin提供更为丰富的开发经验，因为它更现代，更具表现力和更简介。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
如果你在寻求Android开发的可替代编程语言，那么应该试一下Kotlin。使用Kotlin，你可以很容易的在Android工程中替代Java或者与Java混合使用。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
本文接下来将介绍在Android Studio工程中如何使用Kotlin和Kotlin插件。</p>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
前置条件</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
继续本文之前，你首先需要完成如下两件事情：</p>
<ul style="padding:0px; margin:0px 0px 20px 25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<li style="line-height:30px">将你的Andoid Studio更新到最新版本</li><li style="line-height:30px">理解Kotlin的基本语法</li></ul>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
如果你不熟悉Kotlin编程语言的话，建议先阅读<a target="_blank" href="http://kotlinlang.org/docs/reference/" style="color:rgb(64,148,199); text-decoration:none">Kotlin指南</a>中的<a target="_blank" href="http://kotlinlang.org/docs/reference/basic-syntax.html" style="color:rgb(64,148,199); text-decoration:none">开始</a>章节。</p>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
1. 安装Kotlin插件</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
在Android Studio的快速开始菜单中，选择Configure&gt;Plugins：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="https://cms-assets.tutsplus.com/uploads/users/362/posts/24052/image/kot2a.png" class="imagebubble-image" alt="" style=""><br>
</div>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
在打开的页面中，点击底部的Install JetBrains plugin...：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="https://cms-assets.tutsplus.com/uploads/users/362/posts/24052/image/kot3b.png" class="imagebubble-image" alt="" style=""><br>
</div>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
在插件列表中选择或者搜索Kotlin Extensions For Android并点击右边窗口的Install Plugin按钮：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="https://cms-assets.tutsplus.com/uploads/users/362/posts/24052/image/kotB.png" class="imagebubble-image" alt="" style=""><br>
</div>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
由于这个扩展插件依赖于Kotlin插件，因此会弹出一个对话框提示我们同时去下载它，点击Yes按钮开始插件的下载：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="https://cms-assets.tutsplus.com/uploads/users/362/posts/24052/image/kotC.png" class="imagebubble-image" alt="" style=""><br>
</div>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
当下载安装完成之后，重启Android Studio就可以激活插件了。</p>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
2. 创建Kotlin Activity</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
在Android Studio中，右键单击工程包名在弹出的菜单中选择New&gt;Kotlin File：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="https://cms-assets.tutsplus.com/uploads/users/362/posts/24052/image/kot5.png" class="imagebubble-image" alt="" style=""><br>
</div>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
在弹出的对话框中，输入Activity的名字并在类型下拉列表中选择Class。我们把名字命名为MainActivity：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="https://cms-assets.tutsplus.com/uploads/users/362/posts/24052/image/kot6.png" class="imagebubble-image" alt="" style=""><br>
</div>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
当类被创建出来后，你将会看到一个警告，提示你配置app模块来支持Kotlin：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="https://cms-assets.tutsplus.com/uploads/users/362/posts/24052/image/kot7.png" class="imagebubble-image" alt="" style=""><br>
</div>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
单击警告提示条的链接，在弹出的对话框中点击OK按钮选择默认的Kotlin插件版本即可：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="https://cms-assets.tutsplus.com/uploads/users/362/posts/24052/image/kot8.png" class="imagebubble-image" alt="" style=""><br>
</div>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
为了配置你的工程支持Kotlin，Kotlin插件修改了build.gradle文件。点击Sync Now按钮就可以应用这些改动了：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="https://cms-assets.tutsplus.com/uploads/users/362/posts/24052/image/kotA.png" class="imagebubble-image" alt="" style=""><br>
</div>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
到这里，工程的配置完成了。让我们回到刚才创建的Kotlin类来开始Kotlin的编程吧。</p>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
3. 使用Kotlin</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
为了保持例子的简单，我们将展示如何创建一个Activity，它包含一个用于显示String字符串的TextView。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
确保你的类继承自Activity，并重写其onCreate函数。当然，你要使用Kotlin的方式实现。如果你还不熟悉Kotlin，建议通过快捷键Control&#43;O来激活Android Studio的代码生成功能，从而得到正确的函数签名：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="https://cms-assets.tutsplus.com/uploads/users/362/posts/24052/image/kotG.png" class="imagebubble-image" alt="" style=""><br>
</div>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
生成之后，我们的类应该如下所示：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">package com.hathy.kotlinsample

import android.app.Activity
import android.os.Bundle

public class MainActivity: Activity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
    }
}</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
使用val关键字创建TextView的一个只读实例：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">val myMessage = TextView(this)</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
调用TextView的setText函数设置要显示的字符串，接着调用setContentView将TextView设置给它：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">myMessage.setText(&quot;Hello&quot;)
setContentView(myMessage)</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
就像在Java Activity中，你也需要在AndroidManifest.xml文件中声明Kotlin Activity，以便让Android系统识别到它。假如这是你工程中唯一的Activity，那么manifest文件看起来如下所示：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">&lt;activity android:name=&quot;.MainActivity&quot;&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;
        &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;
    &lt;/intent-filter&gt;
&lt;/activity&gt;</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
现在你可以在你的Android设备或者模拟器上运行这个app了。虽然Kotlin编译器比Java编译器稍微慢一点，但你可能察觉不到编译时间的显著变化。</p>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
4. 使用Kotlin的Android扩展插件</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
Kotlin的Android扩展插件使得开发者可以像对待Activity属性一样对待定义在Activity的XML布局文件中的组件。也就是说，如果使用这个插件，你将不再需要调用findViewById。这些属性因此被称为合成属性（synthetic properties）。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
要在项目中使用这个特性，需要在app模块的build.gradle文件中加入org.jetbrains.kotlin:kotlin-android-extensions作为构建脚本依赖。不要忘了点击Sync Now按钮来同步这个改变到工程中：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">buildscript {
    dependencies {
        classpath &quot;org.jetbrains.kotlin:kotlin-android-extensions:$kotlin_version&quot;
    }
}</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
现在让我们创建一个和前面步骤创建的类&#20284;的Activity，但是使用布局XML文件来定义TextView。创建一个布局XML文件并命名为another_activity.xml。在这个文件中，定义TextView，id为myMessage：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:orientation=&quot;vertical&quot; android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;&gt;

    &lt;TextView
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:textAppearance=&quot;?android:attr/textAppearanceLarge&quot;
        android:text=&quot;Large Text&quot;
        android:id=&quot;@&#43;id/myMessage&quot; /&gt;
&lt;/LinearLayout&gt;</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
新建另一个Kotlin类AnotherActivity，继承自Activity并重写onCreate函数，实现如下所示：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">package com.hathy.kotlinsample

import android.app.Activity
import android.os.Bundle

public class AnotherActivity: Activity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
    }
}</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
在onCreate函数中调用setContentView并把刚才创建的布局XML文件设置给它：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">setContentView(R.layout.another_activity)</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
现在，你可以使用下面代码片段导入TextView，而不是使用findViewById的方式：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">import kotlinx.android.synthetic.another_activity.myMessage</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
如果布局文件中存在其他的组件，你可以使用如下语句来一次性全部导入：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">import kotlinx.android.synthetic.another_activity.*</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
现在你可以通过使用id来访问TextView，就像该TextView是Activity类的一个属性一样。例如，修改TextView显示的字符串：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">myMessage.setText(&quot;Hello&quot;)</code></pre>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
5. 将Java类转换为Kotlin</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
我们可以使用Kotlin插件将现存的Java类转换成Kotlin类。为了尝试这个特性，首先创建如下所示的Java类，它是一个打印两个整数之和的简单的Activity：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">public class YetAnotherActivity extends Activity {

    private int a,b;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        a=10;
        b=20;
        Log.d(&quot;MESSAGE&quot;, &quot;The sum is &quot;&#43;(a&#43;b));
    }
}</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
使用快捷键Control&#43;Alt&#43;Shift&#43;J，或者选择菜单Code&gt;Convert Java File to Kotlin File：</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
</p>
<div class="image-package imagebubble" style="margin:0px auto 20px; text-align:center; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
<img src="https://cms-assets.tutsplus.com/uploads/users/362/posts/24052/image/kotH.png" class="imagebubble-image" alt="" style=""><br>
</div>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
转换后的Kotlin类如下所示：</p>
<pre style="padding:9.5px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; color:rgb(63,63,63); margin-top:0px; margin-bottom:20px; line-height:20px; word-break:normal; word-wrap:normal; white-space:pre-wrap; overflow:auto; background-color:rgb(245,245,245)"><code style="padding:0px; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; color:rgb(217,111,93); border:none; white-space:pre; background-color:transparent">public class YetAnotherActivity : Activity() {

    private var a: Int = 0
    private var b: Int = 0

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        a = 10
        b = 20
        Log.d(&quot;MESSAGE&quot;, &quot;The sum is &quot; &#43; (a &#43; b))
    }
}</code></pre>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
除了文件内容改变之外，文件的扩展名也从.java变为了.kt。</p>
<h3 style="margin:0px; font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.8; color:rgb(47,47,47); font-size:22px">
总结</h3>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
本文我们通过在Android Studio中安装Kotlin插件和Kotlin Android扩展插件学到了如何在Android工程中使用Kotlin。由于Kotlin和Java在很大程度上可互操作，如果你还在学习Kotlin，那么最好是逐步在你的Android项目中应用它。</p>
<p style="margin-top:0px; margin-bottom:25px; text-align:justify; word-break:break-word; color:rgb(47,47,47); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:16px; line-height:27.2000007629395px">
为了学习更多的Kotlin相关知识，我建议浏览<a target="_blank" href="http://kotlinlang.org/docs/reference/" style="color:rgb(64,148,199); text-decoration:none">Kotlin指南</a>。<a target="_blank" href="http://kotlinlang.org/docs/reference/basic-syntax.html" style="color:rgb(64,148,199); text-decoration:none">开始</a>章节将会帮助你尽快熟悉这门新语言。</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  

  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/4/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/6/">Next &raquo;</a>
    </nav>
  


</section>
      </div>
      <footer id="footer">
  <div class="outer footer_center">
    <div id="footer-info" class="inner">
      &copy; 2018 <a href="https://github.com/hanks-zyh"> Hanks</a>
	  </div>
  </div>
 <div id="share">
  <a id="totop" title="" style="display: block;">返回顶部</a>
 </div>
</footer>

    </div>
    

<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollLoading.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>
