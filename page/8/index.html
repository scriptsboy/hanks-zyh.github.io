<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hanks&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="android,web,node,python">
<meta property="og:type" content="website">
<meta property="og:title" content="Hanks' Blog">
<meta property="og:url" content="http://hanks-zyh.github.io/page/8/index.html">
<meta property="og:site_name" content="Hanks' Blog">
<meta property="og:description" content="android,web,node,python">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hanks' Blog">
<meta name="twitter:description" content="android,web,node,python">
  
  
    <link rel="icon" href="/images/favicon.png">
  
  <!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'> -->
  <!-- <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <!-- <link href="//fonts.useso.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <!-- <link href='//fonts.useso.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'> -->
  <link rel="stylesheet" href="/css/style.css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <a href="/" class="logo"></a>
    <nav id="main-nav">
      <a id="main-nav-toggle" class="nav-icon"></a>
      
        <a class="main-nav-link" href="/archives">归档</a>
      
        <a class="main-nav-link" href="/daily">日报</a>
      
        <a class="main-nav-link" href="/eye-video">开眼</a>
      
        <a class="main-nav-link" href="/joke">joke</a>
      
        <a class="main-nav-link" href="/picture-fight">斗图</a>
      
        <a class="main-nav-link" href="/atom.xml">RSS</a>
      
    </nav>
  </div>
</header>
      <nav id="mobile-nav" class="off">
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/daily" class="mobile-nav-link">日报</a>
  
    <a href="/eye-video" class="mobile-nav-link">开眼</a>
  
    <a href="/joke" class="mobile-nav-link">joke</a>
  
    <a href="/picture-fight" class="mobile-nav-link">斗图</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
</nav>
      <div class="outer">
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <div class="info">
     <div class="content">
       <div>
         <a href="https://github.com/hanks-zyh"><img class="avatar" src="https://avatars2.githubusercontent.com/u/6268322?v=3&s=460" alt="" /></a>
       </div>
       <div class="name">
         <h2 >Hanks</h2>
       </div>
       <p>90后，奋青，Android ……</p>
       <div class="account">
         <div class="account-item">
           <a href="http://weibo.com/u/2359002991"><img src="http://ww1.sinaimg.cn/large/8c9b876fjw1f3ik9y4q7hj205k05kdfx.jpg" style="width:40px;height:40px;border-radius: 50%;"></a>
         </div>
         <div class="account-item">
              <a href="http://www.zhihu.com/people/yuhan-zhang-36"><img src="http://ww2.sinaimg.cn/large/8c9b876fjw1f3ik7sv63wj205k05k3yg.jpg" style="width:40px;height:40px;border-radius: 50%;"></a>
         </div>
         <div class="account-item">
           <a href="http://hanks.xyz/atom.xml"> <img src="http://ww3.sinaimg.cn/large/8c9b876fjw1f3ik9kk2ctj205k05kt8n.jpg" style="width:40px;height:40px;border-radius: 50%;"></a>
         </div>
       </div>
     </div>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">最新发布</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/03/26/node-image-recognition/">Node 识别图片中的文字</a>
          </li>
        
          <li>
            <a href="/2017/03/22/proxy-test/">请求代理</a>
          </li>
        
          <li>
            <a href="/2017/02/16/android-customview-inputmethod/">Android 自定义 view 连接输入法</a>
          </li>
        
          <li>
            <a href="/2017/01/10/android-lua/">Android 与 Lua</a>
          </li>
        
          <li>
            <a href="/2017/01/10/android-markdown-render/">Android 下 Markdown 渲染</a>
          </li>
        
          <li>
            <a href="/2017/01/09/android-webview-font/">Android 中 webview 自定义字体</a>
          </li>
        
          <li>
            <a href="/2016/09/25/slack-bot/">slack bot</a>
          </li>
        
          <li>
            <a href="/2016/09/19/webapp/">让网页更适配移动设备</a>
          </li>
        
          <li>
            <a href="/2016/09/05/weex-2333/">体验 weex —— 写一个表情包应用</a>
          </li>
        
          <li>
            <a href="/2016/08/31/nestedscrollchild/">WebView 实现 NestedScrollingChild</a>
          </li>
        
          <li>
            <a href="/2016/08/29/nestedchildparent/">NestedScrollingParent 实现复杂交互效果</a>
          </li>
        
          <li>
            <a href="/2016/08/04/telegram-bot/">写一个福利 Telegram 机器人</a>
          </li>
        
          <li>
            <a href="/2016/07/31/write-butterkinfe/">写一个 ButterKnife</a>
          </li>
        
          <li>
            <a href="/2016/07/24/edittext-cursor/">多行 EditText 的光标高度问题</a>
          </li>
        
          <li>
            <a href="/2016/07/22/textview-lineheight/">TextView 设置行高并垂直居中</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Activity/" style="font-size: 10px;">Activity</a> <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Atom/" style="font-size: 10px;">Atom</a> <a href="/tags/Dagger2/" style="font-size: 10px;">Dagger2</a> <a href="/tags/EditText/" style="font-size: 10px;">EditText</a> <a href="/tags/Express/" style="font-size: 11.67px;">Express</a> <a href="/tags/Fragment/" style="font-size: 10px;">Fragment</a> <a href="/tags/Framework/" style="font-size: 11.67px;">Framework</a> <a href="/tags/HTML-CSS/" style="font-size: 10px;">HTML/CSS</a> <a href="/tags/Jade/" style="font-size: 10px;">Jade</a> <a href="/tags/Java/" style="font-size: 13.33px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Kotlin/" style="font-size: 15px;">Kotlin</a> <a href="/tags/LAMP/" style="font-size: 10px;">LAMP</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Lua/" style="font-size: 10px;">Lua</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/NestedScrolling/" style="font-size: 13.33px;">NestedScrolling</a> <a href="/tags/Node-js/" style="font-size: 13.33px;">Node.js</a> <a href="/tags/OS-X/" style="font-size: 10px;">OS X</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/Python/" style="font-size: 11.67px;">Python</a> <a href="/tags/React-Native/" style="font-size: 18.33px;">React-Native</a> <a href="/tags/Refactoring/" style="font-size: 10px;">Refactoring</a> <a href="/tags/Rx/" style="font-size: 10px;">Rx</a> <a href="/tags/RxJava/" style="font-size: 13.33px;">RxJava</a> <a href="/tags/Rxandroid/" style="font-size: 10px;">Rxandroid</a> <a href="/tags/Rxjava/" style="font-size: 11.67px;">Rxjava</a> <a href="/tags/SQLite/" style="font-size: 10px;">SQLite</a> <a href="/tags/Scrapy/" style="font-size: 11.67px;">Scrapy</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/SwipeRefreshLayout/" style="font-size: 10px;">SwipeRefreshLayout</a> <a href="/tags/Telegram/" style="font-size: 10px;">Telegram</a> <a href="/tags/TextView/" style="font-size: 10px;">TextView</a> <a href="/tags/Ubuntu/" style="font-size: 16.67px;">Ubuntu</a> <a href="/tags/VPS/" style="font-size: 10px;">VPS</a> <a href="/tags/View/" style="font-size: 10px;">View</a> <a href="/tags/Vue-js/" style="font-size: 10px;">Vue.js</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/WebView/" style="font-size: 11.67px;">WebView</a> <a href="/tags/bot/" style="font-size: 10px;">bot</a> <a href="/tags/crontab/" style="font-size: 10px;">crontab</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/interpolator/" style="font-size: 10px;">interpolator</a> <a href="/tags/leancloud/" style="font-size: 10px;">leancloud</a> <a href="/tags/mac-os/" style="font-size: 10px;">mac os</a> <a href="/tags/slack/" style="font-size: 10px;">slack</a> <a href="/tags/virtualBox/" style="font-size: 10px;">virtualBox</a> <a href="/tags/weex/" style="font-size: 10px;">weex</a> <a href="/tags/代理/" style="font-size: 10px;">代理</a> <a href="/tags/依赖注入/" style="font-size: 10px;">依赖注入</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/学习/" style="font-size: 10px;">学习</a> <a href="/tags/必备知识/" style="font-size: 10px;">必备知识</a> <a href="/tags/性能优化/" style="font-size: 10px;">性能优化</a> <a href="/tags/总结/" style="font-size: 10px;">总结</a> <a href="/tags/热修复/" style="font-size: 11.67px;">热修复</a> <a href="/tags/爬虫/" style="font-size: 10px;">爬虫</a> <a href="/tags/自动化/" style="font-size: 10px;">自动化</a> <a href="/tags/设计/" style="font-size: 10px;">设计</a>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://github.com/hanks-zyh">hanks-zyh</a>
          </li>
        
          <li>
            <a href="http://kiya.space">Kiya‘s space</a>
          </li>
        
          <li>
            <a href="http://rocko.xyz/">Rocko&#39;s blog</a>
          </li>
        
          <li>
            <a href="http://hexo.io">Hexo</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <div class="wx">
      <h3 class="widget-title">微信公众号</h3>
      <img src='http://ww1.sinaimg.cn/large/8c9b876fly1fe0nnlvokpj20by0bywfi.jpg' height="100%" width="100%" >
      <p>搜索公众号: CodeProvider</p>
    </div>
  </div>


  
</aside>
        
        <section id="main" class="mdl-shadow--2dp">
  
    <article id="post-2015新的开始" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/01/04/2015新的开始/">2015新的开始</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p><span style="font-size:18px">&nbsp; &nbsp; &nbsp; &nbsp; 2015偷偷的来了，不留一点情面，感觉自己要脱离青春这个年代了，到了要找工作的年龄，</span></p>
<p><span style="font-size:18px">其实心里还是满期待，新的一年，继续向更高级的方向学习，做个约定吧，</span></p>
<p><span style="font-size:18px">0.首先，找到一个好的工作，让女朋友不跟着我受苦</span></p>
<p><span style="font-size:18px">1.每周至少一篇技术博客，不能随便写写那种</span></p>
<p><span style="font-size:18px">2.每周至少分享一个Android实例学习，开源框架or 高仿应用</span></p>
<p><span style="font-size:18px">3.深入研究Android源码，了解内部机制，争取能达到高级工程师，然后迈向架构师之路</span></p>
<p><span style="font-size:18px">4.每天多陪陪女朋友，她是生活的动力</span></p>
<p><span style="font-size:18px">5.每天要睡够7个小时</span></p>
<p><span style="font-size:18px">6.如果条件允许的话，接触一下ios</span></p>
<p><span style="font-size:18px">7.每天感谢一下身边的人，感谢一下亲人</span></p>
<p><span style="font-size:18px">晚安！我</span></p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-欺骗你的小眼睛——Android_静默安装" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/01/02/欺骗你的小眼睛——Android_静默安装/">欺骗你的小眼睛——Android 静默安装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p style="text-align:left">我们一般代码调用安装apk会写下面的代码</p>
<p style="text-align:left"></p>
<pre code_snippet_id="569739" snippet_file_name="blog_20150102_1_7842544" name="code" class="java">Intent intent = new  Intent(Intent.ACTION_VIEW);
File apkFile = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+&quot;/1.apk&quot;);
intent.setDataAndType(Uri.fromFile(apkFile),&quot;application/vnd.android.package-archive&quot;);
startActivity(intent);</pre>
<p></p>
<p style="text-align:left"><br>
</p>
<p style="text-align:left">我们安装apk时系统会分析apk，然后弹出如下图的提示</p>
<p style="text-align:left"><img src="" alt=""><img src="" alt=""><br>
</p>
<p style="text-align:left"><img src="" alt=""><br>
</p>
<p style="text-align:left">当我们点击安装后，系统会进行安装</p>
<p style="text-align:left">这里我们查看系统源码来看一下系统是怎么执行安装程序的</p>
<p style="text-align:left"><br>
</p>
<p style="text-align:left">首先我们找到<span style="font-size:18px"><strong>PackageInstallerActivity.java,</strong></span><span style="font-size:12px">一看命名规则就知道是apk安装的界面</span></p>
<p style="text-align:left"><span style="font-size:12px"><br>
</span></p>
<p style="text-align:left"><span style="font-size:12px">既然是Activity 那么我们首先来看<span style="color:#33ff33">onCreate()</span>方法</span></p>
<p style="text-align:left"><span style="font-size:12px"></span></p>
<pre code_snippet_id="569739" snippet_file_name="blog_20150102_2_3778679" name="code" class="java">@Override
    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        //get intent information  获取Intent信息
        final Intent intent = getIntent();
        mPackageURI = intent.getData();//apk的uri
        mPm = getPackageManager(); 
        mPkgInfo = PackageUtil.getPackageInfo(mPackageURI);
        
        // Check for parse errors 检查apk是否有错误
        if(mPkgInfo == null) {
            Log.w(TAG, &quot;Parse error when parsing manifest. Discontinuing installation&quot;);
            showDialogInner(DLG_PACKAGE_ERROR);
            return;
        }
        
        //set view
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.install_start); //这就是上面的界面
        mInstallConfirm = findViewById(R.id.install_confirm_panel);
        mInstallConfirm.setVisibility(View.INVISIBLE);
        PackageUtil.AppSnippet as = PackageUtil.getAppSnippet(this,
                mPkgInfo.applicationInfo, mPackageURI);
        PackageUtil.initSnippetForNewApp(this, as, R.id.app_snippet);
       //check setting //是否设置了 允许安装未知来源，就是设置那里的
        if(!isInstallingUnknownAppsAllowed()) {
            //ask user to enable setting first
            showDialogInner(DLG_UNKNOWN_APPS);
            return;
        }
        initiateInstall();
    }
    </pre>
<p></p>
<p style="text-align:left"><span style="font-size:12px"><br>
</span></p>
<p style="text-align:left"><span style="font-size:12px"><br>
</span></p>
<p style="text-align:left"><span style="font-size:12px">然后看initiateInstall（）方法</span></p>
<p style="text-align:left"><span style="font-size:12px"></span></p>
<pre code_snippet_id="569739" snippet_file_name="blog_20150102_3_454787" name="code" class="java">  private void initiateInstall() {
        String pkgName = mPkgInfo.packageName;
        // Check if there is already a package on the device with this name
        // but it has been renamed to something else. //检查是否有相同包名的应用
        String[] oldName = mPm.canonicalToCurrentPackageNames(new String[] { pkgName });
        if (oldName != null &amp;&amp; oldName.length &gt; 0 &amp;&amp; oldName[0] != null) {
            pkgName = oldName[0];
            mPkgInfo.setPackageName(pkgName);
        }
        // Check if package is already installed. display confirmation dialog if replacing pkg检查是否已经安装过了
        try {
            mAppInfo = mPm.getApplicationInfo(pkgName,
                    PackageManager.GET_UNINSTALLED_PACKAGES);
        } catch (NameNotFoundException e) {
            mAppInfo = null;
        }
        if (mAppInfo == null) {
            startInstallConfirm();//安装
        } else {
            if(localLOGV) Log.i(TAG, &quot;Replacing existing package:&quot;+
                    mPkgInfo.applicationInfo.packageName);
            showDialogInner(DLG_REPLACE_APP);
        }
    }
    </pre><br>
<br>
<p></p>
<p style="text-align:left"><span style="font-size:12px">来到startInstallConfirm（）</span></p>
<p style="text-align:left"><span style="font-size:12px"></span></p>
<pre code_snippet_id="569739" snippet_file_name="blog_20150102_4_9573109" name="code" class="java">    private void startInstallConfirm() {
        LinearLayout permsSection = (LinearLayout) mInstallConfirm.findViewById(R.id.permissions_section);
        LinearLayout securityList = (LinearLayout) permsSection.findViewById(
                R.id.security_settings_list);
        boolean permVisible = false;
        if(mPkgInfo != null) {
            AppSecurityPermissions asp = new AppSecurityPermissions(this, mPkgInfo);
            if(asp.getPermissionCount() &gt; 0) {
                permVisible = true;
                securityList.addView(asp.getPermissionsView());
            }
        }
        if(!permVisible){
            permsSection.setVisibility(View.INVISIBLE);
        }
        mInstallConfirm.setVisibility(View.VISIBLE);
        mOk = (Button)findViewById(R.id.ok_button); //确认按钮
        mCancel = (Button)findViewById(R.id.cancel_button);
        mOk.setOnClickListener(this);
        mCancel.setOnClickListener(this);
    }
</pre><br>
找点击事件 onClick()
<p></p>
<p style="text-align:left"></p>
<pre code_snippet_id="569739" snippet_file_name="blog_20150102_5_9804247" name="code" class="java" style="font-size:12px;"> public void onClick(View v) {
        if(v == mOk) { //开始安装，弹出安装进度界面
            // Start subactivity to actually install the application
            Intent newIntent = new Intent();
            newIntent.putExtra(PackageUtil.INTENT_ATTR_APPLICATION_INFO,
                    mPkgInfo.applicationInfo);
            newIntent.setData(mPackageURI);
            newIntent.setClass(this, InstallAppProgress.class); //这里调到了InstallAppProgress.java
            String installerPackageName = getIntent().getStringExtra(Intent.EXTRA_INSTALLER_PACKAGE_NAME);
            if (installerPackageName != null) {
                newIntent.putExtra(Intent.EXTRA_INSTALLER_PACKAGE_NAME, installerPackageName);
            }
            if(localLOGV) Log.i(TAG, &quot;downloaded app uri=&quot;+mPackageURI);
            startActivity(newIntent);
            finish();
        } else if(v == mCancel) {
            // Cancel and finish
            finish();
        }
    }</pre><br>
<span style="font-size:12px">继续跟踪 到</span><span style="font-size:18px">InstallAppProgress.java &nbsp; 的onCreate()</span>
<p></p>
<p style="text-align:left"><span style="font-size:18px"></span></p>
<pre code_snippet_id="569739" snippet_file_name="blog_20150102_6_3067029" name="code" class="java">  @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        Intent intent = getIntent();
        mAppInfo = intent.getParcelableExtra(PackageUtil.INTENT_ATTR_APPLICATION_INFO);
        mPackageURI = intent.getData();
        initView();
    }</pre><br>
initView();
<p></p>
<p style="text-align:left"><span style="font-size:18px"></span></p>
<pre code_snippet_id="569739" snippet_file_name="blog_20150102_7_7607723" name="code" class="java">    public void initView() {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.op_progress);
        int installFlags = 0; //设置錐lag
        PackageManager pm = getPackageManager();
        try {
            PackageInfo pi = pm.getPackageInfo(mAppInfo.packageName, 
                    PackageManager.GET_UNINSTALLED_PACKAGES);
            if(pi != null) {
                installFlags |= PackageManager.INSTALL_REPLACE_EXISTING; //替换已经存在的
            }
        } catch (NameNotFoundException e) {
        }
        if((installFlags &amp; PackageManager.INSTALL_REPLACE_EXISTING )!= 0) {
            Log.w(TAG, &quot;Replacing package:&quot; + mAppInfo.packageName);
        }
        PackageUtil.AppSnippet as = PackageUtil.getAppSnippet(this, mAppInfo,
                mPackageURI);
        mLabel = as.label;
        PackageUtil.initSnippetForNewApp(this, as, R.id.app_snippet);
        mStatusTextView = (TextView)findViewById(R.id.center_text);
        mStatusTextView.setText(R.string.installing);
        mProgressBar = (ProgressBar) findViewById(R.id.progress_bar);
        mProgressBar.setIndeterminate(true);
        // Hide button till progress is being displayed
        mOkPanel = (View)findViewById(R.id.buttons_panel);
        mDoneButton = (Button)findViewById(R.id.done_button);
        mLaunchButton = (Button)findViewById(R.id.launch_button);
        mOkPanel.setVisibility(View.INVISIBLE);

        String installerPackageName = getIntent().getStringExtra(
                Intent.EXTRA_INSTALLER_PACKAGE_NAME);
        PackageInstallObserver observer = new PackageInstallObserver();
        pm.installPackage(mPackageURI, observer, installFlags, installerPackageName);//安装的代码
    }
</pre><br>
<br>
<p></p>
<p style="text-align:left"><span style="font-size:18px">几经周折，总算找到了。。。</span></p>
<p style="text-align:left"><span style="font-size:18px">下几句 关键的</span></p>
<p style="text-align:left"><span style="font-size:18px">&nbsp; &nbsp; &nbsp; <span style="font-family:Comic Sans MS">
&nbsp; &nbsp;int installFlags = <span style="color:#ff0000">0</span>; //设置Flag<br>
&nbsp; &nbsp; &nbsp; &nbsp; PackageManager pm = getPackageManager();<br>
&nbsp; &nbsp; &nbsp; &nbsp; try {<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PackageInfo pi = pm.getPackageInfo(mAppInfo.packageName,&nbsp;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PackageManager.GET_UNINSTALLED_PACKAGES);<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(pi != null) {<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; installFlags |= PackageManager.INSTALL_REPLACE_EXISTING; //替换已经存在的<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>
&nbsp; &nbsp; &nbsp; &nbsp; } catch (NameNotFoundException e) {<br>
&nbsp; &nbsp; &nbsp; &nbsp; }<br>
&nbsp; &nbsp; &nbsp;<br>
&nbsp; &nbsp; &nbsp; &nbsp; PackageUtil.AppSnippet as = PackageUtil.getAppSnippet(this, mAppInfo,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mPackageURI);<br>
&nbsp; &nbsp; &nbsp; &nbsp; String installerPackageName = getIntent().getStringExtra(<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Intent.EXTRA_INSTALLER_PACKAGE_NAME);<br>
&nbsp; &nbsp; &nbsp; &nbsp; PackageInstallObserver observer = new PackageInstallObserver();<br>
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color:#ff0000"> pm.installPackage(mPackageURI, observer, installFlags, installerPackageName);//安装的代</span></span></span></p>
<p style="text-align:left"><span style="font-size:18px"><br>
</span></p>
<p style="text-align:left"><span style="font-size:18px">我们可以通过上面的代码直接进行安装，</span></p>
<p style="text-align:left"><span style="font-size:18px">不过我们需要<span style="font-family:monospace; font-size:14px; white-space:pre-wrap">android.Manifest.permission#INSTALL_PACKAGE</span></span><span style="font-family:monospace; font-size:14px; white-space:pre-wrap">,</span></p>
<p style="text-align:left"><span style="font-family:monospace; font-size:14px; white-space:pre-wrap">此权限只有</span><span style="font-family:monospace; font-size:14px; white-space:pre-wrap">system</span><span style="font-family:monospace; font-size:14px; white-space:pre-wrap">应用</span><span style="font-family:monospace; font-size:14px; white-space:pre-wrap">才能使用.</span></p>
<p style="text-align:left"><span style="font-family:monospace; font-size:14px; white-space:pre-wrap">所以此应用必须放入system/app下,</span></p>
<p style="text-align:left"><span style="font-family:monospace; white-space:pre-wrap"></span></p>
<div><span style="font-size:24px">解决思路</span></div>
<div><span style="font-size:24px"><span style="color:#97CDCC">•</span>将我们的应用伪装成系统的应用</span></div>
<div><span style="font-size:24px">实现步骤</span></div>
<div><span style="font-size:24px"><span style="color:#97CDCC">•</span>共享系统UID</span></div>
<div><span style="font-size:24px"><span style="color:rgb(151,205,204)">•</span>使用系统签名（匹配签名需要公钥和密钥两个文件生成keystore）</span></div>
<span style="font-size:14px"><br>
</span>
<p></p>
<p style="text-align:left"><span style="font-size:12px"><br>
</span></p>
<p style="text-align:left"><span style="font-size:12px"><br>
</span></p>
<p style="text-align:left"><span style="font-size:24px">还有静默安装的一种方式是使用root权限 &nbsp;adb指令执行 install -r 进行安装</span></p>
<p style="text-align:left"><span style="font-size:12px"><br>
</span></p>
<p style="text-align:left"><span style="font-size:12px"><br>
</span></p>
<p style="text-align:left"><span style="font-size:12px"><br>
</span></p>
<p style="text-align:left"><br>
</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-应用开发中对_Crash_进行处理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/20/应用开发中对_Crash_进行处理/">应用开发中对 Crash 进行处理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<span style="font-family:KaiTi_GB2312; font-size:24px"><span style="color:rgb(51,51,51)"></span></span>
<p align="left"><span style="color:rgb(51,51,51)"></span><pre code_snippet_id="526993" snippet_file_name="blog_20141120_1_5953985" name="code" class="java">
</pre>&nbsp;<span style="color:rgb(51,51,51)">最新做的应用，发布之后用户反馈总是出现闪退，有时候会弹出</span><span style="color:rgb(51,51,51)">“</span><span style="color:rgb(51,51,51)">应用程序意外停止</span><span style="color:rgb(51,51,51)">”</span><span style="color:rgb(51,51,51)">，这时候就是应用程序发生</span><span style="color:rgb(51,51,51)">Crash</span><span style="color:rgb(51,51,51)">了，此时用户只能点击</span><span style="color:rgb(51,51,51)">“</span><span style="color:rgb(51,51,51)">强行关闭</span><span style="color:rgb(51,51,51)">”.</span><span style="color:rgb(51,51,51)">&nbsp;</span><span style="color:rgb(51,51,51)">用户这么说我只知道程序有地方出错了，但是具体地方让我去找那可是大海捞针啊</span><span style="color:rgb(51,51,51)">.</span></p>
<p align="left"></p>
<p align="left"><span style="color:rgb(51,51,51)">这个甚是让人头疼，于是网上搜索一阵，看到关于</span><span style="color:rgb(51,51,51)">应用处理</span><span style="color:rgb(51,51,51)">crash</span><span style="color:rgb(51,51,51)">的方法，</span></p>
<p align="left"><span style="color:rgb(51,51,51)">&nbsp;<img src="http://img.blog.csdn.net/20141120204320761?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHB1X3p5aA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></span></p>
<p align="left"><span style="color:rgb(51,51,51)">Java </span><span style="color:rgb(51,51,51)">中</span><span style="color:rgb(51,51,51)"> Thread
</span><span style="color:rgb(51,51,51)">类中有一个内部接口</span></p>
<p align="left"><span style="color:rgb(51,51,51)"><br>
</span></p>
<p align="left"><span style="color:rgb(51,51,51)"></span></p>
<p align="left"><br>
</p>
<p align="left">&nbsp;<pre code_snippet_id="526993" snippet_file_name="blog_20141120_2_2314448" name="code" class="java">/**当Thread因未捕获异常而突然中止，调用处理程序的接口
     */
   publicstaticinterfaceUncaughtExceptionHandler{
        void uncaughtException(Thread thread, Throwable ex);
}</pre><br>
</p>
<p align="left">&nbsp;</p>
<p align="left">&nbsp;<pre code_snippet_id="526993" snippet_file_name="blog_20141120_3_1923139" name="code" class="java">/**
     *设置当线程未捕获到异常而异常终止，并且Thread挂掉是没有任何处理程序时所调用的默认处理程序
     * @param handler
     *            The handler to set or null.
     */
   publicstaticvoidsetDefaultUncaughtExceptionHandler(UncaughtExceptionHandlerhandler){
        Thread.defaultUncaughtHandler = handler;
   }
</pre><br>
</p>
<p align="left"></p>
<p align="left"><span style="font-family:KaiTi_GB2312; font-size:24px"><span style="color:rgb(51,51,51)">一般的应用程序都要有一个</span><span style="color:rgb(51,51,51)">Crash</span><span style="color:rgb(51,51,51)">反馈机制。一旦</span><span style="color:rgb(51,51,51)">Crash</span><span style="color:rgb(51,51,51)">发生，可以通过一种方法了解</span><span style="color:rgb(51,51,51)">Crash</span><span style="color:rgb(51,51,51)">的信息，开发者可以根据这些信息对代码进行修改。当程序崩溃时可以记录重要的信息以便恢复现场（类&#20284;天天动听），避免</span><span style="color:rgb(51,51,51)">android</span><span style="color:rgb(51,51,51)">系统本身弹出的提示框优化用户体验，或者对异常进行处理把收集到的信息传到服务器。</span></span></p>
<p align="left"><span style="color:rgb(51,51,51)"><span style="font-family:KaiTi_GB2312; font-size:24px">&nbsp;</span></span></p>
<p align="left"><span style="font-family:KaiTi_GB2312; font-size:24px"><span style="color:rgb(51,51,51)">要捕获</span><span style="color:rgb(51,51,51)">Crash
</span><span style="color:rgb(51,51,51)">首先需要<em><strong>实现</strong></em></span><span style="color:rgb(51,51,51)"><em><strong>UncaughtExceptionHandler</strong></em>
</span><span style="color:rgb(51,51,51)">接口，然后在主线程中调用该处理程序基于以上的原因</span></span></p>
<br>
<p align="left"><pre code_snippet_id="526993" snippet_file_name="blog_20141120_4_3201053" name="code" class="java">

public class DefaultExceptionHandler implements UncaughtExceptionHandler{
    private Context context=null;

    public DefaultExceptionHandler(Context context){
        this.context=context;
    }

    public void uncaughtException(Thread thread,Throwable ex){
        //收集异常信息
        sendCrashReport(ex);
        //等待半秒
        try{
            Thread.sleep(500);
        }catch(InterruptedException e){
            e.printStackTrace();

        }

        //处理异常
        handleException();

    }

    private void sendCrashReport(Throwable ex){
        StringBuffer exceptionStr=new StringBuffer();
        exceptionStr.append(ex.getMessage());
        StackTraceElement[] elements=ex.getStackTrace();
        for(int i=0;i&lt;elements.length;i++){
            exceptionStr.append(elements[i].toString());
        }

        //这里可以发送收集到的Crash信息到服务器
    }

    private void handleException(){
        //这里可以对异常处理
        //可以记录主要的信息
        //干脆直接杀死应用程序 System.exit(0); //或再次抛给系统处理

    }

}</pre><br>
</p>
<p><span style="font-family:KaiTi_GB2312; font-size:24px">我们只需要在主Activity中调用一次即可，不需要在所有地方都调用</span></p>
<p><span style="font-family:KaiTi_GB2312; font-size:24px">&nbsp;</span></p>
<span style="font-family:KaiTi_GB2312; font-size:24px">运行上面代码，当Crash发生以后，Android 系统本身就不会出现提示强行停止的对话框了，系统会调用我们的程序，手机异常信息上传服务器 &nbsp; &nbsp;</span><br>
<p align="left"><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span></p>
<p align="left"><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span></p>
<p align="left"><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span></p>
<p align="left"><br>
</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-给用户第一印象---应用启动界面" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/27/给用户第一印象---应用启动界面/">给用户第一印象---应用启动界面</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p></p>
<p><span style="font-size:32px">作为与用户的第一次亲密接触</span></p>
<p><span style="font-size:32px"><br>
<span style="font-family:Microsoft YaHei">splash界面的作用：</span></span></p>
<p><span style="font-family:Microsoft YaHei; font-size:24px">1、展现App的Logo，给用户的第一印象；一般包括图标和应用名称，或者加一句标语</span></p>
<p><span style="font-family:Microsoft YaHei; font-size:24px">2、应用程序初始化的操作；如初始化网络，或者获取用户位置信息，设备信息等<br>
3、检查应用程序的版本；用于提醒版本更新等操作<br>
4、检查当前应用程序是否合法注册；</span></p>
<p><br>
</p>
<p><pre name="code" class="java">public class AppUtil {

	/**
	 * 获取应用程序名称
	 */
	public static String getAppName(Context context) {
		try {
			PackageManager packageManager = context.getPackageManager();
			PackageInfo packageInfo = packageManager.getPackageInfo(context.getPackageName(), 0);
			int labelRes = packageInfo.applicationInfo.labelRes;
			return context.getResources().getString(labelRes);
		} catch (NameNotFoundException e) {
			e.printStackTrace();
		}
		return null;
	}

	/**
	 * [获取应用程序版本名称信息]
	 * @param context
	 * @return 当前应用的版本名称
	 */
	public static String getVersionName(Context context) {
		try {
			PackageManager packageManager = context.getPackageManager();
			PackageInfo packageInfo = packageManager.getPackageInfo(context.getPackageName(), 0);
			return packageInfo.versionName;
		} catch (NameNotFoundException e) {
			e.printStackTrace();
		}
		return null;
	}

}
</pre><br>
<br>
</p>
<p><pre name="code" class="java"> /** 弹出更新对话框
	 */
	private void showUpdate() {
		Builder builder = new Builder(this);
		builder.setTitle(&quot;发现新版本&quot;);
		builder.setMessage(Update.DESCRIPTION);
		builder.setPositiveButton(&quot;立即下载&quot;, new OnClickListener() {
			public void onClick(DialogInterface dialog, int which) {
				startService(new Intent(SplashActivity.this, UpdateService.class));
				handler.sendEmptyMessage(ENTER_HOME);
			}
		});
		builder.setNegativeButton(&quot;以后再说&quot;, new OnClickListener() {
			public void onClick(DialogInterface dialog, int which) {
				handler.sendEmptyMessage(ENTER_HOME);
			}
		});
		builder.show();
	};</pre><br>
<br>
</p>
<p><pre name="code" class="java">
/**通知栏后台下载apk的服务*/
public class UpdateService extends Service {

	// 标题
	private int titleId = R.string.app_name;

	// 文件存储
	private File updateDir = null;
	private File updateFile = null;

	// 通知栏
	private NotificationManager updateNotificationManager = null;
	private Notification updateNotification = null;

	private RemoteViews remoteViews;// 状态栏通知显示的view

	@Override
	public IBinder onBind(Intent intent) {
		return null;
	}

	@Override
	public int onStartCommand(Intent intent, int flags, int startId) {
		System.out.println(&quot;开始下载&quot;);
		// 创建文件
		if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {
			updateDir = new File(Environment.getExternalStorageDirectory().getAbsolutePath());
			updateFile = new File(updateDir.getPath(), getResources().getString(titleId) + &quot;.apk&quot;);
		}

		// 创建通知栏
		this.updateNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
		this.updateNotification = new Notification();
		this.updateNotification.flags |= Notification.FLAG_AUTO_CANCEL;
		// 通知栏视图
		remoteViews = new RemoteViews(getPackageName(), R.layout.notification_update);
		remoteViews.setImageViewResource(R.id.iv_update_icon, R.drawable.ic_launcher);
		updateNotification.contentView = remoteViews;
		updateNotification.icon = R.drawable.ic_launcher;// 设置通知消息的图标
		updateNotification.tickerText = &quot;正在下载。。。&quot;;// 设置通知消息的标题
		// 发出通知
		updateNotificationManager.notify(0, updateNotification);

		// 下载apk
		FinalHttp http = new FinalHttp();
		String url = Update.APKURL;
		http.download(url, updateFile.getAbsolutePath(), new AjaxCallBack&lt;File&gt;() {
			@Override
			public void onFailure(Throwable t, int errorNo, String strMsg) {
				// 下载失败
				remoteViews.setTextViewText(R.id.tv_update_text, &quot;下载失败&quot;);
				remoteViews.setProgressBar(R.id.pb_update_progress, 100, 30, false);
				updateNotification.contentView = remoteViews;
				updateNotificationManager.notify(0, updateNotification);
				// 停止服务
				stopSelf();
				super.onFailure(t, errorNo, strMsg);
			}

			@Override
			public void onLoading(long count, long current) {
				int progress = (int) (current * 100 / count);
				remoteViews.setTextViewText(R.id.tv_update_text, &quot;已下载&quot; + progress + &quot;%&quot;);
				remoteViews.setProgressBar(R.id.pb_update_progress, 100, (int) progress, false);
				updateNotification.contentView = remoteViews;
				updateNotificationManager.notify(0, updateNotification);
				super.onLoading(count, current);
			}

			@Override
			public void onSuccess(File t) {
				// 点击安装PendingIntent
				Uri uri = Uri.fromFile(t);
				Intent installIntent = new Intent(Intent.ACTION_VIEW);
				installIntent.setDataAndType(uri, &quot;application/vnd.android.package-archive&quot;);
				PendingIntent updatePendingIntent = PendingIntent.getActivity(UpdateService.this, 0, installIntent, 0);

				updateNotification.defaults = Notification.DEFAULT_SOUND;// 铃声提醒
				remoteViews.setTextViewText(R.id.tv_update_text, &quot;下载完成，点击安装&quot;);
				remoteViews.setProgressBar(R.id.pb_update_progress, 100, 100, false);
				updateNotification.contentView = remoteViews;
				updateNotification.setLatestEventInfo(getApplicationContext(), &quot;APP&quot;, &quot;下载完成，点击安装&quot;, updatePendingIntent);
				updateNotificationManager.notify(0, updateNotification);
				// 停止服务
				stopSelf();
				super.onSuccess(t);
			}
		});
		return super.onStartCommand(intent, flags, startId);
	}

}
</pre><br>
<br>
</p>
<p><br>
</p>
<p><br>
</p>
<p><br>
</p>
<p><br>
</p>
<p><img src="http://img.tuyiyi.com/images/201402/13929726567989.png" alt=""><br>
</p>
<p><br>
</p>
<p><br>
</p>
<p><br>
</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-自定义控件_---_DeletableEditText带删除按钮的EditText" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/26/自定义控件_---_DeletableEditText带删除按钮的EditText/">自定义控件 --- DeletableEditText带删除按钮的EditText</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p><img src="http://img.blog.csdn.net/20140926144938572" alt=""><br>
</p>
<p>DeletableEditText 的布局：</p>
<p><br>
</p>
<pre code_snippet_id="475707" snippet_file_name="blog_20140926_1_1408152" name="code" class="html">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;fill_parent&quot;
    android:focusable=&quot;true&quot;
    android:focusableInTouchMode=&quot;true&quot; &gt;

    &lt;EditText
        android:id=&quot;@+id/edt_input&quot;
        android:singleLine=&quot;true&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;fill_parent&quot;
        android:paddingLeft=&quot;10dp&quot;
        android:paddingRight=&quot;10dp&quot; /&gt;
    &lt;!--删除按钮--!&gt;
    &lt;ImageButton
        android:id=&quot;@+id/btn_delete&quot;
        android:scaleType=&quot;centerInside&quot;
        android:layout_margin=&quot;5dp&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_alignParentEnd=&quot;true&quot;
        android:layout_centerVertical=&quot;true&quot;
        android:layout_marginRight=&quot;10dp&quot;
        android:background=&quot;@drawable/hzdl_cancel_n&quot;
        android:visibility=&quot;gone&quot; /&gt;
&lt;/RelativeLayout&gt;</pre><br>
<br>
<p></p>
<p><br>
</p>
<p>定义类 继承 LinearLayout</p>
<p></p>
<pre code_snippet_id="475707" snippet_file_name="blog_20140926_2_3823174" name="code" class="java">package com.example.deletableedittext;

import android.content.Context;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.LinearLayout;

import com.zyh.deletableedittext.R;

/**
 * 带删除按钮的EditText
 * @author zyh
 */
public class DeleteableEditText extends LinearLayout {

	private EditText edt_input;
	private ImageButton btn_delete;

	public DeleteableEditText(Context context) {
		super(context);
	}

	public DeleteableEditText(Context context, AttributeSet attrs) {
		super(context, attrs);
		// 获取布局
		View view = LayoutInflater.from(context).inflate(R.layout.edit_delete, this, true);
		edt_input = (EditText) view.findViewById(R.id.edt_input);
		btn_delete = (ImageButton) this.findViewById(R.id.btn_delete);
		edt_input.addTextChangedListener(new TextWatcher() {
			public void onTextChanged(CharSequence s, int start, int before, int count) {
			}

			public void beforeTextChanged(CharSequence s, int start, int count, int after) {
			}

			public void afterTextChanged(Editable s) {
				btn_delete.setVisibility(edt_input.isFocused() &amp;&amp; s.length() &gt; 0 ? View.VISIBLE : View.GONE);
			}
		});
		edt_input.setOnFocusChangeListener(new OnFocusChangeListener() {
			public void onFocusChange(View v, boolean hasFocus) {
				btn_delete.setVisibility(edt_input.getText().length() &lt;= 0 || !hasFocus ? 8 : 0);
			}
		});
		btn_delete.setOnClickListener(new OnClickListener() {
			public void onClick(View v) {
				edt_input.setText(&quot;&quot;);
			}
		});
	}

	/**
	 * @param str 设置输入框显示的默认值
	 */
	public void setHint(String str) {
		edt_input.setHint(str);
	}

	/**
	 * @return 获取输入框中的内容
	 */
	public String getText() {
		return edt_input.getText().toString().trim();
	}

	/**
	 * @param str 设置输入框内容
	 */
	public void setText(String str) {
		edt_input.setText(str);
	}

	/**
	 * @param id 字符id
	 */
	public void setText(int id) {
		edt_input.setText(id);
	}

}
</pre><br>
<br>
<p></p>
<p>然后就可以直接在 布局中使用了&nbsp;</p>
<p><br>
</p>
<p><span style="font-size:24px; color:#ff0000"><a target="_blank" href="https://github.com/18236887539/DeletableEditText">源码地址：https://github.com/18236887539/DeletableEditText</a></span></p>
<p><br>
</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-自定义控件--垂直滑动布局" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/25/自定义控件--垂直滑动布局/">自定义控件--垂直滑动布局</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p><img src="http://img.blog.csdn.net/20140925141607109" alt=""><br>
</p>
<p>自定义一个垂直的布局</p>
<p></p>
<pre code_snippet_id="474951" snippet_file_name="blog_20140925_1_7318963" name="code" class="java">package com.zyh.verticalscrollview;

import android.content.Context;
import android.util.AttributeSet;
import android.view.GestureDetector;
import android.view.GestureDetector.OnGestureListener;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Scroller;

public class VerticalSrcollView extends ViewGroup {

	public VerticalSrcollView(Context context, AttributeSet attrs, int defStyle) {
		super(context, attrs, defStyle);
	}

	private Context cx;

	public VerticalSrcollView(Context context) {
		super(context);
		this.cx = context;
		init();
	}

	public VerticalSrcollView(Context context, AttributeSet attrs) {
		super(context, attrs);
		this.cx = context;
		init();
	}

	private void init() {
		scroller = new Scroller(cx);
		detector = new GestureDetector(cx, new OnGestureListener() {
			public boolean onSingleTapUp(MotionEvent e) {
				return false;
			}

			public void onShowPress(MotionEvent e) {
			}

			/**
			 * 当手指正常滑动时回调
			 */
			public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
				if ((distanceY &lt; 0 &amp;&amp; curId == 0) || (distanceY &gt; 0 &amp;&amp; curId == getChildCount() - 1)) {// 首页跟末尾页超出边界
					return false;
				}
				scrollBy(0, (int) distanceY);
				return false;
			}

			public void onLongPress(MotionEvent e) {
			}

			/**
			 * 当快速滑动式回调
			 */
			public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
				System.out.println(&quot;vY：&quot; + velocityY);
				System.out.println(&quot;cr：&quot; + curId);
				if (velocityY &gt; 0 &amp;&amp; curId &gt; 0) {
					moveToDest(curId - 1);
				} else if (velocityY &lt; 0 &amp;&amp; curId &lt; getChildCount() - 1) {
					moveToDest(curId + 1);
				} else {
					moveToDest(curId);
				}
				isFling = true;
				return false;
			}

			public boolean onDown(MotionEvent e) {
				return false;
			}
		});
	}

	/**
	 * 对子view进行排列布局
	 */
	@Override
	protected void onLayout(boolean changed, int l, int t, int r, int b) {

		for (int i = 0; i &lt; getChildCount(); i++) {
			View view = this.getChildAt(i);
			view.layout(0, i * getHeight(), getWidth(), (i + 1) * getHeight());
		}
	}

	/**
	 * 必须对子View进行measure
	 */
	@Override
	protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
		super.onMeasure(widthMeasureSpec, heightMeasureSpec);

		for (int i = 0; i &lt; getChildCount(); i++) {
			View view = getChildAt(i);
			view.measure(widthMeasureSpec, heightMeasureSpec);
		}
	}

	private GestureDetector detector;
	private Scroller scroller;
	private int curId;// 当前子View的Id
	private boolean isFling = false; // 是否发生快速滑动

	@Override
	public boolean onTouchEvent(MotionEvent event) {

		detector.onTouchEvent(event);// 交给手势识别器

		switch (event.getAction()) {
			case MotionEvent.ACTION_UP:// 手指抬起
				if (!isFling) moveToDest();
				isFling = false;
				break;
			default:
				break;
		}
		return true;
	}

	/**
	 * ViewGroup的内容移动到合适位置
	 */
	private void moveToDest() {
		// 计算当前子view的id
		int destId = (getHeight() / 2 + getScrollY()) / getHeight();
		moveToDest(destId);
	}

	/**
	 * 将指定下标destId的控件移到屏幕
	 * @param destId
	 */
	private void moveToDest(int destId) {
		curId = destId;
		if (destId &gt; getChildCount() - 1) destId = getChildCount() - 1;
		int distance = destId * getHeight() - getScrollY();// 需要移动的距离
		// scrollBy(0, distance);
		scroller.startScroll(0, getScrollY(), 0, distance);
		invalidate();// 刷新视图,执行computeScroll()
	}

	@Override
	public void computeScroll() {
		if (scroller.computeScrollOffset()) {
			scrollTo(0, scroller.getCurrY());
			invalidate();
		}
	}

	public void setOnPageScrollListener(IPageChangeListener changeListener) {
		this.pageChangeListener = changeListener;
	}

	private IPageChangeListener pageChangeListener;

	/**
	 * 页面滑动监听器
	 * @author zyh
	 */
	public interface IPageChangeListener {
		public void changeTo(int pageId);
	}
}
</pre><br>
<br>
<p></p>
<p><br>
</p>
<p><br>
</p>
<p><br>
</p>
<p><br>
</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-自定义Button_直接设置selector" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/25/自定义Button_直接设置selector/">自定义Button 直接设置selector</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p></p>
<h1 style="font-size:2.25em; margin:1em 0px 16px; line-height:1.2; position:relative; padding-bottom:0.3em; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(238,238,238); color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif">
Custom button that can implement click effect don't need create a selector.xml</h1>
<h1 style="font-size:2.25em; margin:1em 0px 16px; line-height:1.2; position:relative; padding-bottom:0.3em; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(238,238,238); color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif">
<a target="_blank" name="user-content-how-to-use" class="anchor" href="https://github.com/18236887539/SelectorButton/blob/master/README.md#how-to-use" style="background-color:transparent; color:rgb(65,131,196); text-decoration:none; position:absolute; top:0px; bottom:0px; left:0px; display:block; padding-right:6px; padding-left:30px; margin-left:-30px"></a>How
 To Use</h1>
<h2 style="margin-top:1em; margin-bottom:16px; line-height:1.225; font-size:1.75em; position:relative; padding-bottom:0.3em; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(238,238,238); color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif">
<a target="_blank" name="user-content-0-create-resvaluesattrsxml--add--code" class="anchor" href="https://github.com/18236887539/SelectorButton/blob/master/README.md#0-create-resvaluesattrsxml--add--code" style="background-color:transparent; color:rgb(65,131,196); text-decoration:none; position:absolute; top:0px; bottom:0px; left:0px; display:block; padding-right:6px; padding-left:30px; margin-left:-30px"></a>0.
 create res/values/attrs.xml add code</h2>
<div class="highlight highlight-xml" style="margin-bottom:16px; color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif; font-size:16px; line-height:25px">
<pre style="overflow:auto; font-family:Consolas,'Liberation Mono',Menlo,Courier,monospace; font-size:14px; margin-top:0px; margin-bottom:0px; line-height:1.45; padding:16px; background-color:rgb(247,247,247); word-wrap:normal; word-break:normal"><span class="cp" style="color:rgb(153,153,153); font-weight:bold">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt" style="color:rgb(0,0,128)">&lt;resources&gt;</span>
<span class="nt" style="color:rgb(0,0,128)">&lt;declare-styleable</span> <span class="na" style="color:rgb(0,128,128)">name=</span><span class="s" style="color:rgb(221,17,68)">&quot;SelectorButton&quot;</span><span class="nt" style="color:rgb(0,0,128)">&gt;</span>
<span class="nt" style="color:rgb(0,0,128)">&lt;attr</span> <span class="na" style="color:rgb(0,128,128)">name=</span><span class="s" style="color:rgb(221,17,68)">&quot;normal_drawable&quot;</span> <span class="na" style="color:rgb(0,128,128)">format=</span><span class="s" style="color:rgb(221,17,68)">&quot;reference&quot;</span> <span class="nt" style="color:rgb(0,0,128)">/&gt;</span>
<span class="nt" style="color:rgb(0,0,128)">&lt;attr</span> <span class="na" style="color:rgb(0,128,128)">name=</span><span class="s" style="color:rgb(221,17,68)">&quot;pressed_drawable&quot;</span> <span class="na" style="color:rgb(0,128,128)">format=</span><span class="s" style="color:rgb(221,17,68)">&quot;reference&quot;</span> <span class="nt" style="color:rgb(0,0,128)">/&gt;</span>
<span class="nt" style="color:rgb(0,0,128)">&lt;/declare-styleable&gt;</span>
<span class="nt" style="color:rgb(0,0,128)">&lt;/resources&gt;</span>
</pre>
</div>
<h2 style="margin-top:1em; margin-bottom:16px; line-height:1.225; font-size:1.75em; position:relative; padding-bottom:0.3em; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(238,238,238); color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif">
<a target="_blank" name="user-content-1create-a-class-seletorbutton-to-extends--button" class="anchor" href="https://github.com/18236887539/SelectorButton/blob/master/README.md#1create-a-class-seletorbutton-to-extends--button" style="background-color:transparent; color:rgb(65,131,196); text-decoration:none; position:absolute; top:0px; bottom:0px; left:0px; display:block; padding-right:6px; padding-left:30px; margin-left:-30px"></a>1.Create
 a class SeletorButton to extends Button</h2>
<div class="highlight highlight-java" style="margin-bottom:16px; color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif; font-size:16px; line-height:25px">
<pre style="overflow:auto; font-family:Consolas,'Liberation Mono',Menlo,Courier,monospace; font-size:14px; margin-top:0px; margin-bottom:0px; line-height:1.45; padding:16px; background-color:rgb(247,247,247); word-wrap:normal; word-break:normal"><span class="kn" style="font-weight:bold">package</span> <span class="n" style="">com</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">example</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">mybutton</span><span class="o" style="font-weight:bold">;</span>

<span class="kn" style="font-weight:bold">import</span> <span class="nn" style="color:rgb(85,85,85)">android.content.Context</span><span class="o" style="font-weight:bold">;</span>
<span class="kn" style="font-weight:bold">import</span> <span class="nn" style="color:rgb(85,85,85)">android.content.res.TypedArray</span><span class="o" style="font-weight:bold">;</span>
<span class="kn" style="font-weight:bold">import</span> <span class="nn" style="color:rgb(85,85,85)">android.graphics.drawable.Drawable</span><span class="o" style="font-weight:bold">;</span>
<span class="kn" style="font-weight:bold">import</span> <span class="nn" style="color:rgb(85,85,85)">android.graphics.drawable.StateListDrawable</span><span class="o" style="font-weight:bold">;</span>
<span class="kn" style="font-weight:bold">import</span> <span class="nn" style="color:rgb(85,85,85)">android.util.AttributeSet</span><span class="o" style="font-weight:bold">;</span>
<span class="kn" style="font-weight:bold">import</span> <span class="nn" style="color:rgb(85,85,85)">android.widget.Button</span><span class="o" style="font-weight:bold">;</span>

<span class="kd" style="font-weight:bold">public</span> <span class="kd" style="font-weight:bold">class</span> <span class="nc" style="color:rgb(68,85,136); font-weight:bold">SelectorButton</span> <span class="kd" style="font-weight:bold">extends</span> <span class="n" style="">Button</span> <span class="o" style="font-weight:bold">{</span>
    <span class="kd" style="font-weight:bold">public</span> <span class="nf" style="color:rgb(153,0,0); font-weight:bold">SelectorButton</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">Context</span> <span class="n" style="">context</span><span class="o" style="font-weight:bold">)</span> <span class="o" style="font-weight:bold">{</span>
        <span class="kd" style="font-weight:bold">super</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">context</span><span class="o" style="font-weight:bold">);</span>
    <span class="o" style="font-weight:bold">}</span>
    <span class="kd" style="font-weight:bold">public</span> <span class="nf" style="color:rgb(153,0,0); font-weight:bold">SelectorButton</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">Context</span> <span class="n" style="">context</span><span class="o" style="font-weight:bold">,</span> <span class="n" style="">AttributeSet</span> <span class="n" style="">attrs</span><span class="o" style="font-weight:bold">,</span> <span class="kt" style="color:rgb(68,85,136); font-weight:bold">int</span> <span class="n" style="">defStyle</span><span class="o" style="font-weight:bold">)</span> <span class="o" style="font-weight:bold">{</span>
        <span class="kd" style="font-weight:bold">super</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">context</span><span class="o" style="font-weight:bold">,</span> <span class="n" style="">attrs</span><span class="o" style="font-weight:bold">,</span> <span class="n" style="">defStyle</span><span class="o" style="font-weight:bold">);</span>
    <span class="o" style="font-weight:bold">}</span>

    <span class="cm" style="color:rgb(153,153,136); font-style:italic">/**</span>
<span class="cm" style="color:rgb(153,153,136); font-style:italic">     * zyh:normal_drawable=&quot;@drawable/btn_login_normal&quot; zyh:pressed_drawable=&quot;@drawable/btn_login_pressed&quot;</span>
<span class="cm" style="color:rgb(153,153,136); font-style:italic">     * @param context</span>
<span class="cm" style="color:rgb(153,153,136); font-style:italic">     * @param attrs</span>
<span class="cm" style="color:rgb(153,153,136); font-style:italic">     */</span>
    <span class="kd" style="font-weight:bold">public</span> <span class="nf" style="color:rgb(153,0,0); font-weight:bold">SelectorButton</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">Context</span> <span class="n" style="">context</span><span class="o" style="font-weight:bold">,</span> <span class="n" style="">AttributeSet</span> <span class="n" style="">attrs</span><span class="o" style="font-weight:bold">)</span> <span class="o" style="font-weight:bold">{</span>
        <span class="kd" style="font-weight:bold">super</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">context</span><span class="o" style="font-weight:bold">,</span> <span class="n" style="">attrs</span><span class="o" style="font-weight:bold">);</span>

        <span class="n" style="">StateListDrawable</span> <span class="n" style="">seletor</span> <span class="o" style="font-weight:bold">=</span> <span class="k" style="font-weight:bold">new</span> <span class="nf" style="color:rgb(153,0,0); font-weight:bold">StateListDrawable</span><span class="o" style="font-weight:bold">();</span><span class="c1" style="color:rgb(153,153,136); font-style:italic">// 背景选择器</span>
        <span class="n" style="">Drawable</span> <span class="n" style="">n</span> <span class="o" style="font-weight:bold">=</span> <span class="kc" style="font-weight:bold">null</span><span class="o" style="font-weight:bold">;</span>
        <span class="n" style="">Drawable</span> <span class="n" style="">p</span> <span class="o" style="font-weight:bold">=</span> <span class="kc" style="font-weight:bold">null</span><span class="o" style="font-weight:bold">;</span>

        <span class="n" style="">TypedArray</span> <span class="n" style="">array</span> <span class="o" style="font-weight:bold">=</span> <span class="n" style="">context</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">obtainStyledAttributes</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">attrs</span><span class="o" style="font-weight:bold">,</span> <span class="n" style="">R</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">styleable</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">SelectorButton</span><span class="o" style="font-weight:bold">);</span>
        <span class="kt" style="color:rgb(68,85,136); font-weight:bold">int</span> <span class="n" style="">count</span> <span class="o" style="font-weight:bold">=</span> <span class="n" style="">array</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">getIndexCount</span><span class="o" style="font-weight:bold">();</span><span class="c1" style="color:rgb(153,153,136); font-style:italic">// 获取属性个数</span>
        <span class="n" style="">System</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">out</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">println</span><span class="o" style="font-weight:bold">(</span><span class="s" style="color:rgb(221,17,68)">&quot;count:&quot;</span> <span class="o" style="font-weight:bold">&#43;</span> <span class="n" style="">count</span><span class="o" style="font-weight:bold">);</span>
        <span class="k" style="font-weight:bold">for</span> <span class="o" style="font-weight:bold">(</span><span class="kt" style="color:rgb(68,85,136); font-weight:bold">int</span> <span class="n" style="">i</span> <span class="o" style="font-weight:bold">=</span> <span class="mi" style="color:rgb(0,153,153)">0</span><span class="o" style="font-weight:bold">;</span> <span class="n" style="">i</span> <span class="o" style="font-weight:bold">&lt;</span> <span class="n" style="">count</span><span class="o" style="font-weight:bold">;</span> <span class="n" style="">i</span><span class="o" style="font-weight:bold">&#43;&#43;)</span> <span class="o" style="font-weight:bold">{</span>
            <span class="kt" style="color:rgb(68,85,136); font-weight:bold">int</span> <span class="n" style="">index</span> <span class="o" style="font-weight:bold">=</span> <span class="n" style="">array</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">getIndex</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">i</span><span class="o" style="font-weight:bold">);</span>
            <span class="n" style="">System</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">out</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">println</span><span class="o" style="font-weight:bold">(</span><span class="s" style="color:rgb(221,17,68)">&quot;index:&quot;</span> <span class="o" style="font-weight:bold">&#43;</span> <span class="n" style="">index</span><span class="o" style="font-weight:bold">);</span>
            <span class="n" style="">System</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">out</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">println</span><span class="o" style="font-weight:bold">(</span><span class="s" style="color:rgb(221,17,68)">&quot;draw:&quot;</span> <span class="o" style="font-weight:bold">&#43;</span> <span class="n" style="">array</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">getDrawable</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">index</span><span class="o" style="font-weight:bold">));</span>
            <span class="k" style="font-weight:bold">switch</span> <span class="o" style="font-weight:bold">(</span><span class="n" style="">index</span><span class="o" style="font-weight:bold">)</span> <span class="o" style="font-weight:bold">{</span>
                <span class="k" style="font-weight:bold">case</span> <span class="n" style="">R</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">styleable</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">SelectorButton_normal_drawable</span><span class="o" style="font-weight:bold">:</span>
                    <span class="n" style="">n</span> <span class="o" style="font-weight:bold">=</span> <span class="n" style="">array</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">getDrawable</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">index</span><span class="o" style="font-weight:bold">);</span>
                    <span class="k" style="font-weight:bold">break</span><span class="o" style="font-weight:bold">;</span>
                <span class="k" style="font-weight:bold">case</span> <span class="n" style="">R</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">styleable</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">SelectorButton_pressed_drawable</span><span class="o" style="font-weight:bold">:</span>
                    <span class="n" style="">p</span> <span class="o" style="font-weight:bold">=</span> <span class="n" style="">array</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">getDrawable</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">index</span><span class="o" style="font-weight:bold">);</span>
                    <span class="k" style="font-weight:bold">break</span><span class="o" style="font-weight:bold">;</span>
            <span class="o" style="font-weight:bold">}</span>
        <span class="o" style="font-weight:bold">}</span>
        <span class="n" style="">seletor</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">addState</span><span class="o" style="font-weight:bold">(</span><span class="k" style="font-weight:bold">new</span> <span class="kt" style="color:rgb(68,85,136); font-weight:bold">int</span><span class="o" style="font-weight:bold">[]</span> <span class="o" style="font-weight:bold">{</span> <span class="n" style="">android</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">R</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">attr</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">state_pressed</span> <span class="o" style="font-weight:bold">},</span> <span class="n" style="">p</span><span class="o" style="font-weight:bold">);</span>
        <span class="n" style="">seletor</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">addState</span><span class="o" style="font-weight:bold">(</span><span class="k" style="font-weight:bold">new</span> <span class="kt" style="color:rgb(68,85,136); font-weight:bold">int</span><span class="o" style="font-weight:bold">[]</span> <span class="o" style="font-weight:bold">{</span> <span class="n" style="">android</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">R</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">attr</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">state_focused</span> <span class="o" style="font-weight:bold">},</span> <span class="n" style="">p</span><span class="o" style="font-weight:bold">);</span>
        <span class="n" style="">seletor</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">addState</span><span class="o" style="font-weight:bold">(</span><span class="k" style="font-weight:bold">new</span> <span class="kt" style="color:rgb(68,85,136); font-weight:bold">int</span><span class="o" style="font-weight:bold">[]</span> <span class="o" style="font-weight:bold">{},</span> <span class="n" style="">n</span><span class="o" style="font-weight:bold">);</span>
        <span class="k" style="font-weight:bold">this</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">setBackgroundDrawable</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">seletor</span><span class="o" style="font-weight:bold">);</span>
        <span class="n" style="">array</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">recycle</span><span class="o" style="font-weight:bold">();</span>
    <span class="o" style="font-weight:bold">}</span>
<span class="o" style="font-weight:bold">}</span>
</pre>
</div>
<h2 style="margin-top:1em; margin-bottom:16px; line-height:1.225; font-size:1.75em; position:relative; padding-bottom:0.3em; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(238,238,238); color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif">
<a target="_blank" name="user-content-2-use--in-xml" class="anchor" href="https://github.com/18236887539/SelectorButton/blob/master/README.md#2-use--in-xml" style="background-color:transparent; color:rgb(65,131,196); text-decoration:none; position:absolute; top:0px; bottom:0px; left:0px; display:block; padding-right:6px; padding-left:30px; margin-left:-30px"></a>2.
 use in xml</h2>
<div class="highlight highlight-xml" style="margin-bottom:16px; color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif; font-size:16px; line-height:25px">
<pre style="overflow:auto; font-family:Consolas,'Liberation Mono',Menlo,Courier,monospace; font-size:14px; margin-top:0px; margin-bottom:0px; line-height:1.45; padding:16px; background-color:rgb(247,247,247); word-wrap:normal; word-break:normal"><span class="c" style="color:rgb(153,153,136); font-style:italic">&lt;!-- First you should define a namespace --!&gt;</span>
<span class="c" style="color:rgb(153,153,136); font-style:italic"> xmlns:zyh=&quot;http://schemas.android.com/apk/res/com.example.mybutton&quot;</span>
<span class="c" style="color:rgb(153,153,136); font-style:italic">&lt;!--use SelectorButton--!&gt;</span>
<span class="c" style="color:rgb(153,153,136); font-style:italic"> &lt;com.example.mybutton.SelectorButton</span>
<span class="c" style="color:rgb(153,153,136); font-style:italic">        android:id=&quot;@&#43;id/btn&quot;</span>
<span class="c" style="color:rgb(153,153,136); font-style:italic">        android:layout_width=&quot;wrap_content&quot;</span>
<span class="c" style="color:rgb(153,153,136); font-style:italic">        android:layout_height=&quot;wrap_content&quot;</span>
<span class="c" style="color:rgb(153,153,136); font-style:italic">        android:text=&quot;button&quot;</span>
<span class="c" style="color:rgb(153,153,136); font-style:italic">        zyh:normal_drawable=&quot;@drawable/exam_list_bg_default&quot;</span>
<span class="c" style="color:rgb(153,153,136); font-style:italic">        zyh:pressed_drawable=&quot;@drawable/exam_list_bg_pressed&quot; /&gt;</span>
</pre>
</div>
<p></p>
<p style="margin-top:0px; margin-bottom:16px; color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif; font-size:16px; line-height:25px">
example: main.xml</p>
<div class="highlight highlight-xml" style="margin-bottom:16px; color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif; font-size:16px; line-height:25px">
<pre style="overflow:auto; font-family:Consolas,'Liberation Mono',Menlo,Courier,monospace; font-size:14px; margin-top:0px; margin-bottom:0px; line-height:1.45; padding:16px; background-color:rgb(247,247,247); word-wrap:normal; word-break:normal"><span class="nt" style="color:rgb(0,0,128)">&lt;RelativeLayout</span> <span class="na" style="color:rgb(0,128,128)">xmlns:android=</span><span class="s" style="color:rgb(221,17,68)">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na" style="color:rgb(0,128,128)">xmlns:tools=</span><span class="s" style="color:rgb(221,17,68)">&quot;http://schemas.android.com/tools&quot;</span>
    <span class="na" style="color:rgb(0,128,128)">xmlns:zyh=</span><span class="s" style="color:rgb(221,17,68)">&quot;http://schemas.android.com/apk/res/com.example.mybutton&quot;</span>
    <span class="na" style="color:rgb(0,128,128)">android:layout_width=</span><span class="s" style="color:rgb(221,17,68)">&quot;match_parent&quot;</span>
    <span class="na" style="color:rgb(0,128,128)">android:layout_height=</span><span class="s" style="color:rgb(221,17,68)">&quot;match_parent&quot;</span>
    <span class="na" style="color:rgb(0,128,128)">android:paddingBottom=</span><span class="s" style="color:rgb(221,17,68)">&quot;@dimen/activity_vertical_margin&quot;</span>
    <span class="na" style="color:rgb(0,128,128)">android:paddingLeft=</span><span class="s" style="color:rgb(221,17,68)">&quot;@dimen/activity_horizontal_margin&quot;</span>
    <span class="na" style="color:rgb(0,128,128)">android:paddingRight=</span><span class="s" style="color:rgb(221,17,68)">&quot;@dimen/activity_horizontal_margin&quot;</span>
    <span class="na" style="color:rgb(0,128,128)">android:paddingTop=</span><span class="s" style="color:rgb(221,17,68)">&quot;@dimen/activity_vertical_margin&quot;</span>
    <span class="na" style="color:rgb(0,128,128)">tools:context=</span><span class="s" style="color:rgb(221,17,68)">&quot;com.example.mybutton.MainActivity&quot;</span> <span class="nt" style="color:rgb(0,0,128)">&gt;</span>

    <span class="nt" style="color:rgb(0,0,128)">&lt;com.example.mybutton.SelectorButton</span>
        <span class="na" style="color:rgb(0,128,128)">android:id=</span><span class="s" style="color:rgb(221,17,68)">&quot;@&#43;id/btn&quot;</span>
        <span class="na" style="color:rgb(0,128,128)">android:layout_width=</span><span class="s" style="color:rgb(221,17,68)">&quot;wrap_content&quot;</span>
        <span class="na" style="color:rgb(0,128,128)">android:layout_height=</span><span class="s" style="color:rgb(221,17,68)">&quot;wrap_content&quot;</span>
        <span class="na" style="color:rgb(0,128,128)">android:text=</span><span class="s" style="color:rgb(221,17,68)">&quot;button&quot;</span>
        <span class="na" style="color:rgb(0,128,128)">zyh:normal_drawable=</span><span class="s" style="color:rgb(221,17,68)">&quot;@drawable/exam_list_bg_default&quot;</span>
        <span class="na" style="color:rgb(0,128,128)">zyh:pressed_drawable=</span><span class="s" style="color:rgb(221,17,68)">&quot;@drawable/exam_list_bg_pressed&quot;</span> <span class="nt" style="color:rgb(0,0,128)">/&gt;</span>
<span class="nt" style="color:rgb(0,0,128)">&lt;/RelativeLayout&gt;</span>
</pre>
</div>
<h2 style="margin-top:1em; margin-bottom:16px; line-height:1.225; font-size:1.75em; position:relative; padding-bottom:0.3em; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(238,238,238); color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif">
<a target="_blank" name="user-content-3-use-in-codejava" class="anchor" href="https://github.com/18236887539/SelectorButton/blob/master/README.md#3-use-in-codejava" style="background-color:transparent; color:rgb(65,131,196); text-decoration:none; position:absolute; top:0px; bottom:0px; left:0px; display:block; padding-right:6px; padding-left:30px; margin-left:-30px"></a>3.
 use in code.java</h2>
<div class="highlight highlight-Java" style="margin-bottom:16px; color:rgb(51,51,51); font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif; font-size:16px; line-height:25px">
<pre style="overflow:auto; font-family:Consolas,'Liberation Mono',Menlo,Courier,monospace; font-size:14px; margin-top:0px; margin-bottom:0px; line-height:1.45; padding:16px; background-color:rgb(247,247,247); word-wrap:normal; word-break:normal"><span class="n" style="">SelectorButton</span> <span class="n" style="">mButton</span> <span class="o" style="font-weight:bold">=</span> <span class="n" style="">findViewById</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">R</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">id</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">button</span><span class="o" style="font-weight:bold">);</span>
<span class="n" style="">Drawable</span> <span class="n" style="">normalDrawable</span> <span class="o" style="font-weight:bold">=</span> <span class="n" style="">getResources</span><span class="o" style="font-weight:bold">().</span><span class="na" style="color:rgb(0,128,128)">getDrawable</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">R</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">drawable</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">btn_normal</span><span class="o" style="font-weight:bold">);</span>
<span class="n" style="">Drawable</span> <span class="n" style="">pressedDrawable</span> <span class="o" style="font-weight:bold">=</span> <span class="n" style="">getResources</span><span class="o" style="font-weight:bold">().</span><span class="na" style="color:rgb(0,128,128)">getDrawable</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">R</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">drawable</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">btn_pressed</span><span class="o" style="font-weight:bold">);</span>
<span class="n" style="">mButton</span><span class="o" style="font-weight:bold">.</span><span class="na" style="color:rgb(0,128,128)">setSelecorDrawable</span><span class="o" style="font-weight:bold">(</span><span class="n" style="">normalDrawable</span><span class="o" style="font-weight:bold">,</span> <span class="n" style="">pressedDrawable</span><span class="o" style="font-weight:bold">);</span></pre>
</div>
<br>
<p><br>
</p>
<p><br>
</p>
<p>源码下载：<a target="_blank" href="https://github.com/18236887539/SelectorButton">https://github.com/18236887539/SelectorButton</a></p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-自定义控件---带边框的圆形图片" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/24/自定义控件---带边框的圆形图片/">自定义控件---带边框的圆形图片</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p>效果：</p>
<p><br>
</p>
<p><img src="http://img.blog.csdn.net/20140924112817531" alt=""></p>
<p><img src="http://img.blog.csdn.net/20140924113012612" alt=""><br>
</p>
<p><br>
</p>
<p><pre name="code" class="java">package com.zyh.cricleimageview;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.Path;
import android.util.AttributeSet;
import android.widget.ImageView;

/**
 * 圆角图片
 * @author zyh
 */
public class CircleImageView extends ImageView {

	public CircleImageView(Context context) {
		super(context);
	}

	public CircleImageView(Context context, AttributeSet attrs) {
		super(context, attrs);
	}

	public CircleImageView(Context context, AttributeSet attrs, int defStyle) {
		super(context, attrs, defStyle);
	}

	private int bWidth = 10;// 边框宽度
	private int bColor = Color.WHITE;// 边框颜色

	/**
	 * 设置圆形图片的边框颜色
	 * @param color
	 */
	public void setBorderColor(int color) {
		bColor = color;
	}

	/**
	 * 设置圆形图片的边框宽度
	 * @param
	 */
	public void setBorderWidth(int width) {
		bWidth = width;
	}

	/**
	 * 设置圆形图片的边框宽度和颜色
	 * @param
	 */
	public void setBorderWidth(int width, int color) {
		bWidth = width;
		bColor = color;
	}

	@Override
	public void setImageBitmap(Bitmap bm) {

		int d = Math.min(bm.getWidth(), bm.getHeight());// 或得圆直径
		Bitmap dest = Bitmap.createBitmap(d, d, bm.getConfig());// 创建一个副本
		// 画边框
		Canvas c = new Canvas(dest);
		Paint paint = new Paint();
		paint.setColor(bColor); // 边框颜色
		paint.setAntiAlias(true);// 设置抗锯齿
		c.drawCircle(d / 2, d / 2, d / 2, paint);
		// 画圆
		Path path = new Path();
		path.addCircle(d / 2, d / 2, d / 2 - bWidth, Path.Direction.CW);
		c.clipPath(path); // 裁剪区域

		Matrix matrix = new Matrix();// 不缩放
		c.drawBitmap(bm, matrix, paint);// 把图画上去
		super.setImageBitmap(dest);
	}

}</pre><br>
<br>
</p>
<p><br>
</p>
<p><br>
</p>
<p>使用&nbsp;</p>
<p><pre name="code" class="java">public class MainActivity extends Activity {

	private CircleImageView iv;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_main);
		iv = (CircleImageView) findViewById(R.id.iv);
		iv.setBorderWidth(15, Color.BLUE);// 设置边框
		iv.setImageBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.photo)); // 设置图片
	}
}
</pre><br>
<br>
</p>
<p><br>
</p>
<p><br>
</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-【_简单实现双击，3击，___N击_】Android系统源码" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/15/【_简单实现双击，3击，___N击_】Android系统源码/">【 简单实现双击，3击，...N击 】Android系统源码</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p><span style="line-height:28px"><span style="font-size:18px"><span style="font-family:KaiTi_GB2312">主要使用到一个静态方法&nbsp;</span><span style="font-family:Courier New; color:#3333ff"><span style="line-height:28px">System.</span>arraycopy()</span><span style="font-family:KaiTi_GB2312">&nbsp;//实现数组之间的复制。<br>
</span></span></span><span style="font-size:18px"><span style="line-height:28px"><span style="font-family:KaiTi_GB2312">函数原型：</span></span><span style="color:rgb(51,102,255); font-family:'Courier New'; line-height:28px">public static void<strong>arraycopy</strong>(Object
 src, int srcPos, Object dest, int destPos, int length)<br>
</span></span><span style="font-size:18px"><span style="line-height:28px"><span style="font-family:KaiTi_GB2312">src:源数组； &nbsp;&nbsp;</span></span><span style="font-family:KaiTi_GB2312; line-height:28px">srcPos:源数组要复制的起始位置；&nbsp;<br>
</span></span><span style="font-size:18px"><span style="line-height:28px"><span style="font-family:KaiTi_GB2312">dest:目的数组；</span></span><span style="line-height:28px"><span style="font-family:KaiTi_GB2312">d</span></span><span style="font-family:KaiTi_GB2312; line-height:28px">estPos:目的数组放置的起始位置；&nbsp;<br>
</span></span><span style="font-family:KaiTi_GB2312; line-height:28px"><span style="font-size:18px">length:复制的长度。<br>
</span></span><span style="font-family:KaiTi_GB2312; line-height:28px"><span style="font-size:18px">注意：src与dest都必须是同类型或者可以进行转换类型的数组．&nbsp;<br>
</span></span><span style="font-family:KaiTi_GB2312; line-height:28px"><span style="font-size:18px">这个函数可以实现自己到自己复制，比如：&nbsp;<br>
</span></span><span style="line-height:28px"><span style="font-family:Courier New; font-size:18px">int[] fun ={0,1,2,3,4,5,6};&nbsp;<br>
</span></span><span style="line-height:28px"><span style="font-family:Courier New; font-size:18px">System.arraycopy(fun,0,fun,3,3);&nbsp;<br>
</span></span><span style="font-size:18px"><span style="font-family:KaiTi_GB2312; line-height:28px">则结果为：</span><span style="line-height:28px"><span style="font-family:Courier New">{0,1,2,0,1,2,6};&nbsp;<br>
</span></span></span><span style="font-family:KaiTi_GB2312; line-height:28px"><span style="font-size:18px">实现过程是这样的，先生成一个长度为length的临时数组,将fun数组中srcPos 到srcPos&#43;length-1之间的数据拷贝到临时数组中，再执行System.arraycopy(临时数组,0,fun,3,3).<br>
</span></span><span style="font-family:KaiTi_GB2312; line-height:28px"><span style="font-size:18px">利用一个 数组的复制来简单实现 判断快速双击 3击...</span></span></p>
<p><pre code_snippet_id="469289" snippet_file_name="blog_20140915_1_4325769" name="code" class="java">public class CommentUtils {
	private static long[] mHits = new long[2]; // 五次点击改成5

	/**
	 * 判断是否双击
	 * @param t 双击间隔
	 */
	public static boolean isFastDoubleClick(long t) {
		System.arraycopy(mHits, 1, mHits, 0, mHits.length - 1);
		mHits[mHits.length - 1] = SystemClock.uptimeMillis();
		return SystemClock.uptimeMillis() - mHits[0] &gt;= t;
	}
}</pre><br>
<br>
</p>
<p></p>
<p></p>
<p>Android 中n击</p>
<p></p>
<pre code_snippet_id="469289" snippet_file_name="blog_20140915_2_9148788" name="code" class="java">long[] mHits = new long[4]; // 五次点击改成5

	public void click(View view) {
		System.arraycopy(mHits, 1, mHits, 0, mHits.length - 1);
		mHits[mHits.length - 1] = SystemClock.uptimeMillis();
		if (mHits[0] &gt;= SystemClock.uptimeMillis() - 500) {
			Toast.makeText(this, &quot;你点击了4次&quot;, Toast.LENGTH_SHORT).show();
		}
	}</pre>
<p></p>
<p><span style="font-family:KaiTi_GB2312; font-size:24px"><br>
</span></p>
<span style="font-family:KaiTi_GB2312; font-size:24px">还可利用该功能实现表单重复提交，一段时间内不允许TODO</span><br>
<br>
<p></p>
<pre></pre>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-Java对象的序列化与反序列化" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/12/Java对象的序列化与反序列化/">Java对象的序列化与反序列化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p><span style="font-size:24px"><br>
</span></p>
<p><span style="font-size:24px">1. 对象需要实现&nbsp;Serializable接口（并且该对象的成员也需要implements Serializable）</span></p>
<p><br>
</p>
<p><pre name="code" class="java">
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

import com.zyh.jwc.domain.CachePicItem;

/**
 * 操作java对象序列化
 */
public class MyObjectUtils {

	public static void setObjectToDisk(CachePicItem object, File file) {
		System.out.println(object.getList().toString());
		try {
			FileOutputStream fos = new FileOutputStream(file);
			ObjectOutputStream oos = new ObjectOutputStream(fos);
			oos.writeObject(object);
			oos.close();
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}

	public static CachePicItem getObjectFromDisk(File file) {
		CachePicItem object = new CachePicItem();
		try {
			FileInputStream fis = new FileInputStream(file);
			ObjectInputStream ois = new ObjectInputStream(fis);
			object = (CachePicItem) ois.readObject();
			ois.close();
			System.out.println(object.getList().toString());
			return object;
		} catch (Exception ex) {
			ex.printStackTrace();
			return null;
		}
	}
}
</pre><br>
</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-小记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/12/小记/">小记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<pre style="text-align:justify"><span style="font-family:KaiTi_GB2312; font-size:32px">&nbsp; &nbsp; </span><span style="font-family:Microsoft YaHei; font-size:18px; color:#666666"><img alt="奋斗" src="http://static.blog.csdn.net/xheditor/xheditor_emot/default/struggle.gif">大四开学，这段时间没有来记录自己的学习进度，真是遗憾，今天写代码，发现以前的基础知识都不会，这今天开始，遇到的问题要开始总结了.&nbsp;前两天收到招聘邮件，待遇不错，又看了看要求的条件，感觉还是需要再努力努力的，同学有的去培训，有的考研复习，不知道哪一个才是我想要的，没有自己的目标，想想自己上大学之前自己的下的决心，现在只能是叹息，还是提升自己的实力吧......<img alt="奋斗" src="http://static.blog.csdn.net/xheditor/xheditor_emot/default/struggle.gif"></span></pre>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-c_c___时间相关函数_include_time_h_" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/03/16/c_c___时间相关函数_include_time_h_/">c\c++ 时间相关函数 include&lt;time.h&gt;</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p><br>
</p>
<p><br>
</p>
<p></p>
<pre name="code" class="cpp">#include &lt;cstdio&gt;
#include &lt;iostream&gt;
#include &lt;ctime&gt;
using namespace std;

int main()
{
	clock_t start,end;?/clock_t 与 time_t 都是 long 型的
	long i = 10000000L;
	
	start = clock();
	while(i--);
	end = clock();
	printf(&quot;time = %lf\n&quot;,(double)(end-start)/1000.0);
	//time = 0.024000
	
	time_t t = time(NULL);
	printf(&quot;Calender time is: %ld ms,the distance of 1700-1-1 days = %d\n&quot;,t,t/60/60/24);
	//Calender time is: 1394952675 ms,the distance of 1700-1-1 days = 16145
	
	tm * lt;	
	lt = gmtime(&amp;t);
	printf(&quot;current time is :%04d %02d %02d , %02d:%02d:%02d\n&quot;,lt-&gt;tm_year+1900,lt-&gt;tm_mon+1,lt-&gt;tm_mday,
	lt-&gt;tm_hour,lt-&gt;tm_min,lt-&gt;tm_sec);

	lt = localtime(&amp;t);
	printf(&quot;current time is :%04d %02d %02d , %02d:%02d:%02d\n&quot;,lt-&gt;tm_year+1900,lt-&gt;tm_mon+1,lt-&gt;tm_mday,
	lt-&gt;tm_hour,lt-&gt;tm_min,lt-&gt;tm_sec);
	//current time is :2014 03 16 , 06:51:15
	//current time is :2014 03 16 , 14:51:15
	
	printf(&quot;%s&quot;,asctime(lt)); //自动有换行 
	printf(&quot;%s&quot;,ctime(&amp;t));
	//Sun Mar 16 14:52:18 2014
	//Sun Mar 16 14:52:18 2014
	
	char str[80];
	strftime(str,100,&quot;%Y %B %d %A %H:%M:%S&quot;,lt);
	printf(&quot;%s\n&quot;,str);
	//2014 March 16 Sunday 14:52:18
	
	 
	struct tm t2;
	t2.tm_year = 2014-1900;
	t2.tm_mon = 2;
	t2.tm_mday = 16;
	t2.tm_hour = 11;
	t2.tm_min = 14;
	t2.tm_sec = 0;
	time_t tt2 = mktime(&amp;t2);
	printf(&quot;t2=%ld\n&quot;,ctime(&amp;tt2));
	printf(&quot;%s\n&quot;,ctime(&amp;tt2));
	//t2=3280808
	//Sun Mar 16 11:14:00 2014
	return 0;
}</pre><br>
<br>
<p></p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-动态规划-矩阵连乘" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/03/04/动态规划-矩阵连乘/">动态规划-矩阵连乘</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p><span style="font-size:24px">特征：计算<span style="color:#ff0000">A[i:j]的最优次序</span>所包含的计算矩阵子链<span style="color:#ff0000"> A[i:k]和A[k&#43;1:j]的次序也是最优的</span>。<br>
</span></p>
<p><img src="http://img.blog.csdn.net/20140304203120937" width="564" height="436" alt=""></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size:24px">如计算 A1*A2*A3*A4*A5*A6</span></p>
<p><img src="http://img.blog.csdn.net/20140304201607390" alt=""></p>
<p>&nbsp;</p>
<p><img src="http://img.blog.csdn.net/20140304202903750" alt=""></p>
<p>&nbsp;</p>
<pre code_snippet_id="217450" snippet_file_name="blog_20140304_1_2568125" class="cpp" name="code">/**
int [] p 存放各个矩阵的列 
int [][] m  所需要的最少数乘次数m[i,j] 1≤i≤j≤n, 最后乘法次数为 m[1][n]; 
int [][] s  s[i][j]:存放的值为相对于m[i][j] 的断开位置 
*/
void matrixChain(int [] p, int [][] m, int [][] s)
{
	
      for (int i = 1; i &lt;= n; i++) m[i][i] = 0; //自身相乘，次数为0 
      
	  for (int r = 2; r &lt;= n; r++) //先计算2个矩阵相乘次数，然后3个，4个... 
      
         for (int i = 1; i &lt;= n-r+1; i++) { //  
            int j=i+r-1; //当前矩阵总个数 
            m[i][j] = m[i+1][j]+ p[i-1]*p[i]*p[j]; //m[i][j]初始化为 从i分割 ，实际还加了m[i][i],为0 
            s[i][j] = i; //从i分割 
            for (int k = i+1; k &lt; j; k++) { //枚举每个位置 为分割点 
               int t = m[i][k] + m[k+1][j] + p[i-1]*p[k]*p[j];
               if (t &lt; m[i][j]) {
                 m[i][j] = t;
                 s[i][j] = k;}
               }
            }
   }</pre>
<p><br>
&nbsp;</p>
<p>&nbsp;</p>
<p>下面这种方法在 书上叫 备忘录 ；</p>
<p>这种方法是自顶向下的</p>
<p>&nbsp;</p>
<pre code_snippet_id="217450" snippet_file_name="blog_20140304_2_343278" class="cpp" name="code">int lookupChain(int i,int j){
	
	if(m[i][j]&gt;0) return m[i][j];
	if(i==j) return 0;
	m[i][j] = lookupChain(i+1,j) + p[i-1]*p[i]*p[j];
	for(int k=i+1; k&lt;j; k++){
		int t = lookupChain(i,k) + lookupChain(k+1,j) + p[i-1]*p[k]*p[j]; 
		if(t&lt;m[i][j]) m[i][j] = t;
	}
	return m[i][j];
}</pre>
<p><br>
&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-基本数据类型的运算" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/02/25/基本数据类型的运算/">基本数据类型的运算</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p><br>
</p>
<p><pre code_snippet_id="205043" snippet_file_name="blog_20140225_1_6730786" name="code" class="cpp">#include &lt;iostream &gt;
#include &lt;cstdio&gt;
using namespace std;
void test_int()
{
	printf(&quot;\ntest int:\n&quot;);
	int a = 100000;
	cout &lt;&lt; &quot;100000 * 100000 = &quot; &lt;&lt; a * a &lt;&lt; endl;
	cout &lt;&lt; &quot; 14  / 5  = &quot; &lt;&lt; 14 / 5 &lt;&lt; endl;
	cout &lt;&lt; &quot; 14  % 5  = &quot; &lt;&lt; 14 % 5 &lt;&lt; endl;
	cout &lt;&lt; &quot; -14 / 5  = &quot; &lt;&lt; -14 / 5 &lt;&lt; endl;
	cout &lt;&lt; &quot; -14 % 5  = &quot; &lt;&lt; -14 % 5 &lt;&lt; endl;
	cout &lt;&lt; &quot; 14  / -5 = &quot; &lt;&lt; 14 / -5 &lt;&lt; endl;
	cout &lt;&lt; &quot; 14  % -5 = &quot; &lt;&lt; 14 % -5 &lt;&lt; endl;
	cout &lt;&lt; &quot; -14 / -5 = &quot; &lt;&lt; -14 / -5 &lt;&lt; endl;
	cout &lt;&lt; &quot; -14 % -5 = &quot; &lt;&lt; -14 % -5 &lt;&lt; endl;
}
void test_double()
{
	printf(&quot;\ntest double:\n&quot;);
	double c, d, z;
	c = 1.0; d = 0.0;
	cout &lt;&lt; &quot; 1.0  / 0.0 = &quot; &lt;&lt; c/d &lt;&lt; endl;
	c = -1.0; d = 0.0;
	cout &lt;&lt; &quot; -1.0 / 0.0 = &quot; &lt;&lt; c/d &lt;&lt; endl;
	c = 0.0; d = 0.0;
	cout &lt;&lt; &quot; 0.0  / 0.0 = &quot; &lt;&lt; c/d &lt;&lt; endl;
	z = 1.0;
	cout &lt;&lt; &quot; z = 1.0; z = &quot; &lt;&lt; z &lt;&lt; endl;
	z /= 12345678912345.0;
	
	cout &lt;&lt; &quot; z /= 12345678912345.0; z = &quot; &lt;&lt; z &lt;&lt; endl;
	z += 1.0;
	cout &lt;&lt; &quot; z += 1.0; z = &quot; &lt;&lt; z &lt;&lt; endl;
	z -= 1.0;
	cout &lt;&lt; &quot; z -= 1.0; z = &quot; &lt;&lt; z &lt;&lt; endl;
	z *= 12345678912345.0;
	cout &lt;&lt; &quot; z *= 12345678912345.0; z == &quot; &lt;&lt; z &lt;&lt; endl;
}
void test_bool()
{
	printf(&quot;\ntest bool:\n&quot;);
	cout &lt;&lt; &quot;(1 &lt;= 2) = &quot; &lt;&lt; (1 &lt;= 2) &lt;&lt; endl;
	cout &lt;&lt; &quot;(3 == 4) = &quot; &lt;&lt; (3 == 4) &lt;&lt; endl;
	cout &lt;&lt; &quot;(5 != 6 &amp;&amp; -7 &lt;= 10) = &quot; &lt;&lt; (5 != 6 &amp;&amp; -7 &lt;= 10) &lt;&lt; endl;
	cout &lt;&lt; &quot;(1234 &amp; 5678) = &quot; &lt;&lt; (1234 &amp; 5678) &lt;&lt; endl;
	cout &lt;&lt; &quot;(1 &lt;&lt; 16) = &quot; &lt;&lt; (1 &lt;&lt; 16) &lt;&lt; endl;
}
void test_order()
{
	printf(&quot;\ntest order:\n&quot;);
	int a = 2, b = 3;
	cout &lt;&lt; &quot;(a++) * (a+2*b) * (b++) = &quot; &lt;&lt; (a++) * (a+2*b) * (b++) &lt;&lt; endl;
}
void test_char()
{
	printf(&quot;\ntest char:\n&quot;);
	cout &lt;&lt; &quot;'A ' + 2 = &quot; &lt;&lt; 'A' + 2 &lt;&lt; endl;
	cout &lt;&lt; &quot;(char)('A ' + 2) = &quot; &lt;&lt; (char)('A' + 2) &lt;&lt; endl;
	cout &lt;&lt; &quot;'z' - 'f' = &quot; &lt;&lt; 'z' - 'f' &lt;&lt; endl;
}
int main()
{
	test_int();
	test_double();
	test_bool();
	test_char();
	test_order();
	
	return 0;
}

/*

test int:
100000 * 100000 = 1410065408
 14  / 5  = 2
 14  % 5  = 4
 -14 / 5  = -2
 -14 % 5  = -4
 14  / -5 = -2
 14  % -5 = 4
 -14 / -5 = 2
 -14 % -5 = -4

test double:
 1.0  / 0.0 = inf
 -1.0 / 0.0 = -inf
 0.0  / 0.0 = nan
 z = 1.0; z = 1
 z /= 12345678912345.0; z = 8.1e-014
 z += 1.0; z = 1
 z -= 1.0; z = 8.10463e-014
 z *= 12345678912345.0; z == 1.00057

test bool:
(1 &lt;= 2) = 1
(3 == 4) = 0
(5 != 6 &amp;&amp; -7 &lt;= 10) = 1
(1234 &amp; 5678) = 1026
(1 &lt;&lt; 16) = 65536

test char:
'A ' + 2 = 67
(char)('A ' + 2) = C
'z' - 'f' = 20

test order:
(a++) * (a+2*b) * (b++) = 48

*/</pre><br>
<br>
</p>
<p><br>
</p>
<p><br>
</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-大数类" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/02/24/大数类/">大数类</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p>大数类</p>
<p><pre code_snippet_id="203052" snippet_file_name="blog_20140224_1_1738053" name="code" class="cpp">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt; 

using namespace std;

const int maxn = 1000;

struct Bign{
	
	int len;  //有效长度 
	int s[maxn]; //存放大数
	
	//构造函数 ，变量初始化 
	Bign(){ memset(s,0,sizeof(s));len = 1;} 
	
	//重载赋值操作，可以直接用 x = &quot;123456789034&quot; 的方式来为x赋值  
	//将字符串逆序存储在 int s[]内 
	Bign operator = (const char * num){
		len = strlen(num);
		for(int i=0;i&lt;len; i++) s[i] = num[len-i-1] - '0';
		return *this;
	}
	
	Bign operator = (int num){
		char s[maxn];
		sprintf(s, &quot;%d&quot;, num);
		*this = s;
		return *this;
	}
	
	Bign(int num){ *this = num; }
	Bign(const char* num){ *this = num; }
	
	string toString() const{
		string str = &quot;&quot;;
		for(int i=len-1; i&gt;=0; i--) str += (char)(s[i]+'0');
		return str;
	}
	
	Bign operator + (const Bign &amp;b ) const {
		Bign c; c.len = 0;
		int i,carry,maxl = max(len,b.len);
		for( i =carry =0; i&lt;maxl; i++){
			int tmp = s[i] + b.s[i] + carry;
			c.s[c.len++] = tmp % 10;
			carry = tmp / 10;
		}
		while(i&lt;len)  c.s[c.len++] += s[i++];  
		while(i&lt;b.len)  c.s[c.len++] += b.s[i++]; 
		return c;
	} 
	
	//去除数组中多余的0 
	void clear() {
		while(len&gt;1 &amp;&amp; !s[len-1])len--; 
	} 
	
	Bign operator * (const Bign &amp;b) const {
		Bign c; c.len = len + b.len;
		//对于a的每一位 用 b的每一位去成一遍 
		for(int i=0; i&lt;len; i++) 
			for(int j=0; j&lt;b.len; j++)
				c.s[i+j] += s[i] * b.s[j];
		//处理进位 
		for(int i=0; i&lt;c.len-1; i++){
			c.s[i+1] += c.s[i] / 10;
			c.s[i] %= 10;
		}
		//去除多余0，更正c.len 
		c.clear();
		return c;		
	}
	
	friend istream &amp;operator &gt;&gt; (istream &amp;in, Bign &amp;n) {
		string s;
		in &gt;&gt; s;
		n = s.c_str();
		return in;
	} 
	
	friend ostream &amp;operator &lt;&lt; (ostream &amp;out, const Bign &amp;n) {
		out &lt;&lt; n.toString();
		return out;
	}
		
};


int main ()
{
	
	Bign n1;
	n1 = &quot;23784589493050034059009342324324&quot;;
	cout &lt;&lt; &quot; n1 = &quot; &lt;&lt; n1 &lt;&lt; endl; // n1 = 23784589493050034059009342324324
	
	Bign n2; 
	n2 = 1234567890;
	cout &lt;&lt; &quot; n2 = &quot; &lt;&lt; n2 &lt;&lt; endl; // n2 = 1234567890
	
	Bign n3(&quot;9787827383654329&quot;); 
	cout &lt;&lt; &quot; n3 = &quot; &lt;&lt; n3 &lt;&lt; endl; // n3 = 9787827383654329
	
	Bign n4(827383654); 
	cout &lt;&lt; &quot; n4 = &quot; &lt;&lt; n4 &lt;&lt; endl; // n3 = 827383654
	
	Bign n5 = &quot;78398249420049293949589999999&quot;;
	Bign n6 = &quot;1344234769898495120000001&quot;; 
	cout &lt;&lt; &quot; n5 + n6 = &quot; &lt;&lt; (n5+n6) &lt;&lt; endl; // n5 + n6 = 78399593654819192444710000000

	Bign n7 = &quot;7293949589999999&quot;;
	Bign n8 = &quot;14769896431116&quot;; 
	cout &lt;&lt; &quot; n7 * n8 = &quot; &lt;&lt; (n7*n8) &lt;&lt; endl; // n7 * n8 = 107730880018080996672543568884
											
	 
}</pre><br>
<br>
</p>
<p><br>
</p>
<p><br>
</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-NYOJ-题目27&amp;nbsp;水池数目" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/02/19/NYOJ-题目27&nbsp;水池数目/">NYOJ-题目27&amp;nbsp;水池数目</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<div id="sina_keyword_ad_area2" class="articalContent  ">
			<a href="http://acm.nyist.net/JudgeOnline/problem.php?pid=27" target="_blank">http://acm.nyist.net/JudgeOnline/problem.php?pid=27</a>
<div><br></div>
<div><br></div>
<div>程序代码（一）：时间 8 内存 272</div>
<div>
<div>&nbsp;<wbr></div>
<div><font color="#214EDA">#include</font></div>
<div><font color="#214EDA">#define N 102</font></div>
<div><font color="#214EDA">#define M 102</font></div>
<div><font color="#214EDA">int map[N][M] = {0};</font></div>
<div><font color="#214EDA">void search(int i,int j)</font>
//递归调用，将是 1 的 连续地方 全部 变为 0</div>
<div><font color="#214EDA">{ &nbsp;<wbr>
&nbsp;<wbr></font></div>
<div><font color="#214EDA">if(map[i][j-1]) { map[i][j-1]=0;
search(i,j-1); }&nbsp;<wbr></font></div>
<div><font color="#214EDA">if(map[i][j+1]) { map[i][j+1]=0;
search(i,j+1); } &nbsp;<wbr> &nbsp;<wbr></font></div>
<div><font color="#214EDA">if(map[i-1][j]) { map[i-1][j]=0;
search(i-1,j); } &nbsp;<wbr> &nbsp;<wbr></font></div>
<div><font color="#214EDA">if(map[i+1][j]) { map[i+1][j]=0;
search(i+1,j); }</font></div>
<div><font color="#214EDA">}</font></div>
<div><font color="#214EDA">int main()</font></div>
<div><font color="#214EDA">{ &nbsp;<wbr>
&nbsp;<wbr></font></div>
<div><font color="#214EDA">int t,n,m; &nbsp;<wbr>
&nbsp;<wbr></font></div>
<div><font color="#214EDA">int i,j,count; &nbsp;<wbr>
&nbsp;<wbr></font></div>
<div><font color="#214EDA">scanf("%d",&amp;t);
&nbsp;<wbr> &nbsp;<wbr></font></div>
<div><font color="#214EDA">while(t--) &nbsp;<wbr>
&nbsp;<wbr></font></div>
<div><font color="#214EDA">{ &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr></font></div>
<div><font color="#214EDA">scanf("%d
%d",&amp;n,&amp;m);&nbsp;<wbr></font></div>
<div><font color="#214EDA">count=0; &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr></font></div>
<div><font color="#214EDA">for(i=1;i&lt;=n;i++)
&nbsp;<wbr> &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr></font></div>
<div><font color="#214EDA">for(j=1;j&lt;=m;j++)
&nbsp;<wbr> &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr></font></div>
<div><font color="#214EDA">scanf("%d",&amp;map[i][j]);
&nbsp;<wbr> &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr></font></div>
<div><font color="#214EDA">for(i=1;i&lt;=n;i++)
&nbsp;<wbr> &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr></font></div>
<div><font color="#214EDA">for(j=1;j&lt;=m;j++)
&nbsp;<wbr> &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr></font></div>
<div><font color="#214EDA">if(map[i][j])
&nbsp;<wbr>&nbsp;<wbr></font></div>
<div><font color="#214EDA">{&nbsp;<wbr></font></div>
<div><font color="#214EDA">count++;&nbsp;<wbr></font></div>
<div><font color="#214EDA">map[i][j]=0;&nbsp;<wbr></font></div>
<div><font color="#214EDA">search(i,j);&nbsp;<wbr></font></div>
<div><font color="#214EDA">} &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr></font></div>
<div><font color="#214EDA">printf("%d\n",count);
&nbsp;<wbr>&nbsp;<wbr></font></div>
<div><font color="#214EDA">}
&nbsp;<wbr>&nbsp;<wbr></font></div>
<div><font color="#214EDA">return 0;</font></div>
<div><font color="#214EDA">} &nbsp;<wbr>
&nbsp;<wbr></font> <font color="#4D6DF3">&nbsp;<wbr>
&nbsp;<wbr></font></div>
</div>
<div><font color="#4D6DF3"><br></font></div>
<div><span style="line-height: 21px;">程序代码（二）：时间 4 内存
308</span></div>
<div>
<div><span style="line-height: 21px;">&nbsp;<wbr></span></div>
<div>&nbsp;<wbr></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">#include</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">#include</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#FE2302">int
map[100][100],vis[100][100];
//这里定义两个数组同时搜索，时间少，但消耗内存大</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">int
n,m;</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">void
dfs(int i,int j)</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">{</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">vis[i][j]=1;</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">if(map[i-1][j]&amp;&amp;!vis[i-1][j])</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">{</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">vis[i-1][j]=1;</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">dfs(i-1,j);</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">}</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">if(map[i+1][j]&amp;&amp;!vis[i+1][j])</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">{</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">vis[i+1][j]=1;</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">dfs(i+1,j);</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">}</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">if(map[i][j-1]&amp;&amp;!vis[i][j-1])</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">{</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">vis[i][j-1]=1;</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">dfs(i,j-1);</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">}</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">if(map[i][j+1]&amp;&amp;!vis[i][j+1])</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">{</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">vis[i][j+1]=1;</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">dfs(i,j+1);</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">}</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">}</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">int
main()</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">{</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">int
i,j,sum,t;</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">scanf("%d",&amp;t);</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">while(t--)</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">{</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">scanf("%d%d",&amp;m,&amp;n);</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">memset(vis,0,sizeof(vis));</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">memset(map,0,sizeof(map));</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">for(i=1;i&lt;=m;i++)</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">for(j=1;j&lt;=n;j++)</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">scanf("%d",&amp;map[i][j]);</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">sum=0;</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">for(i=1;i&lt;=m;i++)</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">for(j=1;j&lt;=n;j++)</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">if(!vis[i][j]&amp;&amp;map[i][j])</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">{</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">sum++;</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">dfs(i,j);</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">}</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">printf("%d\n",sum);</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">}</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">return 0;</font></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><font color="#00B7EF">}</font></span> &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr></div>
</div>
<div><font color="#4D6DF3"><br></font></div>
<div><span style="line-height: 21px;">程序代码（三）：时间 0 内存
248</span></div>
<div><span style="line-height: 21px;"><br></span></div>
<div>
<div><span style="line-height: 21px;">&nbsp;<wbr></span></div>
<div><font color="#FD2200">#include</font></div>
<div><font color="#FD2200">#include</font></div>
<div><font color="#0E01FF">char</font> <font color="#FD2200">map[100][100],vis[100][100];</font><font color="#070AFE">//这里把数组定义成字符型数组，来存放整型数，减少了内现存和时间</font></div>
<div><font color="#FD2200">int n,m;</font></div>
<div><font color="#FD2200">void dfs(int i,int j)</font></div>
<div><font color="#FD2200">{</font></div>
<div><font color="#FD2200">vis[i][j]=1;</font></div>
<div><font color="#FD2200">if(map[i-1][j]&amp;&amp;!vis[i-1][j])</font></div>
<div><font color="#FD2200">{</font></div>
<div><font color="#FD2200">vis[i-1][j]=1;</font></div>
<div><font color="#FD2200">dfs(i-1,j);</font></div>
<div><font color="#FD2200">}</font></div>
<div><font color="#FD2200">if(map[i+1][j]&amp;&amp;!vis[i+1][j])</font></div>
<div><font color="#FD2200">{</font></div>
<div><font color="#FD2200">vis[i+1][j]=1;</font></div>
<div><font color="#FD2200">dfs(i+1,j);</font></div>
<div><font color="#FD2200">}</font></div>
<div><font color="#FD2200">if(map[i][j-1]&amp;&amp;!vis[i][j-1])</font></div>
<div><font color="#FD2200">{</font></div>
<div><font color="#FD2200">vis[i][j-1]=1;</font></div>
<div><font color="#FD2200">dfs(i,j-1);</font></div>
<div><font color="#FD2200">}</font></div>
<div><font color="#FD2200">if(map[i][j+1]&amp;&amp;!vis[i][j+1])</font></div>
<div><font color="#FD2200">{</font></div>
<div><font color="#FD2200">vis[i][j+1]=1;</font></div>
<div><font color="#FD2200">dfs(i,j+1);</font></div>
<div><font color="#FD2200">}</font></div>
<div><font color="#FD2200">}</font></div>
<div><font color="#FD2200">int main()</font></div>
<div><font color="#FD2200">{</font></div>
<div><font color="#FD2200">int i,j,sum,t;</font></div>
<div><font color="#FD2200">scanf("%d",&amp;t);</font></div>
<div><font color="#FD2200">while(t--)</font></div>
<div><font color="#FD2200">{</font></div>
<div><font color="#FD2200">scanf("%d%d",&amp;m,&amp;n);</font></div>
<div><font color="#FD2200">memset(vis,0,sizeof(vis));</font></div>
<div><font color="#FD2200">memset(map,0,sizeof(map));</font></div>
<div><font color="#FD2200">for(i=1;i&lt;=m;i++)</font></div>
<div><font color="#FD2200">for(j=1;j&lt;=n;j++)</font></div>
<div><font color="#FD2200">scanf("%d",&amp;map[i][j]);</font></div>
<div><font color="#FD2200">sum=0;</font></div>
<div><font color="#FD2200">for(i=1;i&lt;=m;i++)</font></div>
<div><font color="#FD2200">for(j=1;j&lt;=n;j++)</font></div>
<div><font color="#FD2200">if(!vis[i][j]&amp;&amp;map[i][j])</font></div>
<div><font color="#FD2200">{</font></div>
<div><font color="#FD2200">sum++;</font></div>
<div><font color="#FD2200">dfs(i,j);</font></div>
<div><font color="#FD2200">}</font></div>
<div><font color="#FD2200">printf("%d\n",sum);</font></div>
<div><font color="#FD2200">}</font></div>
<div><font color="#FD2200">return 0;</font></div>
<div><font color="#FD2200">} &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr></font> &nbsp;<wbr></div>
</div>							
		</div>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-C&amp;nbsp;语言具体的数据类型数值范…" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/02/19/C&nbsp;语言具体的数据类型数值范…/">C&amp;nbsp;语言具体的数据类型数值范…</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<div id="sina_keyword_ad_area2" class="articalContent  ">
			<font style="FonT-FAMiLY: Courier new"><font style="FonT-FAMiLY: Courier new"><font style="FonT-siZe: 20px"><em><strong><span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
C 语言具体的数据类型数值范围是因不同编译器而异的。以 Turbo C 为例：</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
[signed] char</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
?128 至 127</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
[signed] short [int]</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
?32768 至 32767</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
[signed] int</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
?32768 至 32767</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
[signed] long [int]</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
&ndash;2147483648 至 2147483647</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
unsigned char</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
0 至 255</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
unsigned short [int]</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
0 至 65535</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
unsigned [int]</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
0 至 65535</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
unsigned long [int]</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
0 至 4294967295</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
float</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
?3.4e38 至 ?3.4e?38、0、3.4e?38 至 3.4e38</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
double</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
?1.7e308 至 ?1.7e?308、0、1.7e ?308 至 1.7e308</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
long double</span><br style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">

<span style="WHiTe-spACe: normal; TexT-TrAnsForM: none; WorD-spACinG: 0px; FLoAT: none; CoLor: rgb(51,51,51); FonT: 14px/22px simsun, 宋体, 'Arial narrow'; orpHAns: 2; WiDoWs: 2; DispLAY: inline !important; LeTTer-spACinG: normal; BACKGroUnD-CoLor: rgb(255,255,255); TexT-inDenT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
?1.2e4932 至 ?1.2e?4932、0、1.2e?4932 至
1.2e4932</span></strong></em></font></font></font>
		</div>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-二叉排序树" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/02/19/二叉排序树/">二叉排序树</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<div id="sina_keyword_ad_area2" class="articalContent  ">
			<div>#define FALSE 0</div>
<div>#define TRUE 1</div>
<div>#define ElemType int</div>
<div>#define Status int</div>
<div>#define EQ(a,b) ((a)==(b))</div>
<div>#define LT(a,b) ((a)&lt;(b))</div>
<div>#define LQ(a,b) ((a)&gt;(b))</div>
<div><br></div>
<div><br></div>
<div>#include</div>
<div>#include</div>
<div>#include</div>
<div>using namespace std;</div>
<div><br></div>
<div>typedef struct BiTNode { // 结点结构</div>
<div>&nbsp;<wbr> &nbsp;<wbr> ElemType data;</div>
<div>&nbsp;<wbr> &nbsp;<wbr> struct BiTNode
&nbsp;<wbr>*lchild, *rchild; &nbsp;<wbr> //
左右孩子指针</div>
<div>} BiTNode, *BiTree;</div>
<div><br></div>
<div>Status SearchBST (BiTree T, ElemType key,
&nbsp;<wbr>BiTree f, BiTree &amp;p )</div>
<div>{ // 在根指针 T 所指二叉排序树中递归地查找其关键字等于 key 的数据元素，若查找成功，则返回指针 p
指向该数据元素的结点，并返回TRUE; &nbsp;<wbr></div>
<div>&nbsp;<wbr> // 否则表明查找不成功，返回指针 p
指向查找路径上访问的最后一个结点，并返回函FALSE, 指针 f 指向当前访问 的结点的双亲，其初始调用值为NULL</div>
<div>if (!T) &nbsp;<wbr>{ p = f; &nbsp;<wbr>return
FALSE; } &nbsp;<wbr>// 查找不成功</div>
<div>else &nbsp;<wbr>if ( EQ(key, T-&gt;data) ) { p = T;
&nbsp;<wbr>return TRUE; } &nbsp;<wbr>// 查找成功</div>
<div>else &nbsp;<wbr>if ( LT(key, T-&gt;data) )
&nbsp;<wbr>SearchBST (T-&gt;lchild, key, T, p );
&nbsp;<wbr> &nbsp;<wbr>// 在左子树中继续查找</div>
<div>else &nbsp;<wbr>SearchBST (T-&gt;rchild, key, T, p );
&nbsp;<wbr> &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr> &nbsp;<wbr>//
在右子树中继续查找</div>
<div>} // SearchBST</div>
<div>void Delete ( BiTree &amp;p )</div>
<div>{ &nbsp;<wbr>// 从二叉排序树中删除结点 p， 并重接它的左子树或右子树</div>
<div>&nbsp;<wbr> &nbsp;<wbr>BiTree q,s;</div>
<div>&nbsp;<wbr> &nbsp;<wbr>if (!p-&gt;rchild) {
&nbsp;<wbr> // 右子树为空树则只需重接它的左子树</div>
<div>&nbsp;<wbr> q = p; &nbsp;<wbr>p = p-&gt;lchild;
&nbsp;<wbr>free(q);</div>
<div>&nbsp;<wbr> &nbsp;<wbr>}&nbsp;<wbr></div>
<div>&nbsp;<wbr> &nbsp;<wbr>else if (!p-&gt;lchild)
&nbsp;<wbr>{ &nbsp;<wbr> &nbsp;<wbr>//
左子树为空树只需重接它的右子树</div>
<div>&nbsp;<wbr> q = p; &nbsp;<wbr>p = p-&gt;rchild;
&nbsp;<wbr>free(q);</div>
<div>&nbsp;<wbr> &nbsp;<wbr>}&nbsp;<wbr></div>
<div>&nbsp;<wbr> &nbsp;<wbr>else{ &nbsp;<wbr>
&nbsp;<wbr> //左右子树都不空</div>
<div>&nbsp;<wbr> &nbsp;<wbr>q = p;
&nbsp;<wbr></div>
<div>s = p-&gt;lchild; &nbsp;<wbr> while (s-&gt;rchild)
&nbsp;<wbr> {s = s-&gt;rchild; } // 转左,然后向右到尽头</div>
<div>s-&gt; rchild = q-&gt; rchild;// 将待删除结点的右子树重接到S上</div>
<div>p = p-&gt;lchild; &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr>&nbsp;<wbr></div>
<div>free(q);</div>
<div>&nbsp;<wbr> &nbsp;<wbr>}</div>
<div>} // Delete</div>
<div>Status InsertBST(BiTree &amp;T, ElemType e
)&nbsp;<wbr></div>
<div>{ &nbsp;<wbr>// 当二叉排序树中不存在关键字等于 e.key 的数据元素时，插入元素值为 e
的结点，并返回 TRUE; 否则，不进行插入并返回FALSE</div>
<div>BiTree p,s;</div>
<div>&nbsp;<wbr> &nbsp;<wbr> if (!SearchBST ( T, e,
NULL, p )){</div>
<div>s = (BiTree) malloc (sizeof (BiTNode)); &nbsp;<wbr> //
为新结点分配空间</div>
<div>s-&gt;data = e; &nbsp;<wbr>s-&gt;lchild = s-&gt;rchild
= NULL; &nbsp;<wbr></div>
<div>if &nbsp;<wbr>( !p ) &nbsp;<wbr>T = s;
&nbsp;<wbr> &nbsp;<wbr> // 插入 s 为新的根结点</div>
<div>else &nbsp;<wbr> if ( LT(e, p-&gt;data) )
&nbsp;<wbr> p-&gt;lchild = s; &nbsp;<wbr>
&nbsp;<wbr> &nbsp;<wbr> // 插入 *s 为 *p 的左孩子</div>
<div>else &nbsp;<wbr>p-&gt;rchild = s; &nbsp;<wbr>
&nbsp;<wbr> // 插入 *s 为 *p 的右孩子</div>
<div>return TRUE; &nbsp;<wbr> &nbsp;<wbr> //
插入成功</div>
<div>&nbsp;<wbr> &nbsp;<wbr>}</div>
<div>&nbsp;<wbr> &nbsp;<wbr>else return FALSE;</div>
<div>} // InsertBST</div>
<div>Status DeleteBST (BiTree &amp;T, &nbsp;<wbr>ElemType
key )</div>
<div>{ // 若二叉排序树 T 中存在其关键字等于 key 的数据元素，则删除该数据元素结点，并返回函数值
TRUE，否则返回函数值 FALSE</div>
<div>if (!T) &nbsp;<wbr>return FALSE; //
不存在关键字等于key的数据元素</div>
<div>else &nbsp;<wbr>{ &nbsp;<wbr>
&nbsp;<wbr></div>
<div>if ( EQ (key, T-&gt;data) ) { &nbsp;<wbr>Delete (T);
&nbsp;<wbr> return TRUE; &nbsp;<wbr>}//
找到关键字等于key的数据元素</div>
<div>else if ( LT (key, T-&gt;data) ) DeleteBST ( T-&gt;lchild, key
); &nbsp;<wbr> // 继续在左子树中进行查找</div>
<div>else DeleteBST ( T-&gt;rchild, key ); // 继续在右子树中进行查找</div>
<div>}</div>
<div>} // DeleteBST</div>
<div>void InOrderTraverse(BiTree T)</div>
<div>{//中序遍历二叉树，递归</div>
<div>if(T){</div>
<div>InOrderTraverse(T-&gt;lchild);</div>
<div>cout&lt;&lt;T-&gt;data&lt;&lt;" ";</div>
<div>InOrderTraverse(T-&gt;rchild);</div>
<div>}</div>
<div>}</div>
<div><br></div>
<div>int arr[10] = {1,5,6,4,3,2,7,8,10,9};</div>
<div>int main()</div>
<div>{</div>
<div>ElemType e;</div>
<div>int door = 1,c,flag;</div>
<div>BiTree T,p;</div>
<div>T = NULL;</div>
<div>for(int i=0; i&lt;10; ++i)</div>
<div>InsertBST(T,arr[i]);</div>
<div>while(door){</div>
<div><br></div>
<div>cout&lt;&lt;endl&lt;&lt;"请输入要查找元素："; cin&gt;&gt;e;</div>
<div><br></div>
<div>if(SearchBST(T,e,NULL,p)) {
cout&lt;&lt;endl&lt;&lt;"查找成功!"&lt;&lt;endl&lt;&lt;"是否将其从二叉排序树中删除：
1.是 2.否 &nbsp;<wbr>"&lt;&lt;endl;&nbsp;<wbr></div>
<div>cin&gt;&gt;flag;</div>
<div>if(flag) DeleteBST(T,e);</div>
<div>}</div>
<div>else { cout&lt;&lt;"查找失败！"&lt;&lt;endl&lt;&lt;"是否将元素插入到二叉排序树中:
1.是 2.否 &nbsp;<wbr>"&lt;&lt;endl;&nbsp;<wbr></div>
<div>cin&gt;&gt;flag;</div>
<div>if(flag) DeleteBST(T,e); &nbsp;<wbr> InsertBST(T,e);
}</div>
<div><br></div>
<div>cout&lt;&lt;endl&lt;&lt;"--------1.继续查找 &nbsp;<wbr>
2.查看二叉排序树元素 &nbsp;<wbr>
0.退出----------"&lt;&lt;endl&lt;&lt;"请输入数字继续操作：";</div>
<div>cin&gt;&gt;c;</div>
<div>switch(c){</div>
<div>case 1: door =1; break;</div>
<div>case 2:&nbsp;<wbr></div>
<div>cout&lt;&lt;"二叉排序树中序遍历为："; InOrderTraverse(T);
cout&lt;&lt;endl&lt;&lt;"是否继续查找: 1.是 2.否
&nbsp;<wbr>"&lt;&lt;endl;&nbsp;<wbr></div>
<div>cin&gt;&gt;flag;</div>
<div>if(flag){ door =1; break; }</div>
<div>else &nbsp;<wbr>{
&nbsp;<wbr>cout&lt;&lt;"退出程序！"&lt;&lt;endl;
&nbsp;<wbr>door = 0 ; break;}</div>
<div>case 0: door =0; break;</div>
<div>default: cout&lt;&lt;"输入错误，退出程序！"&lt;&lt;endl;
&nbsp;<wbr>door = 0; &nbsp;<wbr>break;</div>
<div>} //switch</div>
<div>}//while</div>
<div>return 0;</div>
<div>}</div>							
		</div>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-二叉平衡树" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/02/19/二叉平衡树/">二叉平衡树</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<div id="sina_keyword_ad_area2" class="articalContent  ">
			<div>
<p style="line-height: 26px; margin-top: 0px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
对于二叉查找树，尽管查找、插入及删除操作的平均运行时间为O(logn)，但是它们的最差运行时间都是O(n),原因在于对树的形状没有限制。<wbr></p>
<p style="line-height: 26px; margin-top: 0px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
平衡二叉树又称为AVL树，它或者是一棵空树，或者是有下列性质的二叉树：它的左子树和右子树都是平衡二叉树，且左右子树的深度之差的绝对值不超过1。二叉树的的平衡因子BF为：该结点的左子树的深度减去它的右子树的深度，则平衡二叉树的所有结点的平衡因子为只可能是：-1、0和1</p>
<p style="line-height: 26px; margin-top: 0px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
一棵好的平衡二叉树的特征：</p>
<p style="line-height: 26px; margin-top: 0px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
（1）保证有n个结点的树的高度为O(logn)</p>
<p style="line-height: 26px; margin-top: 0px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
（2）容易维护，也就是说，在做数据项的插入或删除操作时，为平衡树所做的一些辅助操作时间开销为O(1)</p>
<p style="line-height: 26px; margin-top: 0px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
一、平衡二叉树的构造</p>
<p style="line-height: 26px; margin-top: 0px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
在一棵二叉查找树中插入结点后，调整其为平衡二叉树。若向平衡二叉树中插入一个新结点后破坏了平衡二叉树的平衡性。首先要找出插入新结点后失去平衡的最小子树根结点的指针。然后再调整这个子树中有关结点之间的链接关系，使之成为新的平衡子树。当失去平衡的最小子树被调整为平衡子树后，原有其他所有不平衡子树无需调整，整个二叉排序树就又成为一棵平衡二叉树</p>
<p style="line-height: 26px; margin-top: 0px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
1.调整方法</p>
<p style="line-height: 26px; margin-top: 0px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
（1）插入点位置必须<font color="#FF0000">满足二叉查找树的性质</font>，即任意一棵子树的左结点都小于根结点，右结点大于根结点</p>
<p style="line-height: 26px; margin-top: 0px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
（2）找出插入结点后<strong><font color="#FF0000">不平衡的最小二叉树</font></strong>进行调整，如果是整个树不平衡，才进行整个树的调整。</p>
<p style="line-height: 26px; margin-top: 0px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
2.调整方式</p>
<p style="line-height: 26px; margin-top: 0px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
（1）LL型</p>
<p style="line-height: 26px; margin-top: 0px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
LL型：插入位置<font color="#FF0000"><strong>为左子树的左结点，进行向右旋转</strong></font></p>
<div style="line-height: 26px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
<img alt="平衡二叉树 - 枫叶 - 枫叶" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://img115.ph.126.net/SqbMtCG391VVP3FXrnR_bg==/2010012808692889579.gif" style="border-style: initial; border-color: initial; max-width: 100%; margin-top: 0px; margin-right: 10px; margin-bottom: 0px; margin-left: 0px;" title="二叉平衡树"></div>
<div style="line-height: 26px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
由于在A的左孩子B的左子树上插入结点F，使A的平衡因子由1变为2，成为不平衡的最小二叉树根结点。此时A结点顺时针右旋转，旋转过程中遵循“旋转优先”的规则，A结点替换D结点成为B结点的右子树，D结点成为A结点的左孩子。</div>
<div style="line-height: 26px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
（2）RR型</div>
<div style="line-height: 26px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
RR型：插入位置<font color="#FF0000"><strong>为右子树的右孩子，进行向左旋转</strong></font></div>
<div style="line-height: 26px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
<div style="line-height: 26px;"><img alt="平衡二叉树 - 枫叶 - 枫叶" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://img609.ph.126.net/hS3sNmPFqzhsRN5AVZQECQ==/1891511843497439874.gif" style="border-style: initial; border-color: initial; max-width: 100%; margin-top: 0px; margin-right: 10px; margin-bottom: 0px; margin-left: 0px;" title="二叉平衡树"></div>
<div style="line-height: 26px;">
由于在A的右子树C的右子树插入了结点F，A的平衡因子由-1变为-2，成为不平衡的最小二叉树根结点。此时，A结点逆时针左旋转，遵循“旋转优先”的规则，A结点替换D结点成为C的左子树，D结点成为A的右子树。</div>
<div style="line-height: 26px;">（3）LR型</div>
<div style="line-height: 26px;">LR型：插入位置为<font color="#FF0000"><strong>左子树的右孩子，要进行两次旋转，先左旋转，再右旋转；第一次最小不平衡子树的根结点先不动，调整插入结点所在的子树，第二次再调整最小不平衡子树。</strong></font></div>
<div style="line-height: 26px;">
<div style="line-height: 26px;"><img alt="平衡二叉树 - 枫叶 - 枫叶" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://img.ph.126.net/Q-WMPZXSJAhOiyI9OuqXPQ==/3372914645925000410.gif" style="border-style: initial; border-color: initial; max-width: 100%; margin-top: 0px; margin-right: 10px; margin-bottom: 0px; margin-left: 0px;" title="二叉平衡树"></div>
&nbsp;<wbr></div>
&nbsp;<wbr>由于在A的左子树B的右子树上插入了结点F，A的平衡因子由1变为了2，成为不平衡的最小二叉树根结点。第一次旋转A结点不动，先将B的右子树的根结点D向左上旋转提升到B结点的位置，然后再把该D结点向右上旋转提升到A结点的位置。</div>
<div style="line-height: 26px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
（4）RL型</div>
<div style="line-height: 26px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
RL型：插入位置为右子树的左孩子，进行两次调整，先右旋转再左旋转；处理情况与LR类似。</div>
<div style="line-height: 26px; color: rgb(115, 115, 115); font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: rgb(255, 255, 255);">
<div style="line-height: 26px;"><img height="222" alt="平衡二叉树 - 枫叶 - 枫叶" src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" real_src="http://img74.ph.126.net/QCtqXv7LRpZ78m-nrdy6zA==/1852386821735086852.gif" width="560" style="border-style: initial; border-color: initial; max-width: 100%; margin-top: 0px; margin-right: 10px; margin-bottom: 0px; margin-left: 0px; width: 547px; height: 229px;" title="二叉平衡树"></div>
</div>
</div>
<div><br></div>
<div>code：</div>
<div><br></div>
<div>#define LH +1</div>
<div>#define EH 0</div>
<div>#define RH -1</div>
<div>#define ElemType int</div>
<div>#define Status int</div>
<div>#define EQ(a,b) ((a)==(b))</div>
<div>#define LT(a,b) ((a)&lt;(b))</div>
<div>#define LQ(a,b) ((a)&gt;(b))</div>
<div><br></div>
<div>typedef struct BSTNode</div>
<div>{</div>
<div>ElemType data;</div>
<div>int bf; // 节点的平衡因子</div>
<div>struct BSTNode * lchild, * rchild; //左右孩子指针</div>
<div>}BSTNode, * BSTree;</div>
<div><br></div>
<div>#include</div>
<div>#include</div>
<div>#include</div>
<div>using namespace std;</div>
<div>void R_Rotate(BSTree &amp; p)</div>
<div>{</div>
<div>//对以*p 为根的二叉排序树做右旋处理，处理之后p指向新的树根结点，即旋转处理之前的左子树的根结点</div>
<div>BSTree lc;</div>
<div>lc = p-&gt;lchild;//lc指向p的左子树</div>
<div>p-&gt;lchild = lc-&gt;rchild;//p左子树lc的有右子树</div>
<div>lc-&gt;rchild = p; //lc右子树指向p</div>
<div>p = lc;//p指向新的根结点</div>
<div>}//R_Rotate</div>
<div>void L_Rotate(BSTree &amp; p)</div>
<div>{</div>
<div>//对以*p 为根的二叉排序树做左旋处理，处理之后p指向新的树根结点，即旋转处理之前的左子树的根结点</div>
<div>BSTree rc;</div>
<div>rc = p-&gt;rchild;//rc指向p的左子树</div>
<div>p-&gt;rchild = rc-&gt;lchild;//p左子树rc的左子树</div>
<div>rc-&gt;lchild = p; //rc左子树指向p</div>
<div>p = rc;//p指向新的根结点</div>
<div>}//R_Rotate</div>
<div>void LeftBalance( BSTree &amp; T)</div>
<div>{</div>
<div>BSTree lc,rd;</div>
<div>lc = T-&gt;lchild;</div>
<div><br></div>
<div>switch(lc-&gt;bf)</div>
<div>{</div>
<div>case LH:</div>
<div>lc-&gt;bf = T-&gt;bf = EH;</div>
<div>R_Rotate(T); break;</div>
<div>case RH:</div>
<div>rd = lc-&gt;rchild;</div>
<div>T-&gt;lchild = rd-&gt;rchild;</div>
<div>lc-&gt;rchild = rd-&gt;lchild;</div>
<div>rd-&gt;lchild = lc;</div>
<div>rd-&gt;rchild = T;</div>
<div><br></div>
<div>T = rd;</div>
<div>}//switch(lc-&gt;bf)</div>
<div>}//LeftBalance</div>
<div>void RightBalance( BSTree &amp; T)</div>
<div>{</div>
<div>BSTree rc,rd;</div>
<div>rc = T-&gt;rchild;</div>
<div><br></div>
<div>switch(rc-&gt;bf)</div>
<div>{</div>
<div>case RH:</div>
<div>rc-&gt;bf = T-&gt;bf = EH;</div>
<div>L_Rotate(T); break;</div>
<div>case LH:</div>
<div>rd = rc-&gt;lchild;</div>
<div>T-&gt;rchild = rd-&gt;lchild;</div>
<div>rc-&gt;lchild = rd-&gt;rchild;</div>
<div>rd-&gt;rchild = rc;</div>
<div>rd-&gt;lchild = T;</div>
<div><br></div>
<div>T = rd;</div>
<div>}//switch(rc-&gt;bf)</div>
<div>}//RightBalance</div>
<div>Status InsertAVL ( BSTree &amp;T , ElemType e, bool
&amp;taller )</div>
<div>{//若平衡二叉树中不存在e，则插入新节点e返回1，否则返回0.
&nbsp;<wbr>若因插入结点使树不平衡，进行旋转，taller代表树是否长高</div>
<div><br></div>
<div>if(!T){ //空树，直接插入</div>
<div>T = (BSTNode *)malloc(sizeof(BSTNode)); T-&gt;data =
e;&nbsp;<wbr></div>
<div>T-&gt;lchild = T-&gt;rchild = NULL; T-&gt;bf = EH; taller =
true;</div>
<div>}</div>
<div><br></div>
<div>else {</div>
<div>if(EQ(e,T-&gt;data) ){ &nbsp;<wbr> taller= false;
return 0;} &nbsp;<wbr>//已存在e</div>
<div>if(LT(e,T-&gt;data) ) { // e&lt;根结点，向左查找左子树</div>
<div>if(!InsertAVL(T-&gt;lchild,e,taller) ) &nbsp;<wbr>
&nbsp;<wbr>return 0;///未插入</div>
<div>if( taller ) &nbsp;<wbr>//已插入左子树并使树长高</div>
<div>switch (T-&gt;bf)//检察 T 的平衡度</div>
<div>{</div>
<div>case LH: //原左子树高于右子树，则左平衡处理</div>
<div>LeftBalance(T); taller = false; break;</div>
<div>case EH:</div>
<div>T-&gt;bf = LH; taller = true; break;</div>
<div>case RH:</div>
<div>T-&gt;bf = EH; taller = false; break;</div>
<div>}</div>
<div>}//if</div>
<div>else</div>
<div>{</div>
<div>if(!InsertAVL(T-&gt;rchild,e,taller) ) &nbsp;<wbr>
&nbsp;<wbr>return 0;</div>
<div>if( taller )</div>
<div>switch (T-&gt;bf)</div>
<div>{</div>
<div>case LH:</div>
<div>T-&gt;bf = EH;taller = false; break;</div>
<div>case EH:</div>
<div>T-&gt;bf = RH; taller = true; break;</div>
<div>case RH:</div>
<div>RightBalance(T); taller = false; break;</div>
<div>}</div>
<div>}//else</div>
<div>}//else</div>
<div>return 1;</div>
<div>}//InsertAVL</div>
<div>void InOrderTraverse(BSTree &nbsp;<wbr>T)</div>
<div>{//中序遍历二叉树，递归</div>
<div>if(T){</div>
<div>InOrderTraverse(T-&gt;lchild);</div>
<div>cout&lt;&lt; T-&gt;data&lt;&lt;" ";</div>
<div>InOrderTraverse(T-&gt;rchild);</div>
<div>}</div>
<div>}</div>
<div>int main()</div>
<div>{</div>
<div>ElemType e;</div>
<div>int n;</div>
<div>BSTree T;</div>
<div>T = NULL;</div>
<div>bool taller;</div>
<div>cout&lt;&lt;"请输入二叉平衡树结点个数:";</div>
<div>cin&gt;&gt;n; &nbsp;<wbr> &nbsp;<wbr>
&nbsp;<wbr>cout&lt;&lt;"请输入"&lt;&lt;n&lt;&lt;"个要插入的元素（空格隔开）：";</div>
<div>while(n--){</div>
<div>cin&gt;&gt;e;</div>
<div>InsertAVL(T,e,taller);</div>
<div>}</div>
<div>cout&lt;&lt;"二叉排序树中序遍历为："; InOrderTraverse(T);
cout&lt;&lt;endl;</div>
<div>return 0;</div>
<div>}</div>
<div><br></div>							
		</div>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  
    <article id="post-二叉树" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/02/19/二叉树/">二叉树</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<div id="sina_keyword_ad_area2" class="articalContent  ">
			<p>#define TRUE 1<br>
#define FALSE 0</p>
<p>//---------二叉树链式表示-----------<br>
typedef int Status;<br>
typedef struct BiTNode<br>
{<br>
&nbsp;<wbr>char data;<br>
&nbsp;<wbr>struct BiTNode * lchild, * rchild;<br>
}BiTNode,* BiTree;<br>
typedef struct Stack<br>
{<br>
&nbsp;<wbr>BiTree * top, * base;<br>
}Stack;<br>
#include "iostream"<br>
#include "cstdio"<br>
#include "cstdlib"<br>
//----------栈的函数的定义-----------<br>
void InitStack(Stack &amp;S)<br>
{<br>
&nbsp;<wbr>S.base = S.top&nbsp;<wbr> = (BiTree
*)malloc(sizeof(BiTree) * 100);<br>
}<br>
Status StackEmpty(Stack S)<br>
{<br>
&nbsp;<wbr>if(S.top == S.base) return TRUE;<br>
&nbsp;<wbr>else return FALSE;<br>
}<br>
void Push(Stack &amp;S,BiTree e)<br>
{<br>
&nbsp;<wbr>* S.top ++ = e;<br>
}<br>
void Pop(Stack &amp;S,BiTree &amp;e)<br>
{<br>
&nbsp;<wbr>e = *( --S.top );<br>
}<br>
BiTree GetTop(Stack S)<br>
{<br>
&nbsp;<wbr>return *(S.top-1);<br>
}<br>
//----------二叉树的函数定义----------<br>
void CreateBiTree(BiTree &amp;T)<br>
{//按先序次序输入二叉树中结点的值（一个字符），# 代表空树 ，如：ABC##DE#G##F###<br>
//则前序遍历：ABCDEGF&nbsp;<wbr> 中序遍历：CBEGDFA&nbsp;<wbr>
后序遍历：CGEFDBA<br>
&nbsp;<wbr>char ch = getchar();<br>
&nbsp;<wbr>if(ch == '#') T = NULL;<br>
&nbsp;<wbr>else {<br>
&nbsp;<wbr>&nbsp;<wbr>if(!(T = (BiTNode
*)malloc(sizeof(BiTNode)))) exit(OVERFLOW);<br>
&nbsp;<wbr>&nbsp;<wbr>T-&gt;data =
ch;&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>//生成根结点<br>

&nbsp;<wbr>&nbsp;<wbr>CreateBiTree(T-&gt;lchild);&nbsp;<wbr>//构造左子树<br>

&nbsp;<wbr>&nbsp;<wbr>CreateBiTree(T-&gt;rchild);&nbsp;<wbr>//构造右子树<br>

&nbsp;<wbr>}<br>
}//CreateBiTree<br>
void Visit(char c)<br>
{<br>
&nbsp;<wbr>printf("%c",c);<br>
}<br>
void PreOrderTraverse(BiTree T)<br>
{//先序遍历二叉树，递归<br>
&nbsp;<wbr>if(T){<br>
&nbsp;<wbr>&nbsp;<wbr>Visit(T-&gt;data);<br>
&nbsp;<wbr>&nbsp;<wbr>PreOrderTraverse(T-&gt;lchild);<br>

&nbsp;<wbr>&nbsp;<wbr>PreOrderTraverse(T-&gt;rchild);<br>

&nbsp;<wbr>}<br>
}<br>
void PostOrderTraverse(BiTree T)<br>
{//先序遍历二叉树，递归<br>
&nbsp;<wbr>if(T){<br>
&nbsp;<wbr>&nbsp;<wbr>PostOrderTraverse(T-&gt;lchild);<br>

&nbsp;<wbr>&nbsp;<wbr>PostOrderTraverse(T-&gt;rchild);<br>

&nbsp;<wbr>&nbsp;<wbr>Visit(T-&gt;data);<br>
&nbsp;<wbr>}<br>
}<br>
void InOrderTraverse(BiTree T)<br>
{//中序遍历二叉树，非递归<br>
&nbsp;<wbr><br>
&nbsp;<wbr><br>
&nbsp;<wbr>Stack S;InitStack(S);<br>
&nbsp;<wbr>BiTree p = T;<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> while( p ||
!StackEmpty(S)) {<br>
&nbsp;<wbr>&nbsp;<wbr>//printf("\n%%%%%%%%%%%%调试%%%%%%%%%%%%%%%%%%%%\n");<br>

&nbsp;<wbr>&nbsp;<wbr>//PreOrderTraverse(p);<br>
&nbsp;<wbr>&nbsp;<wbr>//PreOrderTraverse(GetTop(S));<br>

&nbsp;<wbr>&nbsp;<wbr>//printf("\n%%%%%%%%%%%%调试%%%%%%%%%%%%%%%%%%%%\n");<br>

&nbsp;<wbr>&nbsp;<wbr>if(p)
{Push(S,p);&nbsp;<wbr>&nbsp;<wbr> p =
p-&gt;lchild;}<br>
&nbsp;<wbr>&nbsp;<wbr>if( p == NULL &amp;&amp;
!StackEmpty(S)) {<br>
&nbsp;<wbr>&nbsp;<wbr>//&nbsp;<wbr>printf("dddd\n");<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>Pop(S,p);//空指针退栈<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>Visit(p-&gt;data);<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>p =
p-&gt;rchild;&nbsp;<wbr><br>
&nbsp;<wbr>&nbsp;<wbr>}//else<br>
&nbsp;<wbr>}//while<br>
}<br>
void CountLeaf (BiTree T,&nbsp;<wbr> int&amp; count){<br>
&nbsp;<wbr>&nbsp;<wbr> if ( T ) {<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
if ((!T-&gt;lchild)&amp;&amp; (!T-&gt;rchild))<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
count++;&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
// 对叶子结点计数<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
CountLeaf( T-&gt;lchild, count);&nbsp;<wbr><br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
CountLeaf( T-&gt;rchild, count);<br>
&nbsp;<wbr>&nbsp;<wbr> } // if<br>
} // CountLeaf<br>
int Depth (BiTree T ){ // 返回二叉树的深度<br>
&nbsp;<wbr>int depthval,depthLeft,depthRight;<br>
&nbsp;<wbr>if ( !T
)&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> depthval =
0;<br>
&nbsp;<wbr>else&nbsp;<wbr> {<br>
&nbsp;<wbr>&nbsp;<wbr>depthLeft = Depth( T-&gt;lchild
);<br>
&nbsp;<wbr>&nbsp;<wbr>depthRight= Depth( T-&gt;rchild
);<br>
&nbsp;<wbr>&nbsp;<wbr>depthval = 1 + ( depthLeft &gt;
depthRight ? depthLeft : depthRight);<br>
&nbsp;<wbr>}&nbsp;<wbr>&nbsp;<wbr><br>
&nbsp;<wbr>return depthval;<br>
}</p>
<p><br>
int main()<br>
{<br>
&nbsp;<wbr>BiTree T;<br>
&nbsp;<wbr>int count = 0;</p>
<p>&nbsp;<wbr>int num,init=0;<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> int
door=1;//控制是否退出最外层while循环<br>
&nbsp;<wbr>while( door )<br>
&nbsp;<wbr>{&nbsp;<wbr><br>
&nbsp;<wbr>&nbsp;<wbr>printf("-----------------------------------------------------------------\n");<br>

&nbsp;<wbr>&nbsp;<wbr>printf("\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
如要对二叉树进行操作，请输入各项前面相应的数字\n");<br>
&nbsp;<wbr>&nbsp;<wbr>printf("&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
************************************\n");<br>
&nbsp;<wbr>&nbsp;<wbr>printf("&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|&nbsp;<wbr>1、创建二叉树&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|\n");<br>
&nbsp;<wbr>&nbsp;<wbr>printf("&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|&nbsp;<wbr>2、先序遍历（递归）&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|\n");<br>
&nbsp;<wbr>&nbsp;<wbr>printf("&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|&nbsp;<wbr>3、中序遍历（非递归）&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|\n");<br>
&nbsp;<wbr>&nbsp;<wbr>printf("&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|&nbsp;<wbr>4、后序遍历（递归）&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|\n");<br>
&nbsp;<wbr>&nbsp;<wbr>printf("&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|&nbsp;<wbr>5、求叶子节点个数&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|\n");<br>
&nbsp;<wbr>&nbsp;<wbr>printf("&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|&nbsp;<wbr>6、求树的深度&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|\n");<br>
&nbsp;<wbr>&nbsp;<wbr>printf("&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|&nbsp;<wbr>0、退出&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
|\n");<br>
&nbsp;<wbr>&nbsp;<wbr>printf("&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>
************************************\n");</p>
<p>&nbsp;<wbr>&nbsp;<wbr>printf(" 请输入数字进行操作：");<br>
&nbsp;<wbr>&nbsp;<wbr>scanf("%d",&amp;num);<br>
&nbsp;<wbr>&nbsp;<wbr>if(num==0||num==1||num==2||num==3||num==4||num==5||num==6)<br>

&nbsp;<wbr>&nbsp;<wbr>{<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>printf("\n-----------------------------------------------------------------\n");<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>switch( num
)<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>{<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>case
0:<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>door
= 0;<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>break;<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>case
1:<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>printf("请按先序次序输入二叉树的结点(以A、B、C等代表结点，#
代表空)，如ABC##DE#G##F###\n");<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>getchar();//清屏函数<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>CreateBiTree(T);<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>init=1;<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>break;&nbsp;<wbr>&nbsp;<wbr><br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>case
2:<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>if(init){<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>printf("先序遍历为：");&nbsp;<wbr>
PreOrderTraverse (T);&nbsp;<wbr>
printf("\n");&nbsp;<wbr>break;<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>}<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>else{
printf("请先创建二叉树！\n");&nbsp;<wbr>break;}<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>case
3:<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>if(init){<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>printf("中序遍历为：");&nbsp;<wbr>&nbsp;<wbr>
InOrderTraverse(T);&nbsp;<wbr>&nbsp;<wbr>
printf("\n");&nbsp;<wbr>break;<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>}<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>else{
printf("请先创建二叉树！\n");&nbsp;<wbr>break;}<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>case
4:<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>if(init){<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>printf("后序遍历为：");&nbsp;<wbr>&nbsp;<wbr>
PostOrderTraverse(T);&nbsp;<wbr>
printf("\n");&nbsp;<wbr>break;<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>}<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>else{
printf("请先创建二叉树！\n");&nbsp;<wbr>break;}<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>case
5:<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>if(init){<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>CountLeaf(T,count);&nbsp;<wbr>printf("叶子结点个数为：%d\n",count);&nbsp;<wbr>break;<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>}<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>else{
printf("请先创建二叉树！\n");&nbsp;<wbr>break;}</p>
<p>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>case
6:<br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>if(init){<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>printf("树的深度为：%d\n",Depth(T));&nbsp;<wbr>break;<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>}<br>

&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>else{
printf("请先创建二叉树！\n");&nbsp;<wbr>break;}<br>
&nbsp;<wbr>&nbsp;<wbr><br>
&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>}//switch<br>

&nbsp;<wbr>&nbsp;<wbr>}//if<br>
&nbsp;<wbr>&nbsp;<wbr>else
{printf("输入不正确请重新输入！\n");continue;}<br>
&nbsp;<wbr>}//while<br>
&nbsp;<wbr>return 0;<br>
}</p>							
		</div>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->


<!-- 相关文章 -->




  

  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/7/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/9/">Next &raquo;</a>
    </nav>
  


</section>
      </div>
      <footer id="footer">
  <div class="outer footer_center">
    <div id="footer-info" class="inner">
      &copy; 2017 <a href="https://github.com/hanks-zyh"> Hanks</a>
	  </div>
  </div>
 <div id="share">
  <a id="totop" title="" style="display: block;">返回顶部</a>
 </div>
</footer>

    </div>
    

<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollLoading.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>
