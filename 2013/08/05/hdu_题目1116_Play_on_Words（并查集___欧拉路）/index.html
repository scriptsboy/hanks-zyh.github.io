<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>hdu 题目1116 Play on Words（并查集 + 欧拉路） | Hanks&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Play on Words
Time Limit: 10000/5000 MS (Java/Others)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Memory Limit: 65536/32768 K (Java/Others)
Total Submission(s): 4142&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Accepted Submission(s): 1337">
<meta property="og:type" content="article">
<meta property="og:title" content="hdu 题目1116 Play on Words（并查集 + 欧拉路）">
<meta property="og:url" content="http://hanks.pub/2013/08/05/hdu_题目1116_Play_on_Words（并查集___欧拉路）/index.html">
<meta property="og:site_name" content="Hanks' Blog">
<meta property="og:description" content="Play on Words
Time Limit: 10000/5000 MS (Java/Others)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Memory Limit: 65536/32768 K (Java/Others)
Total Submission(s): 4142&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Accepted Submission(s): 1337">
<meta property="og:image" content="http://img.blog.csdn.net/20130805233541468">
<meta property="og:updated_time" content="2017-03-27T02:05:42.182Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hdu 题目1116 Play on Words（并查集 + 欧拉路）">
<meta name="twitter:description" content="Play on Words
Time Limit: 10000/5000 MS (Java/Others)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Memory Limit: 65536/32768 K (Java/Others)
Total Submission(s): 4142&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Accepted Submission(s): 1337">
<meta name="twitter:image" content="http://img.blog.csdn.net/20130805233541468">
  
  
    <link rel="icon" href="/images/favicon.png">
  
  <!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'> -->
  <!-- <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <!-- <link href="//fonts.useso.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <!-- <link href='//fonts.useso.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'> -->
  <link rel="stylesheet" href="/css/style.css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <a href="/" class="logo"></a>
    <nav id="main-nav">
      <a id="main-nav-toggle" class="nav-icon"></a>
      
        <a class="main-nav-link" href="/archives">归档</a>
      
        <a class="main-nav-link" href="/daily">日报</a>
      
        <a class="main-nav-link" href="/eye-video">开眼</a>
      
        <a class="main-nav-link" href="/joke">joke</a>
      
        <a class="main-nav-link" href="/picture-fight">斗图</a>
      
        <a class="main-nav-link" href="/atom.xml">RSS</a>
      
    </nav>
  </div>
</header>
      <nav id="mobile-nav" class="off">
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/daily" class="mobile-nav-link">日报</a>
  
    <a href="/eye-video" class="mobile-nav-link">开眼</a>
  
    <a href="/joke" class="mobile-nav-link">joke</a>
  
    <a href="/picture-fight" class="mobile-nav-link">斗图</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
</nav>
      <div class="outer">
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <div class="info">
     <div class="content">
       <div>
         <a href="https://github.com/hanks-zyh"><img class="avatar" src="https://avatars2.githubusercontent.com/u/6268322?v=3&s=460" alt="" /></a>
       </div>
       <div class="name">
         <h2 >Hanks</h2>
       </div>
       <p>‭100100011101‬</p>
       <div class="account">
         <div class="account-item">
           <a href="http://weibo.com/u/2359002991"><img src="http://ww1.sinaimg.cn/large/8c9b876fjw1f3ik9y4q7hj205k05kdfx.jpg" style="width:40px;height:40px;border-radius: 50%;"></a>
         </div>
         <div class="account-item">
              <a href="http://www.zhihu.com/people/yuhan-zhang-36"><img src="http://ww2.sinaimg.cn/large/8c9b876fjw1f3ik7sv63wj205k05k3yg.jpg" style="width:40px;height:40px;border-radius: 50%;"></a>
         </div>
         <div class="account-item">
           <a href="https://github.com/hanks-zyh"> <img src="http://ww1.sinaimg.cn/large/8c9b876fly1fe196fbtiqj205k05ka9u.jpg" style="width:40px;height:40px;border-radius: 50%;"></a>
         </div>
       </div>
     </div>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">最新发布</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/10/11/android-night-mode/">Android 夜间模式</a>
          </li>
        
          <li>
            <a href="/2017/09/28/lua-into-android/">Lua 嵌入 Android 原理</a>
          </li>
        
          <li>
            <a href="/2017/04/28/lua-in-android/">探究 lua 在 Android 中的应用</a>
          </li>
        
          <li>
            <a href="/2017/03/26/node-image-recognition/">Node 识别图片中的文字</a>
          </li>
        
          <li>
            <a href="/2017/03/22/proxy-test/">请求代理</a>
          </li>
        
          <li>
            <a href="/2017/02/16/android-customview-inputmethod/">Android 自定义 view 连接输入法</a>
          </li>
        
          <li>
            <a href="/2017/01/10/android-lua/">Android 与 Lua</a>
          </li>
        
          <li>
            <a href="/2017/01/10/android-markdown-render/">Android 下 Markdown 渲染</a>
          </li>
        
          <li>
            <a href="/2017/01/09/android-webview-font/">Android 中 webview 自定义字体</a>
          </li>
        
          <li>
            <a href="/2016/09/25/slack-bot/">slack bot</a>
          </li>
        
          <li>
            <a href="/2016/09/19/webapp/">让网页更适配移动设备</a>
          </li>
        
          <li>
            <a href="/2016/09/05/weex-2333/">体验 weex —— 写一个表情包应用</a>
          </li>
        
          <li>
            <a href="/2016/08/31/nestedscrollchild/">WebView 实现 NestedScrollingChild</a>
          </li>
        
          <li>
            <a href="/2016/08/29/nestedchildparent/">NestedScrollingParent 实现复杂交互效果</a>
          </li>
        
          <li>
            <a href="/2016/08/04/telegram-bot/">写一个福利 Telegram 机器人</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Activity/" style="font-size: 10px;">Activity</a> <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Atom/" style="font-size: 10px;">Atom</a> <a href="/tags/Dagger2/" style="font-size: 10px;">Dagger2</a> <a href="/tags/EditText/" style="font-size: 10px;">EditText</a> <a href="/tags/Express/" style="font-size: 11.67px;">Express</a> <a href="/tags/Fragment/" style="font-size: 10px;">Fragment</a> <a href="/tags/Framework/" style="font-size: 11.67px;">Framework</a> <a href="/tags/HTML-CSS/" style="font-size: 10px;">HTML/CSS</a> <a href="/tags/Jade/" style="font-size: 10px;">Jade</a> <a href="/tags/Java/" style="font-size: 13.33px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Kotlin/" style="font-size: 15px;">Kotlin</a> <a href="/tags/LAMP/" style="font-size: 10px;">LAMP</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Lua/" style="font-size: 13.33px;">Lua</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/NestedScrolling/" style="font-size: 13.33px;">NestedScrolling</a> <a href="/tags/Node-js/" style="font-size: 13.33px;">Node.js</a> <a href="/tags/OS-X/" style="font-size: 10px;">OS X</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/Python/" style="font-size: 11.67px;">Python</a> <a href="/tags/React-Native/" style="font-size: 18.33px;">React-Native</a> <a href="/tags/Refactoring/" style="font-size: 10px;">Refactoring</a> <a href="/tags/Rx/" style="font-size: 10px;">Rx</a> <a href="/tags/RxJava/" style="font-size: 13.33px;">RxJava</a> <a href="/tags/Rxandroid/" style="font-size: 10px;">Rxandroid</a> <a href="/tags/Rxjava/" style="font-size: 11.67px;">Rxjava</a> <a href="/tags/SQLite/" style="font-size: 10px;">SQLite</a> <a href="/tags/Scrapy/" style="font-size: 11.67px;">Scrapy</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/SwipeRefreshLayout/" style="font-size: 10px;">SwipeRefreshLayout</a> <a href="/tags/Telegram/" style="font-size: 10px;">Telegram</a> <a href="/tags/TextView/" style="font-size: 10px;">TextView</a> <a href="/tags/Ubuntu/" style="font-size: 16.67px;">Ubuntu</a> <a href="/tags/VPS/" style="font-size: 10px;">VPS</a> <a href="/tags/View/" style="font-size: 10px;">View</a> <a href="/tags/Vue-js/" style="font-size: 10px;">Vue.js</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/WebView/" style="font-size: 11.67px;">WebView</a> <a href="/tags/bot/" style="font-size: 10px;">bot</a> <a href="/tags/crontab/" style="font-size: 10px;">crontab</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/interpolator/" style="font-size: 10px;">interpolator</a> <a href="/tags/leancloud/" style="font-size: 10px;">leancloud</a> <a href="/tags/mac-os/" style="font-size: 10px;">mac os</a> <a href="/tags/slack/" style="font-size: 10px;">slack</a> <a href="/tags/virtualBox/" style="font-size: 10px;">virtualBox</a> <a href="/tags/weex/" style="font-size: 10px;">weex</a> <a href="/tags/代理/" style="font-size: 10px;">代理</a> <a href="/tags/依赖注入/" style="font-size: 10px;">依赖注入</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/学习/" style="font-size: 10px;">学习</a> <a href="/tags/必备知识/" style="font-size: 10px;">必备知识</a> <a href="/tags/性能优化/" style="font-size: 10px;">性能优化</a> <a href="/tags/总结/" style="font-size: 10px;">总结</a> <a href="/tags/热修复/" style="font-size: 11.67px;">热修复</a> <a href="/tags/爬虫/" style="font-size: 10px;">爬虫</a> <a href="/tags/自动化/" style="font-size: 10px;">自动化</a> <a href="/tags/设计/" style="font-size: 10px;">设计</a>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://github.com/hanks-zyh">hanks-zyh</a>
          </li>
        
          <li>
            <a href="http://kiya.space">Kiya‘s space</a>
          </li>
        
          <li>
            <a href="http://rocko.xyz/">Rocko&#39;s blog</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <div class="wx">
      <h3 class="widget-title">微信公众号</h3>
      <img src='http://ww1.sinaimg.cn/large/8c9b876fly1fe0nnlvokpj20by0bywfi.jpg' height="100%" width="100%" >
      <p>搜索公众号: CodeProvider</p>
    </div>
  </div>


  
</aside>
        
        <section id="main" class="mdl-shadow--2dp"><article id="post-hdu_题目1116_Play_on_Words（并查集___欧拉路）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      hdu 题目1116 Play on Words（并查集 + 欧拉路）
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p></p>
<h1 style="color:rgb(26,92,200); text-align:center; font-family:'Times New Roman'">
Play on Words</h1>
<span style="font-family:'Times New Roman'; font-size:14px"><strong><span style="font-family:Arial; font-size:12px; color:green">Time Limit: 10000/5000 MS (Java/Others)&nbsp;&nbsp;&nbsp;&nbsp;Memory Limit: 65536/32768 K (Java/Others)<br>
Total Submission(s): 4142&nbsp;&nbsp;&nbsp;&nbsp;Accepted Submission(s): 1337<br>
</span></strong></span><br style="font-family:'Times New Roman'; font-size:14px">
<br style="font-family:'Times New Roman'; font-size:14px">
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Problem Description</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
Some of the secret doors contain a very interesting word puzzle. The team of archaeologists has to solve it to open that doors. Because there is no other way to open the doors, the puzzle is very important for us.&nbsp;<br>
<br>
There is a large number of magnetic plates on every door. Every plate has one word written on it. The plates must be arranged into a sequence in such a way that every word begins with the same letter as the previous word ends. For example, the word ``acm''
 can be followed by the word ``motorola''. Your task is to write a computer program that will read the list of words and determine whether it is possible to arrange all of the plates in a sequence (according to the given rule) and consequently to open the door.&nbsp;<br>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
&nbsp;</div>
<br style="font-family:'Times New Roman'; font-size:14px">
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
The input consists of T test cases. The number of them (T) is given on the first line of the input file. Each test case begins with a line containing a single integer number Nthat indicates the number of plates (1 &lt;= N &lt;= 100000). Then exactly Nlines follow,
 each containing a single word. Each word contains at least two and at most 1000 lowercase characters, that means only letters 'a' through 'z' will appear in the word. The same word may appear several times in the list.&nbsp;<br>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
&nbsp;</div>
<br style="font-family:'Times New Roman'; font-size:14px">
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
Your program has to determine whether it is possible to arrange all the plates in a sequence such that the first letter of each word is equal to the last letter of the previous word. All the plates from the list must be used, each exactly once. The words mentioned
 several times must be used that number of times.&nbsp;<br>
If there exists such an ordering of plates, your program should print the sentence &quot;Ordering is possible.&quot;. Otherwise, output the sentence &quot;The door cannot be opened.&quot;.&nbsp;<br>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
&nbsp;</div>
<br style="font-family:'Times New Roman'; font-size:14px">
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">3
2
acm
ibm
3
acm
malform
mouse
2
ok
ok</div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
&nbsp;</div>
<br style="font-family:'Times New Roman'; font-size:14px">
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">The door cannot be opened.
Ordering is possible.
The door cannot be opened.</div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
&nbsp;<br>
<br>
<div class="panel_bottom"><strong><span style="font-size:18px">第一次用深搜做的，提交之后出现&nbsp;<span style="color:rgb(0,128,0)">Runtime Error</span><span style="color:rgb(0,128,0)">(STACK_OVERFLOW)</span></span></strong></div>
<div class="panel_bottom"><span style="color:rgb(0,128,0)">&nbsp;</span><strong><span style="font-size:18px">然后看到可以使用<span style="color:rgb(51,255,51)">#pragma comment(linker, &quot;/STACK:102400000,102400000&quot;)</span>来解决栈溢出，加了之后然后提交，结果超时了</span></strong></div>
<div class="panel_bottom"><strong><span style="font-size:18px">一下是超时代码：</span></strong></div>
<div class="panel_bottom">&nbsp;</div>
<div class="panel_bottom">等我改进。。。。。</div>
<p>&nbsp;</p>
<pre class="cpp" name="code">/*　　超时了、、、、
2013/08/04 16:02
author :zyh
*/

#define N 100003
#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#pragma comment(linker, &quot;/STACK:102400000,102400000&quot;)//解决 STACK＿Overflow

using namespace std;

char a[N][3];
char s[1002];
bool visit[N];
int sign,n;

void DFS(int i,int num)
{
	if(sign || num == n) return;
//	printf(&quot;i=%d,num=%d,a=%c\n&quot;,i,num,a[i][1]);
	visit[i] = 1;	num++;
	int j,flag = 0;
	for(j=0; j&lt;n; j++)
	{
		if(j!= i &amp;&amp; !visit[j] &amp;&amp; a[i][1] == a[j][0] )  //找头 和第i行尾相同的 
		{
	//		printf(&quot;j=%d,a=%c\n&quot;,j,a[j][0]);
				flag = 1;
				DFS(j,num);		
		}	
	}
	if(!flag &amp;&amp; num == n ) //没有找到与末尾相同的，但是是序列最后一个结点 
	{
		sign = 1; return;
	}
	else {
		visit[i] = 0;	
		return;	
	}
}

int main()
{
	int i,t;

	scanf(&quot;%d&quot;,&amp;t);
	while(t--)
	{
		scanf(&quot;%d&quot;,&amp;n);
		getchar();
		for(i=0;i&lt;n;i++)
		{
			gets(s);
			a[i][0] = s[0];
			a[i][1] = s[strlen(s)-1];
		}	
	//	for(i=0;i&lt;n;i++) printf(&quot;%d : %c %c\n&quot;,i,a[i][0],a[i][1]);
		sign = 0;
		for(i=0;i&lt;n;i++) visit[i] = 0;
		
		for(i=0;i&lt;n;i++)	DFS(i,0); 	
		
		if(sign) printf(&quot;Ordering is possible.\n&quot;);
		else printf(&quot;The door cannot be opened.\n&quot;);
	}
	return 0;
}</pre>
<p><br>
&nbsp;</p>
<p>&nbsp;</p>
</div>
<br>
<p></p>
<p><strong><span style="font-family:KaiTi_GB2312; font-size:18px">欧拉回路<br>
1、欧拉路：在无孤立顶点的图中，若存在一条路，经过图中每条边一次且仅一次，则称此路为欧拉路。如下图（左）中存在一条从顶点1到顶点6的欧拉路。后面的例题（一笔画问题）本质上就是判断一个图是否存在欧拉路。<br>
2、欧拉回路：在无孤立顶点的图中，若存在一条路，经过图中每条边一次且仅一次，且回到原来位置，则称此路为欧拉回路。如下图（右）中任意两个顶点之间都存在欧拉回路。著名的柯&#23612;斯堡七桥问题（图论起源）本质上就是讨论一个图的欧拉回路问题。<br>
3、欧拉图：存在欧拉回路的图，称为欧拉图，图（右）所示的图就是一个欧拉图。</span></strong><br>
</p>
<p><img src="http://img.blog.csdn.net/20130805233541468" alt=""><br>
</p>
<p><strong><span style="font-family:KaiTi_GB2312; font-size:18px">定理1：存在欧拉路的条件：图是连通的，且存在0个或2个奇点。如果存在2个奇点，则欧拉路一定是从一个奇点出发，以另一个奇点结束。<br>
定理2：存在欧拉回路的条件：图是连通的，且不存在奇点。</span></strong></p>
<p><strong><span style="font-family:KaiTi_GB2312; font-size:18px"><br>
6、哈密尔顿图：在无孤立顶点的连通图中，若存在一条路，经过图中每个顶点一次且仅一次，则称此图为哈密尔顿图。<br>
7、哈密尔顿环：是一条沿着图的n条边环行的路径，它访问每一个顶点一次且仅一次，并且返回到它的开始位置。</span></strong><br>
<br>
<br>
</p>
<p><strong><span style="font-size:18px; color:#ff9900"><br>
</span></strong></p>
<p><strong><span style="font-size:18px; color:#ff9900">1.首先建立并查集，判断是否是一个根（是否有孤立顶点），首先必须满足一个根结点</span></strong></p>
<p><strong><span style="font-size:18px; color:#ff9900">2.判断各个点的入度和出度， 入度和出度 都为0 或1，欧拉路</span></strong></p>
<p><strong><span style="font-size:18px; color:#ff9900">3.中间结点的入度必须等于出度</span></strong></p>
<p><br>
</p>
<p>code：</p>
<p></p>
<pre name="code" class="cpp">/*Problem : 1116 ( Play on Words )     Judge Status : Accepted
RunId : 8840032    Language : C++    Author : 18236887539
Code Render Status : Rendered By HDOJ C++ Code Render Version 0.01 Beta*/</pre><pre name="code" class="cpp">#define N 30
#include&lt;iostream&gt;
#include&lt;stdio.h&gt;
#include&lt;string.h&gt;
using namespace std;

int father[N],in[N],out[N];
bool visit[N];

int find(int x)
{
    while( father[x] != x)
     x = father[x];
    return x;
}

int main()
{
    int i,t,n,a,b;
    char s[1002];
    scanf(&quot;%d&quot;,&amp;t);
    while(t--)
    {
        for(i=0;i&lt;N;i++)
        {
            father[i] = i;
            in[i] = out[i] = visit[i] = 0;
        }
        scanf(&quot;%d&quot;,&amp;n);
        getchar();
        while(n--)
        {
            gets(s);
            a = s[0]-'a';
            b = s[strlen(s)-1]-'a';
            in[b]++;
            out[a]++;
            father[a] = father[b] = find(a);
            visit[a] = visit[b] = 1;
        }
        
        int cnt=0;
        for(i=0;i&lt;N;i++)
        {
            if(visit[i] &amp;&amp; father[i]==i ) cnt++;
        }
        
        if(cnt&gt;1)//根节点个数大于1，不满足 
        {
            printf(&quot;The door cannot be opened.\n&quot;);
            continue;
        }
        
        int mid,front,rear;
        mid = front = rear = 0;
        
        for(i=0;i&lt;N;i++)
        {
            if(visit[i] &amp;&amp; in[i]!=out[i])//没有存的略过， 入度等于出度的 略过 
            {
                if( out[i]+1 == in[i] ) rear++;
                else if(out[i] == in[i]+1) front++;
                else mid++;
            }
        }
    //    printf(&quot;mid=%d,f=%d,r=%d\n&quot;,mid,front,rear);
        if(mid&gt;0)  
        {
            printf(&quot;The door cannot be opened.\n&quot;);
            continue;
        }
        if( (front==1&amp;&amp;rear==1) ||( front==0&amp;&amp;rear==0))
        {
            printf(&quot;Ordering is possible.\n&quot;);
            continue;
        }
        else     printf(&quot;The door cannot be opened.\n&quot;);                    
    }
    return 0;
}</pre><br>
<br>
<p></p>
<p><br>
</p>

      
    </div>
</article>
 
 <!-- 上一页 下一页 -->

  
<nav id="article-nav">
  
    <a href="/2013/08/06/NYOJ_题目290_动物统计加强版/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left"></i><span>上一篇</span>
      <div class="article-nav-title">
        
          NYOJ 题目290 动物统计加强版
        
      </div>
    </a>
  
  
    <a href="/2013/08/05/hdu_题目1272_小希的迷宫_（并查集）/" id="article-nav-older" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left"></i><span>下一篇</span>
      <div class="article-nav-title">hdu 题目1272 小希的迷宫 （并查集）</div>
    </a>
  
</nav>



<!-- 相关文章 -->

  <!--

-->



<section>
    <!-- 多说分享框 -->
    <div id="comment_container"></div>
    <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
    <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
    <script>
    var gitment = new Gitment({
      owner: 'hanks-zyh',
      repo: 'everthing',
      oauth: {
        client_id: '61ce891fdf2e46b32ccc',
        client_secret: 'a0157770347b23c6c80afb19b997f114ed30f93e',
      },
    })
    gitment.render('comment_container')
    </script>
   <!-- 多说公共JS代码 end -->
</section>

</section>
      </div>
      <footer id="footer">
  <div class="outer footer_center">
    <div id="footer-info" class="inner">
      &copy; 2018 <a href="https://github.com/hanks-zyh"> Hanks</a>
	  </div>
  </div>
 <div id="share">
  <a id="totop" title="" style="display: block;">返回顶部</a>
 </div>
</footer>

    </div>
    

<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollLoading.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>
